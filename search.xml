<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>MySQL 8.0的三种安装方式</title>
      <link href="/2024/08/12/MySQL_install/"/>
      <url>/2024/08/12/MySQL_install/</url>
      
        <content type="html"><![CDATA[<h2 id="1-项目目标"><a href="#1-项目目标" class="headerlink" title="1 项目目标"></a>1 项目目标</h2><p>（1）了解MySQL三种安装方式；<br>（2）熟练使用yum安装MySQL；<br>（3）熟练使用rpm安装MySQL；<br>（4）熟练使用源码安装MySQL。</p><h2 id="2-项目准备"><a href="#2-项目准备" class="headerlink" title="2 项目准备"></a>2 项目准备</h2><h5 id="2-1-规划节点"><a href="#2-1-规划节点" class="headerlink" title="2.1 规划节点"></a>2.1 规划节点</h5><table><thead><tr><th>主机名</th><th>主机IP</th><th>节点规划</th></tr></thead><tbody><tr><td>mysql-yum</td><td>10.0.1.10</td><td>yum安装MySQL</td></tr><tr><td>mysql-rpm</td><td>10.0.1.20</td><td>rpm安装MySQL</td></tr><tr><td>mysql-make</td><td>10.0.1.30</td><td>源码安装MySQL</td></tr></tbody></table><h5 id="2-2-基础准备"><a href="#2-2-基础准备" class="headerlink" title="2.2 基础准备"></a>2.2 基础准备</h5><p>系统镜像：CentOS 7.9<br>安装包下载网址：</p><ul><li><a href="http://dev.mysql.com/get/mysql80-community-release-el7-8.noarch.rpm">MySQL的YUM包</a></li><li><a href="https://downloads.mysql.com/archives/get/p/23/file/mysql-boost-8.0.13.tar.gz">MySQL源码包</a></li></ul><h2 id="3-项目实施"><a href="#3-项目实施" class="headerlink" title="3 项目实施"></a>3 项目实施</h2><h4 id="3-1-yum安装MySQL"><a href="#3-1-yum安装MySQL" class="headerlink" title="3.1 yum安装MySQL"></a>3.1 yum安装MySQL</h4><p>（1）下载MySQL的yum包</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://dev.mysql.com/get/mysql80-community-release-el7-8.noarch.rpm</span><br></pre></td></tr></table></figure><p>（2）repo安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql80-community-release-el7-8.noarch.rpm -y</span><br></pre></td></tr></table></figure><p>（3）开始安装MySQL</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-server -y --nogpgcheck</span><br></pre></td></tr></table></figure><p>（4）启动MySQL服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld.service</span><br><span class="line">systemctl status mysqld.service</span><br><span class="line">systemctl enable mysqld.service</span><br></pre></td></tr></table></figure><p>（5）获取初始密码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &quot;password&quot; /var/log/mysqld.log</span><br></pre></td></tr></table></figure><p>（6）使用初始密码登录，并修改密码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">输入密码</span></span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;密码&#x27;;</span><br></pre></td></tr></table></figure><h4 id="3-2-rpm安装MySQL"><a href="#3-2-rpm安装MySQL" class="headerlink" title="3.2 rpm安装MySQL"></a>3.2 rpm安装MySQL</h4><p>（1）安装准备</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep -i mysql</span><br><span class="line">rpm -e [–nodeps] 包名</span><br></pre></td></tr></table></figure><p>（2）官网下载<br>访问MySQL官方网站下载对应的RPM包：</p><ul><li><a href="https://downloads.mysql.com/archives/community/">MySQL Community Server</a></li><li><a href="https://downloads.mysql.com/archives/get/p/23/file/mysql-community-libs-8.0.11-1.el7.x86_64.rpm">MySQL Community Client Library</a></li><li><a href="https://downloads.mysql.com/archives/get/p/23/file/mysql-community-common-8.0.11-1.el7.x86_64.rpm">MySQL Community Common Files</a></li><li><a href="https://downloads.mysql.com/archives/get/p/23/file/mysql-community-server-8.0.11-1.el7.x86_64.rpm">MySQL Community Server</a></li><li><a href="https://downloads.mysql.com/archives/get/p/23/file/mysql-community-client-8.0.11-1.el7.x86_64.rpm">MySQL Community Client</a></li></ul><p>根据需求下载以下RPM包：</p><ul><li>mysql-community-common-8.0.11-1.el7.x86_64.rpm</li><li>mysql-community-libs-8.0.11-1.el7.x86_64.rpm</li><li>mysql-community-server-8.0.11-1.el7.x86_64.rpm</li><li>mysql-community-client-8.0.11-1.el7.x86_64.rpm</li></ul><p>（3）上传RPM包<br>使用FTP工具将下载好的RPM包从Windows系统传输到Linux系统。<br>（4）安装RPM包<br>按照以下顺序安装RPM包，注意依赖关系：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh mysql-community-common-8.0.11-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-libs-8.0.11-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-client-8.0.11-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-server-8.0.11-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure><p>（5）启动MySQL服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld.service</span><br><span class="line">systemctl status mysqld.service</span><br><span class="line">systemctl enable mysqld.service</span><br></pre></td></tr></table></figure><h4 id="3-3-源码安装MySQL"><a href="#3-3-源码安装MySQL" class="headerlink" title="3.3 源码安装MySQL"></a>3.3 源码安装MySQL</h4><p>（1）下载MySQL源码包</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://downloads.mysql.com/archives/get/p/23/file/mysql-boost-8.0.13.tar.gz</span><br></pre></td></tr></table></figure><p>（2）创建MySQL用户和组</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql</span><br><span class="line">useradd -M -s /sbin/nologin -r -g mysql mysql</span><br></pre></td></tr></table></figure><p>（3）创建MySQL数据存放目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/mysql/data</span><br><span class="line">mkdir -p /data/mysql/log</span><br><span class="line">chown -R mysql:mysql /data/mysql/</span><br></pre></td></tr></table></figure><p>（4）安装MySQL依赖包及工具包</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y cmake make gcc gcc-c++ bison ncurses ncurses-devel openssl-devel</span><br></pre></td></tr></table></figure><p>（5）解压源码包及预编译</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">tar -vzxf mysql-boost-8.0.13.tar.gz </span><br><span class="line">cd mysql-8.0.13/</span><br><span class="line">cmake  -DCMAKE_INSTALL_PREFIX=/usr/local/mysql \</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">-DMYSQL_DATADIR=/data/mysql/data \</span></span><br><span class="line"><span class="language-bash">&gt; -DWITH_BOOST=/root/mysql-8.0.13/boost \</span></span><br><span class="line"><span class="language-bash">&gt; -DSYSCONFDIR=/etc \</span></span><br><span class="line"><span class="language-bash">&gt; -DEFAULT_CHARSET=utf8mb4 \</span></span><br><span class="line"><span class="language-bash">&gt; -DDEFAULT_COLLATION=utf8mb4_general_ci \</span></span><br><span class="line"><span class="language-bash">&gt; -DENABLED_LOCAL_INFILE=1 \</span></span><br><span class="line"><span class="language-bash">&gt; -DEXTRA_CHARSETS=all \</span></span><br><span class="line"><span class="language-bash">&gt; -DMYSQL_TCP_PORT=3306 \</span></span><br><span class="line"><span class="language-bash">&gt; -DMYSQL_UNIX_ADDR=/usr/local/mysql/mysql.sock \</span></span><br><span class="line"><span class="language-bash">&gt; -DWITH_READLINE=1 \</span></span><br></pre></td></tr></table></figure><p>粘贴运行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake  -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_DATADIR=/data/mysql/data -DWITH_BOOST=/root/mysql-8.0.13/boost -DSYSCONFDIR=/etc -DEFAULT_CHARSET=utf8mb4 -DDEFAULT_COLLATION=utf8mb4_general_ci -DENABLED_LOCAL_INFILE=1 -DEXTRA_CHARSETS=all -DMYSQL_TCP_PORT=3306 -DMYSQL_UNIX_ADDR=/usr/local/mysql/mysql.sock -DWITH_READLINE=1 </span><br></pre></td></tr></table></figure><p>配置说明</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-DCMAKE_INSTALL_PREFIX：指定MySQL安装的根目录。</span><br><span class="line">-DMYSQL_DATADIR：设置MySQL数据文件的存储位置。</span><br><span class="line">-DWITH_BOOST：指定Boost库的路径。</span><br><span class="line">-DSYSCONFDIR：my.cnf配置文件目录</span><br><span class="line">-DEFAULT_CHARSET：数据库默认字符编码</span><br><span class="line">-DDEFAULT_COLLATION：默认排序规则</span><br><span class="line">-DENABLED_LOCAL_INFILE：允许从本文件导入数据</span><br><span class="line">-DEXTRA_CHARSETS：安装所有字符集</span><br><span class="line">-DMYSQL_TCP_PORT：设置MySQL服务监听的TCP端口号</span><br><span class="line">-DMYSQL_UNIX_ADDR：套接字文件路径</span><br><span class="line">-DWITH_READLIN：启用Readline库的支持</span><br></pre></td></tr></table></figure><p>（6）编译并安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make ; make install</span><br></pre></td></tr></table></figure><p>（7）设置MySQL安装目录的权限，并编辑主配置文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">chown -R mysql:mysql /usr/local/mysql/</span><br><span class="line">vim /etc/my.cnf </span><br><span class="line">[mysqld]</span><br><span class="line">basedir=/usr/local/mysql</span><br><span class="line">datadir=/data/mysql/data</span><br><span class="line">port=3306</span><br><span class="line">socket=/usr/local/mysql/mysql.sock</span><br><span class="line">symbolic-links=0</span><br><span class="line">character-set-server=utf8</span><br><span class="line">log-error=/data/mysql/log/mysqld.log</span><br><span class="line">pid-file=/usr/local/mysql/mysqld.pid</span><br></pre></td></tr></table></figure><p>（8）设置启动脚本复制启动脚本到&#x2F;etc&#x2F;init.d&#x2F;目录，并添加执行权限</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp support-files/mysql.server /etc/init.d/mysql.server</span><br><span class="line">chmod +x /etc/init.d/mysql.server</span><br></pre></td></tr></table></figure><p>（9）初始化数据库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/mysql/bin/mysqld --initialize-insecure --user=mysql --basedir=/usr/local/mysql --datadir=/data/mysql/data</span><br></pre></td></tr></table></figure><p>（10）添加系统服务，并启动服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --add mysql.server#添加系统服务</span><br><span class="line">chkconfig mysql.server on#开机自启动</span><br><span class="line">chkconfig --list mysql.server#查看自启动状态</span><br><span class="line">/etc/init.d/mysql.server start#启动</span><br><span class="line">/etc/init.d/mysql.server status#查看</span><br><span class="line">/etc/init.d/mysql.server stop#关闭</span><br></pre></td></tr></table></figure><p>（10）设置环境变量</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export PATH=/usr/local/mysql/bin:$PATH</span><br><span class="line">source /etc/profile</span><br><span class="line">ln -s /usr/local/mysql/bin/* /usr/local/bin/</span><br></pre></td></tr></table></figure><p>（11）启动MySQL</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysql</span><br><span class="line">systemctl status mysql</span><br><span class="line">systemctl enable mysql</span><br></pre></td></tr></table></figure><p>（12）登录MySQL</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql</span><br></pre></td></tr></table></figure><p>（13）配置root用户密码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;your_password&#x27;;</span><br></pre></td></tr></table></figure><h2 id="4-项目总结"><a href="#4-项目总结" class="headerlink" title="4 项目总结"></a>4 项目总结</h2><p>本博客介绍了三种安装MySQL的方式，可以根据需要选择不同的安装方式哦。源码方式安装自定义选择更多，另外两种方式安装快，更方便。</p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>superset部署与实践</title>
      <link href="/2024/08/12/superset_install/"/>
      <url>/2024/08/12/superset_install/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><h2 id="项目目标"><a href="#项目目标" class="headerlink" title="项目目标"></a>项目目标</h2><p>（1）了解superset的概况和特点<br>（2）掌握直接安装superset<br>（3）掌握使用docker安装superset<br>（4）掌握superset的基本使用</p><h2 id="项目准备"><a href="#项目准备" class="headerlink" title="项目准备"></a>项目准备</h2><h3 id="规划节点"><a href="#规划节点" class="headerlink" title="规划节点"></a>规划节点</h3><table><thead><tr><th>主机名</th><th>主机IP</th><th>节点规划</th></tr></thead><tbody><tr><td>superset</td><td>10.0.1.140</td><td>superset</td></tr></tbody></table><h3 id="基础准备"><a href="#基础准备" class="headerlink" title="基础准备"></a>基础准备</h3><p><strong>系统镜像：</strong>CentOS 7.9<br><strong>安装包下载网址：</strong><a href="https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh"><strong>https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh</strong></a><br><strong>环境准备：</strong>docker环境，MySQL数据库</p><h2 id="项目实施"><a href="#项目实施" class="headerlink" title="项目实施"></a>项目实施</h2><h3 id="Superset入门"><a href="#Superset入门" class="headerlink" title="Superset入门"></a>Superset入门</h3><p>Superset 是一个由 Airbnb 开发并开源的数据可视化工具，目前属于 Apache 软件基金会的孵化项目。它主要设计用于数据分析师，帮助他们通过创建交互式的数据仪表盘来可视化数据。Superset 支持多种数据源，包括但不限于 MySQL、PostgreSQL、SQLite、Druid 等，并且提供了丰富的图表类型以满足不同的数据可视化需求。</p><h4 id="Superset的特点"><a href="#Superset的特点" class="headerlink" title="Superset的特点"></a>Superset的特点</h4><ol><li><strong>数据可视化与交互式看板制作</strong>：Superset 允许用户创建交互式的数据看板和报表，将复杂的数据转换为直观的图表，便于理解和分享。</li><li><strong>丰富的可视化效果</strong>：提供多种图表类型，如折线图、柱状图、饼图、热力图等，以及地图可视化，帮助用户以美观的方式展示数据。</li><li><strong>无代码数据查询与可视化</strong>：用户可以通过图形界面进行数据查询和可视化操作，无需编写代码，降低了使用门槛。</li><li><strong>SQL Lab</strong>：内置的 SQL Lab 功能强大，支持日常的 SQL 查询、数据清洗以及元数据浏览，非常适合数据分析师和开发人员使用。</li><li><strong>自定义维度与指标</strong>：数据分析师可以快速定义自定义的维度和指标，以适应不同的分析需求。</li><li><strong>支持大数据中间件和数据库</strong>：Superset 支持多种大数据解决方案和数据库，适合企业级生产环境。</li><li><strong>内存异步缓存和查询</strong>：通过无缝衔接的内存异步缓存机制，提高查询效率，优化用户体验。</li><li><strong>高度定制化的安全模型</strong>：提供细粒度的安全和权限模型，允许配置复杂的访问规则，决定不同用户对产品功能和数据集的访问权限。</li><li><strong>自定义登录验证</strong>：支持多种登录验证方式，包括数据库、OpenID、LDAP、OAuth、REMOTE_USER 等，满足不同企业的认证需求。</li><li><strong>可视化组件自定义</strong>：允许用户根据需要自定义可视化组件，提供个性化的数据展示方式。</li><li><strong>后端 API 支持</strong>：提供丰富的后端 API，方便进行定制化开发和集成。</li><li><strong>云原生架构</strong>：设计考虑了云环境的部署，支持高可用架构，适合云原生应用场景。</li></ol><p><strong>Superset 的安装可以通过多种方式进行，包括直接安装、使用 Docker 容器化安装等。</strong></p><h3 id="直接安装Superset"><a href="#直接安装Superset" class="headerlink" title="直接安装Superset"></a>直接安装Superset</h3><h4 id="安装Python环境"><a href="#安装Python环境" class="headerlink" title="安装Python环境"></a>安装Python环境</h4><p><strong>1）下载Miniconda（Python3版本）</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /opt/soft</span><br><span class="line">curl -O https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh</span><br></pre></td></tr></table></figure><p><strong>2）安装Miniconda</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash Miniconda3-latest-Linux-x86_64.sh</span><br></pre></td></tr></table></figure><p>回车之后，一直按空格，提示Please answer ‘yes’ or ‘no’:’ 输入yes。<br>指定安装路径&#x2F;opt&#x2F;soft&#x2F;conda，回车默认</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt;/opt/soft/conda</span></span><br><span class="line">PREFIX=/opt/soft/conda</span><br></pre></td></tr></table></figure><p>初始化conda3，输入yes</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Do you wish the installer to initialize Miniconda3</span><br><span class="line">[no] &gt;&gt;&gt; yes</span><br></pre></td></tr></table></figure><p><strong>3) 配置系统环境变量</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export CONDA_HOME=/opt/soft/conda</span><br><span class="line">export PATH=$PATH:$CONDA_HOME/bin</span><br><span class="line"></span><br><span class="line">source /etc/profile</span><br><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure><p>可以发现前面多了（base）,python版本是3.11<br><strong>4）取消激活base环境</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda config --set auto_activate_base false</span><br></pre></td></tr></table></figure><p><strong>5）查看conda版本</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda --version</span><br><span class="line">conda 24.3.0</span><br></pre></td></tr></table></figure><p><strong>6）配置conda国内镜像</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span><br><span class="line"> </span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</span><br><span class="line"> </span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/</span><br><span class="line"></span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/</span><br><span class="line"></span><br><span class="line">conda config --set show_channel_urls yes</span><br><span class="line"></span><br><span class="line">conda config --show channels</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714370436127-5c5e79b3-d974-4c75-8e36-feafcd769f10.png#averageHue=%232c2927&clientId=ue046bcf8-b5fb-4&from=paste&height=99&id=u534af23f&originHeight=148&originWidth=757&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=15405&status=done&style=none&taskId=u26fdb0bd-7083-4ab1-aa68-b60231690b4&title=&width=504.6666666666667" alt="image.png"><br><strong>7）创建python3.9环境</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda create --name superset python=3.9</span><br><span class="line">y</span><br></pre></td></tr></table></figure><p><strong>8）激活superset环境</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate superset</span><br></pre></td></tr></table></figure><p>若要退出环境使用以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda deactivate</span><br></pre></td></tr></table></figure><h4 id="Superset部署"><a href="#Superset部署" class="headerlink" title="Superset部署"></a>Superset部署</h4><p><strong>1）安装准备依赖</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y gcc gcc-c++ libffi-devel python-devel python-pip python-wheel python-setuptools openssl-devel cyrus-sasl-devel openldap-devel</span><br></pre></td></tr></table></figure><p><strong>2）安装setuptools和pip</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade setuptools pip</span><br></pre></td></tr></table></figure><p><strong>3）安装supetest</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install apache-superset --trusted-host https://repo.huaweicloud.com -i https://repo.huaweicloud.com/repository/pypi/simple</span><br></pre></td></tr></table></figure><p>4）初始化数据库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">superset db upgrade</span><br></pre></td></tr></table></figure><p><strong>5）创建管理员用户</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">export FLASK_APP=superset</span><br><span class="line">superset fab create-admin</span><br><span class="line"></span><br><span class="line">Username [admin]: </span><br><span class="line">User first name [admin]: </span><br><span class="line">User last name [user]: </span><br><span class="line">Email [admin@fab.org]: </span><br><span class="line">Password:</span><br><span class="line">Repeat for confirmation：</span><br><span class="line">Recognized Database Authentications.</span><br></pre></td></tr></table></figure><p><strong>6）Superset初始化</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">superset init</span><br></pre></td></tr></table></figure><p><strong>7）安装gunicorn</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install gunicorn -i https://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure><p><strong>8）启动superset</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gunicorn --workers 5 --timeout 120 --bind [ip]:[port] &quot;superset.app:create_app()&quot; --daemon</span><br></pre></td></tr></table></figure><p>若要停止superset使用以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | awk &#x27;/superset/ &amp;&amp; !/awk/&#123;print $2&#125;&#x27; | xargs kill -9</span><br></pre></td></tr></table></figure><p><strong>9）登录 Superset</strong><br>访问 <a href="%5Bport%5D%EF%BC%8Cip%E5%A1%AB%E6%9C%AC%E6%9C%BAip%EF%BC%8Cport%E5%A1%AB%E6%83%B3%E9%83%A8%E7%BD%B2%E5%88%B0%E7%9A%84%E7%AB%AF%E5%8F%A3%E3%80%82%E5%B9%B6%E5%BC%80%E6%94%BE%E8%BF%99%E4%B8%AA%E7%AB%AF%E5%8F%A3%E3%80%82">ip</a>:[port]，并使用前面创建的管理员账号进行登录。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714371029516-ca74da5e-da10-496a-8ae8-1e000eebce59.png#averageHue=%23f8f8f8&clientId=ue046bcf8-b5fb-4&from=paste&height=606&id=u09464a4b&originHeight=909&originWidth=1848&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=39919&status=done&style=none&taskId=u6bcbe081-0cc0-417c-90c6-478633fde33&title=&width=1232" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714377293030-22bf4c7f-1b17-4f31-8c09-8e3a5f6660a4.png#averageHue=%23f7f7f7&clientId=ua477eb5a-769f-4&from=paste&height=606&id=u0dfac1aa&originHeight=909&originWidth=1848&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=100589&status=done&style=none&taskId=u04781ee5-d30c-427e-a4ec-a65eac1993c&title=&width=1232" alt="image.png"><br>现在还没有数据，所以是空的。</p><h3 id="使用docker安装Superset"><a href="#使用docker安装Superset" class="headerlink" title="使用docker安装Superset"></a>使用docker安装Superset</h3><p><strong>Docker 下载并查看superset镜像</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker search superset</span><br><span class="line">docker pull apache/superset</span><br><span class="line">docker images</span><br></pre></td></tr></table></figure><p><strong>运行superset并挂载到本地&#x2F;opt&#x2F;superset：</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /opt/superset</span><br><span class="line">docker run --name my_superset -d -p 8088:8088 -v /opt/superset:/home/superset apache/superset</span><br></pre></td></tr></table></figure><p>进入容器：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br><span class="line">docker exec -it my_superset /bin/bash</span><br></pre></td></tr></table></figure><p>初始化数据库和superset</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">superset db upgrade</span><br><span class="line">superset init</span><br></pre></td></tr></table></figure><p>superset 设置管理员账户</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export FLASK_APP=superset</span><br><span class="line">flask fab create-admin</span><br></pre></td></tr></table></figure><p>设置superset 管理员账户为:admin  密码:123456<br>汉化</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入superset 镜像</span></span><br><span class="line">docker exec -it -u root container_id /bin/bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">替换/app/superset/config.py 配置文件</span></span><br><span class="line">sed -i &quot;s/BABEL_DEFAULT_LOCALE = \&quot;en/BABEL_DEFAULT_LOCALE = \&quot;zh/g&quot; superset/config.py</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> 替换/app/superset/config.py 配置文件</span></span><br><span class="line">sed -i &quot;s/LANGUAGES = &#123;&#125;/# LANGUAGES = &#123;&#125;/g&quot; superset/config.py</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重新启动superset 镜像</span></span><br><span class="line">docker restart container_id</span><br></pre></td></tr></table></figure><h3 id="Superset基础使用"><a href="#Superset基础使用" class="headerlink" title="Superset基础使用"></a>Superset基础使用</h3><h4 id="导入数据库"><a href="#导入数据库" class="headerlink" title="导入数据库"></a>导入数据库</h4><p>导入准备好的数据库表：<br><a href="https://www.begtut.com/wp-content/uploads/2019/07/mysqldemo.sql.zip">MySQL示例数据库</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p000000 &lt; mysqldemo.sql</span><br></pre></td></tr></table></figure><p>登录superset后，依次单击“Date”&gt;“Databases”&gt;“+DATABASE”<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714377687375-6ecd083c-2069-4dfa-a284-277b6f13ee92.png#averageHue=%23f8f7f7&clientId=u1606128c-2586-4&from=paste&height=606&id=u26eed083&originHeight=909&originWidth=1848&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=93247&status=done&style=none&taskId=ue1fdfb9c-dada-4e66-8606-6f338ec30c3&title=&width=1232" alt="image.png"><br>可以选择直接填写信息，然后单击“connect”<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714377945435-5d0aac21-3bf8-4e60-b928-3b3e55f96c7e.png#averageHue=%23fbfafa&clientId=ueb32e927-7468-4&from=paste&height=593&id=u755e4ed8&originHeight=890&originWidth=714&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=70013&status=done&style=none&taskId=u7ce399cb-3829-470c-8e70-0c1369639d7&title=&width=476" alt="image.png"><br>或者使用URL的填写方式：（填写格式：mysql:&#x2F;&#x2F;{username}:{password}@{host}&#x2F;{database}）<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714380016966-6bf7b5ed-1ac6-4812-81e7-73fca4ae9e4d.png#averageHue=%23c7c6c6&clientId=uc87aedb7-76b6-4&from=paste&height=595&id=ufd3f34c9&originHeight=892&originWidth=1254&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=124064&status=done&style=none&taskId=u16d94e0b-2045-41fc-9ea0-998d9632508&title=&width=836" alt="image.png"><br>这里我设置名字为mysqldemo，连接成功后可以查看到刚刚添加的数据库。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714380032942-fb987952-ffa3-43d4-a489-ab8c879a4374.png#averageHue=%23f8f6f5&clientId=uc87aedb7-76b6-4&from=paste&height=219&id=udda5e26e&originHeight=328&originWidth=1614&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=46344&status=done&style=none&taskId=u8bf2b595-cb09-4eb2-b67f-f68f9b0faf8&title=&width=1076" alt="image.png"></p><h4 id="拉取库"><a href="#拉取库" class="headerlink" title="拉取库"></a>拉取库</h4><p>依次单击“Date”&gt;“Datasets”&gt;“+DATASET”添加数据源<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714380089628-d4dd955d-c40c-4c4e-b83f-632cc0c00ffa.png#averageHue=%23faf9f9&clientId=uc87aedb7-76b6-4&from=paste&height=606&id=ua52279aa&originHeight=909&originWidth=1848&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=176869&status=done&style=none&taskId=uc1f9f390-c52a-4f2c-9404-174e76af6b9&title=&width=1232" alt="image.png"><br>依次选择“数据源”&gt;“数据库”&gt;“表”。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714380878075-1f6b784b-8763-44de-92fb-86fb081f7a33.png#averageHue=%23fdfdfd&clientId=uc87aedb7-76b6-4&from=paste&height=538&id=u0a861fb8&originHeight=807&originWidth=706&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=20539&status=done&style=none&taskId=ueb856cb1-bf82-46f1-a09e-46cc4f336ad&title=&width=470.6666666666667" alt="image.png"><br>将所有的源添加好。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714380889614-0077ae77-6784-41fd-918e-93f97a7d4b49.png#averageHue=%23faf9f8&clientId=uc87aedb7-76b6-4&from=paste&height=437&id=ucf4d1dba&originHeight=655&originWidth=1516&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=103644&status=done&style=none&taskId=u891d6d0a-6fae-4f32-95ec-e37d9c06ca1&title=&width=1010.6666666666666" alt="image.png"></p><h4 id="创建仪表盘"><a href="#创建仪表盘" class="headerlink" title="创建仪表盘"></a>创建仪表盘</h4><p>依次点击“Dashboard”&gt;“+Dashboard”<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714381095014-49f56574-847d-4fa0-bb0c-aabcd0b428bd.png#averageHue=%23f9f9f8&clientId=uc87aedb7-76b6-4&from=paste&height=369&id=ua914c139&originHeight=553&originWidth=1848&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=76520&status=done&style=none&taskId=u0075d23c-36c7-42b6-8cde-ba79eb1c38e&title=&width=1232" alt="image.png"><br>单击顶部名称修改，可以选择拖动组件和图表自定义看板，自定义完毕后点击“保存”。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714381408823-cff61d0d-dffb-42b9-be6e-1c9754f52f60.png#averageHue=%23f8f7f7&clientId=uc87aedb7-76b6-4&from=paste&height=606&id=udf9cc907&originHeight=909&originWidth=1848&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=192005&status=done&style=none&taskId=uae786798-5632-4abe-8c03-95cfa89fdcd&title=&width=1232" alt="image.png"><br>添加完毕后，如图所示。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714381425322-bf628cb0-f9d6-4ee6-ae05-41bee226b116.png#averageHue=%23f6f6f6&clientId=uc87aedb7-76b6-4&from=paste&height=606&id=u0bcab15a&originHeight=909&originWidth=1848&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=239960&status=done&style=none&taskId=u447e544c-3e4d-456b-b207-f425d7bf43a&title=&width=1232" alt="image.png"></p><h4 id="创建图表"><a href="#创建图表" class="headerlink" title="创建图表"></a>创建图表</h4><p>依次点击“charts”&gt;“+图表”<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714381494625-58c4869e-6588-4606-8317-3793f9f4d2f0.png#averageHue=%23f9f9f9&clientId=uc87aedb7-76b6-4&from=paste&height=363&id=u1cb151e6&originHeight=544&originWidth=1827&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=86628&status=done&style=none&taskId=ua8ff1eb2-b15b-4204-960a-2299fa10cc9&title=&width=1218" alt="image.png"><br>依次“选择数据源”&gt;“选择图表样式”&gt;“创建图表”<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714381571544-d57970f7-5f84-4c3e-9134-c44a5eecc7df.png#averageHue=%23faf9f8&clientId=uc87aedb7-76b6-4&from=paste&height=361&id=u8c4aca68&originHeight=909&originWidth=1848&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=172109&status=done&style=none&taskId=ubdd208b2-b9c2-4fe1-99dd-7d0b81cfc37&title=&width=733" alt="image.png"><br>输入查询条件，限定分组和指标，可以根据参考右下角的数据。设置完成后点击执行。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714381808161-00ec265a-745b-4ed6-b564-cbe10ae323fb.png#averageHue=%23f8f7f6&clientId=uc87aedb7-76b6-4&from=paste&height=606&id=u2ec0abba&originHeight=909&originWidth=1848&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=175898&status=done&style=none&taskId=u781ba9ce-78b6-47da-b22c-eef7a5f6c24&title=&width=1232" alt="image.png"><br>设置完成之后单击“保存”，依次设置图表名称和添加到的看板。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714381915753-e20b5c06-e45e-4f0b-834e-0e455fafefa8.png#averageHue=%23e2e1e1&clientId=uc87aedb7-76b6-4&from=paste&height=363&id=u8b28e143&originHeight=544&originWidth=922&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=46759&status=done&style=none&taskId=uf6710d63-57e8-411d-93c9-48ffb269351&title=&width=614.6666666666666" alt="image.png"><br>可以到添加到的看板查看刚刚添加的图表。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714381947412-17ed9401-5383-45e0-97aa-5df913284930.png#averageHue=%23f8f6f3&clientId=uc87aedb7-76b6-4&from=paste&height=584&id=u0e483eb6&originHeight=876&originWidth=1752&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=77223&status=done&style=none&taskId=u9b26e66e-4d93-4555-89de-de3f81461c3&title=&width=1168" alt="image.png"></p><h4 id="可视化（图表）的实时刷新"><a href="#可视化（图表）的实时刷新" class="headerlink" title="可视化（图表）的实时刷新"></a><strong>可视化（图表）的实时刷新</strong></h4><p>进入到图表依次点击“…”&gt;“设置自动刷新”<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714383382829-cdd4d099-4903-4b34-8a52-d77bdeb7bfa3.png#averageHue=%23f5f5f4&clientId=uc87aedb7-76b6-4&from=paste&height=557&id=uf9522148&originHeight=836&originWidth=1829&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=183759&status=done&style=none&taskId=u38eba5e3-16cd-41ad-9004-b5f3fae7356&title=&width=1219.3333333333333" alt="image.png"><br>设置刷新间隔：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714383403332-10c4b0a2-fa93-4744-b37a-94e778c53ffc.png#averageHue=%23f4f4f4&clientId=uc87aedb7-76b6-4&from=paste&height=360&id=ud5135004&originHeight=540&originWidth=819&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=28523&status=done&style=none&taskId=ud425403f-c5d0-4f8d-aad5-8ef0a01baf1&title=&width=546" alt="image.png"></p><h4 id="用户权限管理"><a href="#用户权限管理" class="headerlink" title="用户权限管理"></a><strong>用户权限管理</strong></h4><p>进入用户列表：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714383678940-f723e829-eafe-4bb4-ae56-a15bbbb15c02.png#averageHue=%23f8f8f7&clientId=uc87aedb7-76b6-4&from=paste&height=469&id=u19b6aaeb&originHeight=704&originWidth=1835&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=104264&status=done&style=none&taskId=ub2a6c8cd-ceed-4cd9-9dc4-7ab2c530ccd&title=&width=1223.3333333333333" alt="image.png"><br>单击”+”添加。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714383733142-e5298975-5910-492c-8099-4f88796834dd.png#averageHue=%23fdfdfc&clientId=uc87aedb7-76b6-4&from=paste&height=279&id=u6e7fca79&originHeight=418&originWidth=1580&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=32753&status=done&style=none&taskId=u484fd7b3-df61-4c77-a226-641b563be12&title=&width=1053.3333333333333" alt="image.png"><br>设置用户名密码等信息，设置角色可以分组进行权限限制。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714383827244-ba0f6749-0aa6-4f8b-b466-aaaf607cd084.png#averageHue=%23fcfcfc&clientId=uc87aedb7-76b6-4&from=paste&height=590&id=u4abae155&originHeight=885&originWidth=1362&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=56510&status=done&style=none&taskId=u5326e989-4653-4fb8-b71e-077008920a2&title=&width=908" alt="image.png"><br>进入角色列表进行添加：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714384170831-8c574eee-1029-4efc-847c-ba2cc9046713.png#averageHue=%23fcfcfc&clientId=uc87aedb7-76b6-4&from=paste&height=476&id=uede57370&originHeight=714&originWidth=1611&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=68153&status=done&style=none&taskId=ua86f5e7b-bbb9-4e55-a86b-3b1d713b818&title=&width=1074" alt="image.png"><br>设置名称，添加权限，例如只给予read权限。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714384289661-35d9bb39-3799-4dd8-9758-a0b7a206cb43.png#averageHue=%23fcfbfb&clientId=uc87aedb7-76b6-4&from=paste&height=230&id=u029ed7a0&originHeight=345&originWidth=1418&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=15054&status=done&style=none&taskId=u17062e22-4799-443a-81b8-b89ab61a081&title=&width=945.3333333333334" alt="image.png"></p><h2 id="项目总结"><a href="#项目总结" class="headerlink" title="项目总结"></a>项目总结</h2><p>本博客简要介绍了superset这个BI工具，使用两种方法来部署superset，并简单介绍了superset的使用。</p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
          <category> BI工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> superset </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python编程50例</title>
      <link href="/2024/08/12/python_50/"/>
      <url>/2024/08/12/python_50/</url>
      
        <content type="html"><![CDATA[<h4 id="01-两数求和"><a href="#01-两数求和" class="headerlink" title="01 两数求和"></a>01 两数求和</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">num1 = <span class="number">20</span></span><br><span class="line">num2 = <span class="number">23</span></span><br><span class="line">result = num1 + num2</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><h4 id="02-找出100以内偶数"><a href="#02-找出100以内偶数" class="headerlink" title="02 找出100以内偶数"></a>02 找出100以内偶数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span> = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">100</span>):</span><br><span class="line">    <span class="keyword">if</span> i % <span class="number">2</span> ==<span class="number">0</span>:</span><br><span class="line">        <span class="built_in">list</span>.append(i)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>)</span><br></pre></td></tr></table></figure><h4 id="03-找出100以内奇数"><a href="#03-找出100以内奇数" class="headerlink" title="03 找出100以内奇数"></a>03 找出100以内奇数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#第一种方法</span></span><br><span class="line"><span class="built_in">list</span> = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">100</span>):</span><br><span class="line">    <span class="keyword">if</span> i % <span class="number">2</span> != <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">list</span>.append(i)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#第二种方法</span></span><br><span class="line">list2 = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">100</span>,<span class="number">2</span>):</span><br><span class="line">    list2.append(i)</span><br><span class="line"><span class="built_in">print</span>(list2)</span><br></pre></td></tr></table></figure><p>在 Python 中，列表是一种可变的有序序列，<code>append</code> 方法是在原地修改列表的一种方式。需要注意的是，<code>append</code> 方法只能添加一个元素，并且将其作为整体添加到列表的末尾。</p><h4 id="04-判断是否为素数"><a href="#04-判断是否为素数" class="headerlink" title="04 判断是否为素数"></a>04 判断是否为素数</h4><p>编写程序,判断某一个数是否为素数。所谓素数指的是指在大于1的自然数中,除了1和它本身以外不再有其他因数的自然数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">37</span></span><br><span class="line">flag = <span class="literal">False</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,a):</span><br><span class="line">    <span class="keyword">if</span> a % i == <span class="number">0</span>: <span class="comment">##判断37能否被除了1和本身整除</span></span><br><span class="line">        flag = <span class="literal">True</span></span><br><span class="line"><span class="keyword">if</span> flag:</span><br><span class="line">    <span class="built_in">print</span>(a,<span class="string">&#x27;不是素数&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(a,<span class="string">&#x27;是素数&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="05-求阶乘"><a href="#05-求阶乘" class="headerlink" title="05 求阶乘"></a>05 求阶乘</h4><p>编写程序,求出某个自然数的阶乘。一个正整数的阶乘是所有小于及等于该数的正整数的积,并且0的阶乘为1。自然数n的阶乘写作n!</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#方法一：非递归</span></span><br><span class="line">n = <span class="number">5</span></span><br><span class="line"><span class="built_in">sum</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):  <span class="comment">##表示遍历1到n</span></span><br><span class="line">    <span class="built_in">sum</span>*= i             </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#方法二：递归</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">jie_cheng</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">if</span> num == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> num * jie_cheng(num - <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(jie_cheng(n))</span><br></pre></td></tr></table></figure><p><code>*=</code>表示 sum&#x3D;sum*i</p><p><code>def</code> 是在 Python 中用于定义函数的关键字。</p><p><code>jie_cheng</code> 函数使用了递归，它会反复调用自身，直到 <code>num</code> 的值递减到 1</p><h4 id="06-求圆的周长"><a href="#06-求圆的周长" class="headerlink" title="06 求圆的周长"></a>06 求圆的周长</h4><p>编写程序,输入半径,求出圆的周长。<br>圆的周长&#x3D; 2πr &#x3D; πd</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line">pi = math.pi</span><br><span class="line">r= <span class="built_in">float</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入半径：&#x27;</span>))</span><br><span class="line">c = <span class="number">2</span> * pi * r</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;圆的周长是：<span class="subst">&#123;c&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><p>当程序运行到 <code>input()</code> 时，程序会暂停执行，等待用户输入一些文本，并在用户按下回车键后将输入的文本作为字符串返回。</p><h4 id="07-求圆的面积"><a href="#07-求圆的面积" class="headerlink" title="07 求圆的面积"></a>07 求圆的面积</h4><p>编写程序,输入半径,求出圆的面积。圆的面积&#x3D;π x r x r</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line">pi = math.pi</span><br><span class="line">r = <span class="built_in">float</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入半径：&#x27;</span>))</span><br><span class="line">s = pi  * r * r</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;圆的面积是：<span class="subst">&#123;s&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="08-求直角三角形斜边长"><a href="#08-求直角三角形斜边长" class="headerlink" title="08 求直角三角形斜边长"></a>08 求直角三角形斜边长</h4><p>编写程序,输入两个直角边长,求出三角形斜边的长度。<br>勾股定理:a^2 +b2  &#x3D;c^2</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line">a = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入第一个直角边长：&#x27;</span>))</span><br><span class="line">b = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入第二个直角边长：&#x27;</span>))</span><br><span class="line"></span><br><span class="line">m = a*a + b*b</span><br><span class="line">c = math.sqrt(m)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;直角三角形的斜边长为<span class="subst">&#123;c&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="09-比较三个数的大小"><a href="#09-比较三个数的大小" class="headerlink" title="09 比较三个数的大小"></a>09 比较三个数的大小</h4><p>编写程序,输入三个数,从小到大输出三个数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入第一个数：&#x27;</span>))</span><br><span class="line">b = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入第二个数：&#x27;</span>))</span><br><span class="line">c = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入第三个数：&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">list</span> = [a,b,c]</span><br><span class="line">list1 = <span class="built_in">sorted</span>(<span class="built_in">list</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;三个数字从小到大的顺序是:<span class="subst">&#123;list1[<span class="number">0</span>]&#125;</span>,<span class="subst">&#123;list1[<span class="number">1</span>]&#125;</span>,<span class="subst">&#123;list1[<span class="number">2</span>]&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><p><code>sorted</code> 函数用于对 <code>list</code> 中的元素进行排序，并将排序后的结果存储在 <code>list1</code> 中。</p><h4 id="10-找出区间内的素数"><a href="#10-找出区间内的素数" class="headerlink" title="10 找出区间内的素数"></a>10 找出区间内的素数</h4><p>编写程序,输入整数a、b表示一个闭区间,找出该区间内的所有素数并打印。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">prime</span>(<span class="params">n</span>):</span><br><span class="line">    flag = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,n):</span><br><span class="line">        <span class="keyword">if</span> n % i == <span class="number">0</span>:</span><br><span class="line">            flag = <span class="literal">False</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> flag</span><br><span class="line"></span><br><span class="line">a = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入左端点：&#x27;</span>))</span><br><span class="line">b = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入右端点：&#x27;</span>))</span><br><span class="line"><span class="built_in">list</span> = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(a,b+<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">if</span> prime(i):</span><br><span class="line">        <span class="built_in">list</span>.append(i)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>)</span><br></pre></td></tr></table></figure><p><code>prime</code>函数判断是否为素数，如果是，则将其添加到列表 <code>list</code> 中。</p><h4 id="11-组合数字"><a href="#11-组合数字" class="headerlink" title="11 组合数字"></a>11 组合数字</h4><p>有四个数字:1、2、3、4,能组成多少个互不相同且无重复数字的三位数?各是多少?</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">5</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">5</span>):</span><br><span class="line">        <span class="keyword">for</span> m <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">5</span>):</span><br><span class="line">            <span class="keyword">if</span> (i !=j)<span class="keyword">and</span> (i !=m) <span class="keyword">and</span> (j != m):</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;i&#125;</span><span class="subst">&#123;j&#125;</span><span class="subst">&#123;m&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="12-打印乘法口诀表"><a href="#12-打印乘法口诀表" class="headerlink" title="12 打印乘法口诀表"></a>12 打印乘法口诀表</h4><p>编写程序,打印乘法口诀表。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,i+<span class="number">1</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;i&#125;</span>*<span class="subst">&#123;j&#125;</span>=<span class="subst">&#123;i*j&#125;</span>&#x27;</span>,end=<span class="string">&#x27; &#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="13-水仙花数"><a href="#13-水仙花数" class="headerlink" title="13 水仙花数"></a>13 水仙花数</h4><p>编写程序,找出所有的水仙花数。<br>水仙花数:是一个三位数,各位数字立方和等于该数字本身。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>,<span class="number">1000</span>):</span><br><span class="line">    a = i % <span class="number">10</span></span><br><span class="line">    b = (i % <span class="number">100</span>) //<span class="number">10</span></span><br><span class="line">    c = i // <span class="number">100</span></span><br><span class="line">    <span class="keyword">if</span> a*a*a +b*b*b +c*c*c == i:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;i&#125;</span>是水仙花数&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="14-反向输出四位数"><a href="#14-反向输出四位数" class="headerlink" title="14 反向输出四位数"></a>14 反向输出四位数</h4><p>编写程序,输入一个四位整数,反向输出对应四位数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入这个数字：&#x27;</span>))</span><br><span class="line"></span><br><span class="line">a = <span class="built_in">str</span>(a)</span><br><span class="line">a = a[::-<span class="number">1</span>]</span><br><span class="line">a = <span class="built_in">int</span>(a)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><p>当你执行 <code>a = a[::-1]</code> 这个表达式时，它会将变量 <code>a</code> 所引用的可迭代对象（比如列表或字符串）的元素逆序排列。</p><h4 id="15-判断字母"><a href="#15-判断字母" class="headerlink" title="15 判断字母"></a>15 判断字母</h4><p>编写程序,输入字符,判断是否为字母。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">input</span>(<span class="string">&#x27;请输入：&#x27;</span>)</span><br><span class="line">result =  a.isalpha()</span><br><span class="line"><span class="keyword">if</span> result:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;a&#125;</span>是字母&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;a&#125;</span>不是字母&#x27;</span>)</span><br></pre></td></tr></table></figure><p>这行代码 <code>result = a.isalpha()</code> 用于检查变量 <code>a</code> 所引用的字符串是否只包含字母字符，并将结果存储在变量 <code>result</code> 中。</p><h4 id="16-判断三角形"><a href="#16-判断三角形" class="headerlink" title="16 判断三角形"></a>16 判断三角形</h4><p>编写程序,输入三组数据,判断能否构成三角形的三条边。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入第一条边：&#x27;</span>))</span><br><span class="line">b = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入第二条边：&#x27;</span>))</span><br><span class="line">c = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入第三条边：&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> a&lt;=<span class="number">0</span> <span class="keyword">or</span> b&lt;=<span class="number">0</span> <span class="keyword">or</span> c&lt;=<span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;输入数据不合法&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> a+b&gt;c <span class="keyword">and</span> a+c &gt;b <span class="keyword">and</span> b+c&gt;a:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;这三条边可以是三角形的边长&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;这三条边不可以是三角形的边长&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="17-完数"><a href="#17-完数" class="headerlink" title="17 完数"></a>17 完数</h4><p>一个数如恰好等于除了它以外的因子之和,这个数就称为“完数”。编程序找出1000以内的所有完数,(6是一个”完数”,它的因子是1,2.3)。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">1000</span>):</span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,i):</span><br><span class="line">        <span class="keyword">if</span> i % j == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">sum</span> += j</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">sum</span> == i:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;i&#125;</span>是完数&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="18-找质数因子"><a href="#18-找质数因子" class="headerlink" title="18 找质数因子"></a>18 找质数因子</h4><p>输入一个正整数,输出它的所有质数因子(如180的质数因子为2、2、3、3、 5)。表示为素数乘积。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入一个自然数：&#x27;</span>))</span><br><span class="line">y = <span class="number">2</span></span><br><span class="line"><span class="built_in">list</span> = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> a != y:</span><br><span class="line">    <span class="keyword">if</span> a % y ==<span class="number">0</span>:</span><br><span class="line">        <span class="built_in">list</span>.append(y)</span><br><span class="line">        a/=y</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        y += <span class="number">1</span></span><br><span class="line"><span class="built_in">list</span>.append(<span class="built_in">int</span>(a))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>)</span><br></pre></td></tr></table></figure><p>从第一个素数2开始整除，如果不能整除就加一，循环直到可以整除，可以整除的加入列表，并执行除法直到最后一个素数。</p><h4 id="19-海伦公式求三角形面积"><a href="#19-海伦公式求三角形面积" class="headerlink" title="19 海伦公式求三角形面积"></a>19 海伦公式求三角形面积</h4><p>海伦公式是利用三角形的三条边的边长直接求三角形面积的公式。</p><p>p &#x3D; (a+b+c)&#x2F;2</p><p>S &#x3D; [p(p-a)(p-b)(p-c)]^-1</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line">a = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入第一条边:&#x27;</span>))</span><br><span class="line">b = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入第二条边:&#x27;</span>))</span><br><span class="line">c = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入第三条边:&#x27;</span>))</span><br><span class="line">p = (a+b+c)/<span class="number">2</span></span><br><span class="line">s = math.sqrt(p*(p-a)*(p-b)*(p-c))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;三角形的面积是<span class="subst">&#123;s&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;面积只保留两位小数是%.2f&#x27;</span> %s)</span><br></pre></td></tr></table></figure><h4 id="20-判断某年某天"><a href="#20-判断某年某天" class="headerlink" title="20 判断某年某天"></a>20 判断某年某天</h4><p>输入某年某月某日,判断这一天是这一年的第几天。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line">year,month,day = <span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split(<span class="string">&quot;/&quot;</span>))</span><br><span class="line">yuandan = datetime.datetime(year,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">now =  datetime.datetime(year, month, day)</span><br><span class="line"><span class="built_in">print</span>((now - yuandan).days+<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p><code>.split</code>用&#x2F;来分割年月日。使用输入的日期减去元旦的日期再加上少算的一天可以得出是第几天。</p><h4 id="21-斐波那切数列"><a href="#21-斐波那切数列" class="headerlink" title="21 斐波那切数列"></a>21 斐波那切数列</h4><p>又称兔子数列,指的是这样一个数列:1、1、2、3、5、8、13、21、34、…（每个数都是前两个数之和）编写程序找出第n个项。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#递归</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fib</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span> <span class="keyword">or</span> n == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> fib(n-<span class="number">1</span>)+fib(n-<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(fib(<span class="number">6</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#非递归</span></span><br><span class="line">n = <span class="number">6</span></span><br><span class="line">fibs = [<span class="number">1</span>,<span class="number">1</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,n+<span class="number">1</span>):</span><br><span class="line">    fibs.append(fibs[i-<span class="number">1</span>]+fibs[i-<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(fibs[n-<span class="number">1</span>])</span><br></pre></td></tr></table></figure><p>这个递归函数 <code>fib</code> 用于计算斐波那契数列的第 <code>n</code> 项。递归终止条件是当 <code>n</code> 等于 1 或 2 时，返回 1；否则，函数返回前两项的和，即 <code>fib(n-1) + fib(n-2)</code>。</p><p>初始化前两项为 <code>[1, 1]</code>使用 <code>for</code> 循环从第三项开始，迭代计算斐波那契数列的每一项。迭代的范围是 <code>range(2, n+1)</code>，确保计算到第 <code>n</code> 项。</p><h4 id="22-复制列表"><a href="#22-复制列表" class="headerlink" title="22 复制列表"></a>22 复制列表</h4><p>将一个列表的数据复制到另一个列表中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"><span class="built_in">list</span> = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">list1 = copy.copy(<span class="built_in">list</span>)</span><br><span class="line"><span class="built_in">list</span>[<span class="number">0</span>] = <span class="number">30</span></span><br><span class="line"><span class="built_in">print</span>(list1)</span><br></pre></td></tr></table></figure><p><code>copy.copy</code>模块进行深拷贝，不会因为修改了原列表导致变动</p><h4 id="23-暂停后输出"><a href="#23-暂停后输出" class="headerlink" title="23 暂停后输出"></a>23 暂停后输出</h4><p>暂停一段时间后输出。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello python!&#x27;</span>)</span><br></pre></td></tr></table></figure><p><code>time.sleep</code>进行暂停</p><h4 id="24-成绩if语句"><a href="#24-成绩if语句" class="headerlink" title="24 成绩if语句"></a>24 成绩if语句</h4><p>利用条件运算符的嵌套来完成此题:学习成绩&gt;&#x3D;90分的同学用A表示,60-89分之间的用B表示，60分以下的用C表示。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">score = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入成绩：&#x27;</span>))</span><br><span class="line"><span class="keyword">if</span> score &gt;= <span class="number">90</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line"><span class="keyword">elif</span> <span class="number">60</span> &lt;= score &lt;<span class="number">90</span> :</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;C&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="25-统计字符"><a href="#25-统计字符" class="headerlink" title="25 统计字符"></a>25 统计字符</h4><p>输入一行字符,分别统计出其中英文字母、空格、数字和其它字符的个数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">string = <span class="built_in">input</span>(<span class="string">&#x27;请输入字符串：&#x27;</span>)</span><br><span class="line"></span><br><span class="line">char = <span class="number">0</span></span><br><span class="line">number = <span class="number">0</span></span><br><span class="line">space = <span class="number">0</span></span><br><span class="line">other = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> string:</span><br><span class="line">    <span class="keyword">if</span> i.isalpha():</span><br><span class="line">        char += <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> i.isdigit():</span><br><span class="line">        number += <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> i.isspace():</span><br><span class="line">        space += <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        other += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;英文字母有<span class="subst">&#123;char&#125;</span>个，数字有<span class="subst">&#123;number&#125;</span>个，空格有<span class="subst">&#123;space&#125;</span>个，其他字符有<span class="subst">&#123;other&#125;</span>个。&#x27;</span>)</span><br></pre></td></tr></table></figure><p><code>isalpha()</code> 判断字母，<code>isdigit()</code>判断数字， <code>isspace()</code>判断空格。</p><h4 id="26-落体反弹问题"><a href="#26-落体反弹问题" class="headerlink" title="26 落体反弹问题"></a>26 落体反弹问题</h4><p>一球从100米高度自由落下,每次落地后反跳回原高度的一半;再落下,求它在第10次落地时,共经过多少米?第10次反弹多高?</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">100</span></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="built_in">list</span> = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">10</span>:</span><br><span class="line">    <span class="keyword">if</span> count == <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">list</span>.append(n)</span><br><span class="line">        n /= <span class="number">2</span></span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">list</span>.append(<span class="number">2</span>*n)</span><br><span class="line">        n /= <span class="number">2</span></span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(<span class="built_in">list</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>[<span class="number">9</span>]/<span class="number">2</span>)</span><br></pre></td></tr></table></figure><h4 id="27-猴子吃桃问题"><a href="#27-猴子吃桃问题" class="headerlink" title="27 猴子吃桃问题"></a>27 猴子吃桃问题</h4><p>猴子吃桃问题:猴子第一天摘下若干个桃子,当即吃了一半,还不瘾,又多吃了一个第二天早上又将剩下的桃子吃掉一半,又多吃了一个。以后每天早上都吃了前一天剩下的一半零一个。到第10天早上想再吃时,见只剩下一个桃子了。求第一天共摘了多少。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    total = (n + <span class="number">1</span>) * <span class="number">2</span></span><br><span class="line">    n = total</span><br><span class="line"><span class="built_in">print</span>(total)</span><br></pre></td></tr></table></figure><h4 id="28-求指定数列的和"><a href="#28-求指定数列的和" class="headerlink" title="28 求指定数列的和"></a>28 求指定数列的和</h4><p>有一分数序列:2&#x2F;1, 3&#x2F;2,5&#x2F;3,8&#x2F;5,13&#x2F;8,21&#x2F;13.…求出这个数列的前20项之和。分子是上一个数的分子与分母之和，分母就是上一个数的分子。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">up = <span class="number">2</span></span><br><span class="line">down = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>):</span><br><span class="line">    <span class="built_in">sum</span> += up/down</span><br><span class="line">    a = down</span><br><span class="line">    down = up</span><br><span class="line">    up = up + a</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br></pre></td></tr></table></figure><h4 id="29-求各个阶乘的和"><a href="#29-求各个阶乘的和" class="headerlink" title="29 求各个阶乘的和"></a>29 求各个阶乘的和</h4><p>求1+2!+3!+.…+20!的和。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">21</span>):</span><br><span class="line">    <span class="built_in">sum</span> += math.factorial(i)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br></pre></td></tr></table></figure><p><code>math.factorial()</code>返回给的数的阶乘</p><h4 id="30-年龄急转弯"><a href="#30-年龄急转弯" class="headerlink" title="30 年龄急转弯"></a>30 年龄急转弯</h4><p>有5个人坐在一起,问第五个人多少岁?他说比第4个人大2岁。问第4个人岁数,他说比第3个人大2岁。问第三个人,又说比第2人大两岁。问第2个人,说比第一个人大两岁。最后问第一个人,他说是10岁。请问第五个人多大?</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">10</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> func(n-<span class="number">1</span>)+<span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(func(<span class="number">5</span>))</span><br></pre></td></tr></table></figure><h4 id="31-判断回文数"><a href="#31-判断回文数" class="headerlink" title="31 判断回文数"></a>31 判断回文数</h4><p>输入一个数,判断它是不是回文数。12321是回文数,个位与万位相同,十位与干位相同。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入数字：&#x27;</span>))</span><br><span class="line">a = <span class="built_in">str</span>(a)</span><br><span class="line">b = a[::-<span class="number">1</span>]</span><br><span class="line"><span class="keyword">if</span> a == b:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;是回文数&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;不是回文&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="32-判断星期几"><a href="#32-判断星期几" class="headerlink" title="32 判断星期几"></a>32 判断星期几</h4><p>请输入星期几的第一个字母来判断一下是星期几,如果第一个字母一样,则继续判断第二个字母。<br>星期一Monday、星期二 Tuesday、星期三Wednesday、星期四 Thursday、星期五 Friday、星期六 Saturday、星期日Sunday。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##星期一Monday、星期二 Tuesday、星期三Wednesday、星期四 Thursday、星期五 Friday、星期六 Saturday、星期日Sunday。</span></span><br><span class="line">a = <span class="built_in">input</span>(<span class="string">&#x27;请输入第一个字母：&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> a == <span class="string">&#x27;M&#x27;</span>:</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&#x27;是周一&#x27;</span>)</span><br><span class="line"><span class="keyword">elif</span> a == <span class="string">&#x27;T&#x27;</span>:</span><br><span class="line">    b =<span class="built_in">input</span>(<span class="string">&#x27;请输入第二个字母：&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> b == <span class="string">&#x27;u&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;是周二&#x27;</span>)</span><br><span class="line">    <span class="keyword">elif</span> b == <span class="string">&#x27;h&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;是周四&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;输入错误&#x27;</span>)</span><br><span class="line"><span class="keyword">elif</span> a == <span class="string">&#x27;W&#x27;</span> :</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;是周三&#x27;</span>)</span><br><span class="line"><span class="keyword">elif</span> a == <span class="string">&#x27;F&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;是周五&#x27;</span>)</span><br><span class="line"><span class="keyword">elif</span> a == <span class="string">&#x27;S&#x27;</span>:</span><br><span class="line">    b = <span class="built_in">input</span>(<span class="string">&#x27;请输入第二个字母：&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> b == <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;是周六&#x27;</span>)</span><br><span class="line">    <span class="keyword">elif</span> b == <span class="string">&#x27;u&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;是周日&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;输入有误&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;输入错误&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="33-相反顺序输出列表"><a href="#33-相反顺序输出列表" class="headerlink" title="33 相反顺序输出列表"></a>33 相反顺序输出列表</h4><p>按相反的顺序输出列表的值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法一：</span></span><br><span class="line"><span class="built_in">list</span>.reverse()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>)</span><br><span class="line"><span class="comment">#方法二：</span></span><br><span class="line">list1 = <span class="built_in">list</span>[::-<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(list1)</span><br></pre></td></tr></table></figure><h4 id="34-对10个数进行排序"><a href="#34-对10个数进行排序" class="headerlink" title="34 对10个数进行排序"></a>34 对10个数进行排序</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split())</span><br><span class="line">a = <span class="built_in">list</span>(a)</span><br><span class="line">a.sort()</span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><p><code>split()</code>输入进来的数字用空格切割。<code>map(int, ...)</code> 将 <code>int</code> 函数应用到列表中的每个元素，将子字符串转换为整数。<code>list()</code> 函数将从上一行得到的整数可迭代对象转换为列表。使用 <code>sort()</code> 方法对列表中的元素进行升序排序。</p><h4 id="35-求矩阵主对角线元素之和"><a href="#35-求矩阵主对角线元素之和" class="headerlink" title="35 求矩阵主对角线元素之和"></a>35 求矩阵主对角线元素之和</h4><p>求一个3*3矩阵主对角线元素之和</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">a = []</span><br><span class="line"><span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    a.append([])</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        k = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入数据：&#x27;</span>))</span><br><span class="line">        a[i].append(k)</span><br><span class="line">        <span class="keyword">if</span> i == j:</span><br><span class="line">            <span class="built_in">sum</span> += a[i][j]</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br></pre></td></tr></table></figure><h4 id="36-有序列表添加数据"><a href="#36-有序列表添加数据" class="headerlink" title="36 有序列表添加数据"></a>36 有序列表添加数据</h4><p>有一个已经排好序的列表。现输入一个数,要求按原来的规律将它插入数组中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">20</span>,<span class="number">40</span>]</span><br><span class="line"></span><br><span class="line">n = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入数据：&#x27;</span>))</span><br><span class="line"><span class="built_in">list</span>.append(n)</span><br><span class="line"><span class="built_in">list</span>.sort()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>)</span><br></pre></td></tr></table></figure><h4 id="37-变量值互换"><a href="#37-变量值互换" class="headerlink" title="37 变量值互换"></a>37 变量值互换</h4><p>给定两个变量,交换它们的值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">5</span></span><br><span class="line">b = <span class="number">10</span></span><br><span class="line"><span class="comment">#方法一：</span></span><br><span class="line">a,b = b,a</span><br><span class="line"><span class="built_in">print</span>(a,b)</span><br><span class="line"><span class="comment">#方法二：</span></span><br><span class="line">temp = a</span><br><span class="line">a = b</span><br><span class="line">b = temp</span><br><span class="line"><span class="built_in">print</span>(a,b)</span><br></pre></td></tr></table></figure><h4 id="38-产生随机数"><a href="#38-产生随机数" class="headerlink" title="38 产生随机数"></a>38 产生随机数</h4><p>编写程序,生成随机数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">a = random.random()</span><br><span class="line">b = random.randint(<span class="number">1</span>,<span class="number">10</span>)</span><br><span class="line">c = random.randrange(<span class="number">1</span>,<span class="number">10</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a,b,c)</span><br></pre></td></tr></table></figure><p><code>random.random()</code>返回[0,1)的随机浮点数。<code>random.randint(1,10)</code>返回1到10之间的随机数。<code>random.randrange(1,10,3)</code>返回1到10之间随机数，可以指定步数，例如隔三取</p><h4 id="39-lambda表达式"><a href="#39-lambda表达式" class="headerlink" title="39 lambda表达式"></a>39 lambda表达式</h4><p>使用lambda来创建匿名函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="keyword">lambda</span> x,y:x*y</span><br><span class="line"><span class="built_in">print</span>(a(<span class="number">3</span>,<span class="number">4</span>))</span><br></pre></td></tr></table></figure><h4 id="40-温度转换"><a href="#40-温度转换" class="headerlink" title="40 温度转换"></a>40 温度转换</h4><p>输入摄氏度,将其转为华氏度。输入华氏度,将其转为摄氏度。<br>华氏温度与摄氏温度转换公式为:华氏温度&#x3D;摄氏温度×1.8+32。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;摄氏度请按1，华氏度请按2：&#x27;</span>))</span><br><span class="line"><span class="keyword">if</span> a == <span class="number">1</span>:</span><br><span class="line">    b = <span class="built_in">float</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入摄氏度：&#x27;</span>))</span><br><span class="line">    result = b * <span class="number">1.8</span> + <span class="number">32</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;你输入的是摄氏度<span class="subst">&#123;b&#125;</span>,转化为华氏度为<span class="subst">&#123;result&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> a == <span class="number">2</span>:</span><br><span class="line">    b = <span class="built_in">float</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入华氏度：&#x27;</span>))</span><br><span class="line">    result = (b - <span class="number">32</span>) / <span class="number">1.8</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;你输入的是华氏度<span class="subst">&#123;b&#125;</span>,转化为摄氏度为<span class="subst">&#123;result&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="41-按位与"><a href="#41-按位与" class="headerlink" title="41 按位与"></a>41 按位与</h4><p>输入两个数,输出按位与运算的结果。</p><p>运算规则: 0&amp;0&#x3D;0;0&amp;1&#x3D;0;1&amp;0&#x3D;0;1&amp;1&#x3D;1;</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">3</span> &amp; <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">b = <span class="number">4</span> &amp; <span class="number">12</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br></pre></td></tr></table></figure><h4 id="42-按位或"><a href="#42-按位或" class="headerlink" title="42 按位或"></a>42 按位或</h4><p>输入两个数,输出按位或运算的结果。</p><p>0 | 0 &#x3D; 0 , 1 | 0 &#x3D; 1 , 0 | 1 &#x3D; 1 , 1 | 1&#x3D; 1 。</p><p>参加运算的两个数只要两个数中的一个，结果就为1</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">3</span>|<span class="number">7</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><h4 id="43-按位异或"><a href="#43-按位异或" class="headerlink" title="43 按位异或"></a>43 按位异或</h4><p>输入两个数,输出按位异或运算的结果。</p><p>运算规则:参加运算的两个数，如果两个相应位为异（值不同），则该位结果为1，#否则为0。<br>即 0 ^ 0 &#x3D; 0 , 0 ^ 1 &#x3D; 1 ，1 ^ 0 &#x3D; 1 ，1 ^ 1 &#x3D; 0 。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">3</span>^<span class="number">9</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><h4 id="44-按位取反"><a href="#44-按位取反" class="headerlink" title="44 按位取反"></a>44 按位取反</h4><p>输入一个数,输出按位取反运算的结果。</p><p>按位取反运算符:对数据的每个二进制位取反，即把0变成1，把1变成0。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#~x = -(x+1)</span></span><br><span class="line"><span class="built_in">print</span>(~<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(~<span class="number">9</span>)</span><br><span class="line"><span class="built_in">print</span>(~-<span class="number">4</span>)</span><br></pre></td></tr></table></figure><h4 id="45-计算字符串长度"><a href="#45-计算字符串长度" class="headerlink" title="45 计算字符串长度"></a>45 计算字符串长度</h4><p>输入字符串,求其长度。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">input</span>()</span><br><span class="line"><span class="comment">#方法一：</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(a))</span><br><span class="line"><span class="comment">#方法二：</span></span><br><span class="line">length = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line">    length += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(length)</span><br></pre></td></tr></table></figure><h4 id="46-杨辉三角"><a href="#46-杨辉三角" class="headerlink" title="46 杨辉三角"></a>46 杨辉三角</h4><p>打印出杨辉三角。</p><ol><li>每一行的两端元素都是1。</li><li>从第三行开始，每个内部元素都等于它上方两个元素的和。</li><li>三角形中的每个数等于它所在行和列的组合数。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1 </span><br><span class="line">1 1 </span><br><span class="line">1 2 1 </span><br><span class="line">1 3 3 1 </span><br><span class="line">1 4 6 4 1 </span><br><span class="line">1 5 10 10 5 1 </span><br><span class="line">1 6 15 20 15 6 1 </span><br><span class="line">1 7 21 35 35 21 7 1 </span><br><span class="line">1 8 28 56 70 56 28 8 1 </span><br><span class="line">1 9 36 84 126 126 84 36 9 1</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">a = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    a.append([])</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        a[i].append(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    a[i][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    a[i][i] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,i):</span><br><span class="line">        a[i][j] = a[i-<span class="number">1</span>][j]+a[i-<span class="number">1</span>][j-<span class="number">1</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i+<span class="number">1</span>):</span><br><span class="line">        <span class="built_in">print</span>(a[i][j],end = <span class="string">&quot; &quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>()</span><br></pre></td></tr></table></figure><h4 id="47-查找字符串"><a href="#47-查找字符串" class="headerlink" title="47 查找字符串"></a>47 查找字符串</h4><p>从字符串中查找该字符串的位数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&#x27;Hello World!&#x27;</span></span><br><span class="line">b = <span class="string">&#x27;World&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a.find(b))</span><br></pre></td></tr></table></figure><h4 id="48-猜数字游戏"><a href="#48-猜数字游戏" class="headerlink" title="48 猜数字游戏"></a>48 猜数字游戏</h4><p>实现猜数字游戏。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">target = random.randint(<span class="number">1</span>,<span class="number">99</span>)</span><br><span class="line">times = <span class="number">7</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;猜数字游戏开始，请猜100以内的整数&#x27;</span>)</span><br><span class="line"><span class="keyword">while</span> times != <span class="number">0</span>:</span><br><span class="line">    num = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入你要猜的数字：\n&#x27;</span>))</span><br><span class="line">    <span class="keyword">if</span> num &gt; target:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;你输入的数字有点大，请继续猜！\n&#x27;</span>)</span><br><span class="line">        times -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">elif</span> num &lt; target:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;你输入的数字有点小，请继续猜！\n&#x27;</span>)</span><br><span class="line">        times -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;恭喜你！猜对了答案是&#x27;</span>,target)</span><br><span class="line"><span class="keyword">if</span> times == <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;很遗憾，你的次数用完了～&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="49-第一个只出现一次的字符"><a href="#49-第一个只出现一次的字符" class="headerlink" title="49 第一个只出现一次的字符"></a>49 第一个只出现一次的字符</h4><p>在一个字符串中找到第一个只出现一次的字符,并返回它的位置,如果没有则返回-1(需要区分大小写），(从0开始计数)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;dhhdq&#x27;</span></span><br><span class="line">a = -<span class="number">1</span></span><br><span class="line">mp = <span class="built_in">dict</span>()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">if</span> i <span class="keyword">in</span> mp:</span><br><span class="line">        mp[i] += <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        mp[i] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(<span class="built_in">str</span>)):</span><br><span class="line">    <span class="keyword">if</span> mp[<span class="built_in">str</span>[i]] == <span class="number">1</span>:</span><br><span class="line">        a = i</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(a+<span class="number">1</span>)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if mp[str[i]] == 1:</span><br></pre></td></tr></table></figure><ul><li>在循环中，对于每个索引 <code>i</code>，它通过 <code>str[i]</code> 访问字符串 <code>str</code> 中的字符，并在字典 <code>mp</code> 中查找该字符的计数。</li><li>如果该字符的计数为 <code>1</code>，则表示这是字符串中的第一个不重复字符，因此它更新了变量 <code>a</code> 的值为当前索引 <code>i</code>。</li></ul><h4 id="50-最大公因数"><a href="#50-最大公因数" class="headerlink" title="50 最大公因数"></a>50 最大公因数</h4><p>求两个数的最大公因数。(能够同时整除这些整数的最大正整数)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func1</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">if</span> a == b:</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    num = <span class="built_in">min</span>(a,b)</span><br><span class="line">    <span class="keyword">while</span> a % num != <span class="number">0</span> <span class="keyword">or</span> b% num != <span class="number">0</span>:</span><br><span class="line">        num -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> num</span><br><span class="line"><span class="built_in">print</span>(func1(<span class="number">12</span>,<span class="number">18</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func2</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">while</span> b != <span class="number">0</span>:</span><br><span class="line">        a,b = b,a%b</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"><span class="built_in">print</span>(func2(<span class="number">12</span>,<span class="number">18</span>))</span><br></pre></td></tr></table></figure><ul><li><code>func1</code> 使用的是较为简单直接的方法，逐步减小一个从两个整数中较小的数开始的数，直到找到可以同时整除这两个整数的最大整数为止。这个方法称为穷举法。</li><li><code>func2</code> 使用的是更高效的欧几里德算法，也称为辗转相除法。该算法通过连续地将两个整数中较大的数除以较小的数，直到其中一个数变为零，此时另一个数即为最大公因数。</li></ul><h4 id="51-数组里面没有出现过的数字"><a href="#51-数组里面没有出现过的数字" class="headerlink" title="51 数组里面没有出现过的数字"></a>51 数组里面没有出现过的数字</h4><p>给定一个长度为N的正整数数组nums,其中nums[i]的值都在区间[1,n]中,请你找出nums数组在[1,n]范围里面没有出现过的数字,并将它们放在数组里面返回(在数组里面的顺序可以不唯一)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#输入:</span></span><br><span class="line"><span class="comment">#[2,1,4,5,1,2]</span></span><br><span class="line"><span class="comment">#返回值:</span></span><br><span class="line"><span class="comment">#[3,6]</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">nums</span>):</span><br><span class="line">    l = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="built_in">len</span>(nums) + <span class="number">1</span> )]</span><br><span class="line">    l2 = []</span><br><span class="line">    nums = <span class="built_in">set</span>(nums)</span><br><span class="line">    <span class="keyword">for</span> o <span class="keyword">in</span> l:</span><br><span class="line">        <span class="keyword">if</span> o <span class="keyword">in</span> nums:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            l2.append(o)</span><br><span class="line">    <span class="keyword">return</span> l2</span><br><span class="line"><span class="built_in">list</span> = [<span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"><span class="built_in">print</span>(func(<span class="built_in">list</span>))</span><br></pre></td></tr></table></figure><h4 id="52-替换空格"><a href="#52-替换空格" class="headerlink" title="52 替换空格"></a>52 替换空格</h4><p>将字符串中的空格替换为’%’.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#hello world</span></span><br><span class="line"><span class="comment">#hello%world</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">s</span>):</span><br><span class="line">    res = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> s:</span><br><span class="line">        <span class="keyword">if</span> i != <span class="string">&#x27; &#x27;</span>:</span><br><span class="line">            res += i</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            res += <span class="string">&#x27;%&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"><span class="built_in">print</span>(func(<span class="string">&#x27;hello world&#x27;</span>))</span><br></pre></td></tr></table></figure><h4 id="53-快乐数"><a href="#53-快乐数" class="headerlink" title="53 快乐数"></a>53 快乐数</h4><p>给定一个正整数,请你判断这个数是不是快乐数。</p><p>快乐数:对于一个正整数,每次把他替换为他每个位置上的数字的平方和,如果这个数能变为1则是快乐数,如果不可能变成1则不是快乐数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">change</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> x &gt; <span class="number">0</span>:</span><br><span class="line">        j = x % <span class="number">10</span></span><br><span class="line">        <span class="built_in">sum</span> += j*j</span><br><span class="line">        x //= <span class="number">10</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">happynumber</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">while</span> n &gt; <span class="number">9</span>:</span><br><span class="line">        n = change(n)</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"><span class="built_in">print</span>(happynumber(<span class="number">19</span>))</span><br></pre></td></tr></table></figure><h4 id="54-立方根"><a href="#54-立方根" class="headerlink" title="54 立方根"></a>54 立方根</h4><p>给定一个正整数n,请你算出这个数开立方根的结果。<br>结果向下取整。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">n</span>):</span><br><span class="line">    result = math.<span class="built_in">pow</span>(n,<span class="number">1</span>/<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">int</span>(result)</span><br><span class="line"><span class="built_in">print</span>(func(<span class="number">9</span>))</span><br></pre></td></tr></table></figure><h4 id="55-最长公共前缀"><a href="#55-最长公共前缀" class="headerlink" title="55 最长公共前缀"></a>55 最长公共前缀</h4><p>给你一个大小为n的字符串数组 strs ,其中包含n个字符串,编写一个函数来查找字符串数组中的最长公共前缀,返回这个公共前缀。</p><p>输入:[“abca” ,”abc”,”abca”,”abc”,”abcc”]</p><p>输出: “abc”</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python案例 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>superset与metabase调研比较</title>
      <link href="/2024/08/12/superset_pk_metabase/"/>
      <url>/2024/08/12/superset_pk_metabase/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><h3 id="BI工具是什么？"><a href="#BI工具是什么？" class="headerlink" title="BI工具是什么？"></a>BI工具是什么？</h3><p>百度百科是这么解释的：<br>商业智能（Business Intelligence，简称：BI），又称商业智慧或商务智能，指用现代数据仓库技术、线上分析处理技术、数据挖掘和数据展现技术进行数据分析以实现商业价值。<br>通俗的来讲：<br>BI对个人来说就是个数据分析工具，BI就是通过数据分析来帮企业了解企业的情况，辅助企业做好决策，提高数据分析效率。</p><h3 id="superset与metabase区别"><a href="#superset与metabase区别" class="headerlink" title="superset与metabase区别"></a>superset与metabase区别</h3><p>我以以下几点简述metabase和superset的区别：</p><h4 id="用户界面"><a href="#用户界面" class="headerlink" title="用户界面:"></a><strong>用户界面</strong>:</h4><p>metabase的界面更加简洁讨喜一些，使用起来更简单，初学者易上手。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714976102028-9acbd3e8-58cf-460d-934c-90dacfa506dd.png#averageHue=%23a3c580&clientId=ubc88db39-6649-4&from=paste&height=605&id=u95c4b9a0&originHeight=908&originWidth=1801&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=95116&status=done&style=none&taskId=u2177f80b-aab6-4493-b364-029cc30b382&title=&width=1200.6666666666667" alt="image.png"><br>Superset 提供了一个更为复杂和灵活的界面，适合有一定技术背景的用户。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714381425322-bf628cb0-f9d6-4ee6-ae05-41bee226b116.png#averageHue=%23f6f6f6&clientId=uc87aedb7-76b6-4&from=paste&height=606&id=u0bcab15a&originHeight=909&originWidth=1848&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=239960&status=done&style=none&taskId=u447e544c-3e4d-456b-b207-f425d7bf43a&title=&width=1232" alt="image.png"></p><h4 id="数据集功能"><a href="#数据集功能" class="headerlink" title="数据集功能:"></a><strong>数据集功能</strong>:</h4><p>Superset 强调数据集的概念，创建数据集并基于这些数据集创建图表和仪表盘。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714381808161-00ec265a-745b-4ed6-b564-cbe10ae323fb.png#averageHue=%23f8f7f6&clientId=uc87aedb7-76b6-4&from=paste&height=606&id=u2ec0abba&originHeight=909&originWidth=1848&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=175898&status=done&style=none&taskId=u781ba9ce-78b6-47da-b22c-eef7a5f6c24&title=&width=1232" alt="image.png"><br>Metabase 允许直接在仪表盘中创建和修改查询，有两种查询方式简单查询和SQL查询。</p><h4 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理:"></a><strong>权限管理</strong>:</h4><p>Superset 提供了细粒度的权限控制系统，可以精确控制用户对数据和功能的访问。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714977744075-9f956557-53c4-4f78-ae47-08ae0886afae.png#averageHue=%23f8f6f5&clientId=ub51deaa9-2bb1-4&from=paste&height=607&id=ud606f05e&originHeight=911&originWidth=1394&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=146309&status=done&style=none&taskId=u0e9cbb05-dd8b-4beb-8c8d-be528115db3&title=&width=929.3333333333334" alt="image.png"><br>Metabase 的权限管理相对简单，但也足够满足基本的权限控制需求。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714975072413-eccbd7cf-688e-4e17-ba0d-506abe557c18.png#averageHue=%23fefefe&clientId=uc193183d-22c3-4&from=paste&height=462&id=u13364a20&originHeight=693&originWidth=1657&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=123038&status=done&style=none&taskId=u41b99376-5f4b-41ac-a37c-a4928bd9020&title=&width=1104.6666666666667" alt="image.png"></p><h4 id="部署安装："><a href="#部署安装：" class="headerlink" title="部署安装："></a><strong>部署安装：</strong></h4><p>Superset部署相对来说比较复杂，需要用户手动执行多个步骤，包括安装 Python、设置虚拟环境、安装依赖库等。部署步骤查看<a href="https://blog.csdn.net/m0_60125201/article/details/138320841?spm=1001.2014.3001.5501">superset部署与实践</a>。<br>Metabase 提供了更简单的安装过程，通常可以通过运行一个jar包就可完成安装。部署步骤查看<a href="https://blog.csdn.net/m0_60125201/article/details/138492893?spm=1001.2014.3001.5501">metabase部署与实践</a>。</p><h3 id="优劣："><a href="#优劣：" class="headerlink" title="优劣："></a>优劣：</h3><h4 id="Superset"><a href="#Superset" class="headerlink" title="Superset"></a>Superset</h4><p><strong>优势：</strong></p><ol><li><strong>社区支持</strong>：Superset在GitHub上有较高的star数，表明其社区活跃度和受欢迎程度较高。</li><li><strong>数据源支持</strong>：支持的数据库类型较多，具有35种数据库连接选项，这为多种数据源的集成提供了便利。</li><li><strong>技术栈</strong>：主要使用Python后端，对于熟悉Python的开发者来说，可能更容易上手和进行二次开发。</li><li><strong>数据集功能</strong>：Superset的数据集功能允许通过自定义SQL创建数据集，这为业务人员提供了基于虚拟数据集创建报表的可能，增强了数据的可访问性和易用性。</li></ol><p><strong>劣势：</strong></p><ol><li><strong>用户界面</strong>：Superset的界面目前主要是英文的，对于非英语母语者可能不够友好。</li><li><strong>交互设计</strong>：相比于国内软件，Superset的交互设计可能不太符合某些用户的习惯。</li></ol><h4 id="Metabase"><a href="#Metabase" class="headerlink" title="Metabase"></a>Metabase</h4><p><strong>优势：</strong></p><ol><li><strong>易用性</strong>：Metabase被设计为简单易用，适合快速部署和使用，特别强调了让商业智能和分析快速普及到公司每个人。</li><li><strong>数据源支持</strong>：支持多种数据源，包括Postgres、MySQL、Druid等，共支持15种数据库连接选项。</li><li><strong>图表类型丰富</strong>：提供了丰富的图表类型，如曲线图、柱状图、饼图等，以及支持地图和仪表盘等高级可视化。</li><li><strong>自助分析</strong>：支持业务自助分析和数据准备，允许通过拖拉拽的方式进行数据探索，适合非技术用户。</li><li><strong>权限系统</strong>：具有完善的用户和权限系统，可以细致地控制数据访问。</li></ol><p><strong>劣势：</strong></p><ol><li><strong>技术栈</strong>：后端使用Clojure语言，这是一种Lisp方言，可能对于不熟悉该语言的开发者来说，学习和维护成本较高。</li><li><strong>SQL模式</strong>：虽然支持SQL模式，但原生查询的灵活性和易用性可能不如Superset，特别是对于复杂的SQL查询和数据集创建。</li></ol><h4 id="综合比较"><a href="#综合比较" class="headerlink" title="综合比较"></a>综合比较</h4><ul><li><strong>社区活跃度</strong>：Superset似乎拥有更活跃的社区和更多的GitHub星星，这可能意味着更多的资源和社区支持。</li><li><strong>易用性</strong>：Metabase在易用性方面可能更胜一筹，特别是对于非技术用户，它的自助分析和拖拉拽交互可能更加友好。</li><li><strong>技术栈和开发</strong>：如果你的团队熟悉Python，Superset可能更容易上手；而Metabase的Clojure后端可能需要特定的技能集。</li></ul><h3 id="参考文章："><a href="#参考文章：" class="headerlink" title="参考文章："></a><strong>参考文章：</strong></h3><p><a href="https://zhuanlan.zhihu.com/p/436466613">Superset 和 MetaBase 的调研</a><br><a href="https://zhuanlan.zhihu.com/p/151625728">开源 BI，我最终选择了 Metabase</a><br><a href="https://juejin.cn/post/7089235652125917220">开源 BI 工具调研</a></p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
          <category> BI工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> metabase </tag>
            
            <tag> superset </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python实时爬虫：自动抓取并推送学校最新通知</title>
      <link href="/2024/08/12/python_spider_new/"/>
      <url>/2024/08/12/python_spider_new/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><p><strong>1.背景与目标</strong><br>  在出成绩之前，我们需要时刻关注报考学校的最新通知，以免错过重要信息。然而，手动刷新网页的方式既耗时又费力。为此，我们可以利用Python爬虫技术，实现学校最新通知的实时爬取与推送，确保信息获取的及时性与准确性。<br><strong>2.推送方式选择</strong><br>  要实现通知的实时推送，我们需要选择一个合适的推送方式。经过对比，我发现虾推啥（<a href="https://www.xtuis.cn/">https://www.xtuis.cn/</a>）这一公众号推送方式非常适合我们的需求。通过关注公众号并获取个人token，可以轻松实现文字通知的实时推送，确保微信能够及时收到重要信息。<br><strong>3.爬虫执行频率设置</strong><br>  为了避免对目标网站造成过大的访问压力，需要合理设置爬虫的执行频率。考虑到信息的时效性和访问的合理性，我建议将爬取速度设置为每小时一次。这样既能保证及时获取最新通知，又能避免对网站造成过大的负担。<br><strong>4.爬虫部署位置选择</strong><br>  为了实现24小时不间断的自动爬取与推送功能，需要选择一个合适的部署位置。考虑到本地设备的限制和实时推送的需求，我建议将爬虫部署在云服务器上。阿里云服务器是一个不错的选择，经过学生认证和测试，可以免费使用两个月，轻松搭建起自己的爬虫环境。<br><strong>5.实施步骤</strong></p><ol><li><strong>注册并获取虾推啥token</strong>：首先，关注虾推啥公众号并注册账号，获取个人token，以便后续实现推送功能。</li></ol><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711354686835-f806931b-e1bb-42a8-a11b-017918ad779a.png#averageHue=%23f5f5f5&clientId=u79fe1332-9459-4&from=drop&height=228&id=u0e6a2133&originHeight=677&originWidth=959&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=84090&status=done&style=none&taskId=u94bf624c-0813-4bed-b3db-82d7a78509c&title=&width=323.5090026855469" alt="image001.png"></p><ol start="2"><li><strong>编写Python爬虫代码</strong>：使用Python编写爬虫代码，包括请求学校网站、解析网页内容、提取最新通知等步骤。确保爬虫能够准确获取所需信息。</li></ol><p>（1）打开需要解析的网页，找到第一篇文章，右键单击“检查”选项。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711354848535-53a72db6-e993-491e-a2b7-545de42ed132.png#averageHue=%23f7f5f5&clientId=u79fe1332-9459-4&from=paste&height=271&id=uf712f238&originHeight=376&originWidth=737&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=43546&status=done&style=none&taskId=u35b69a6c-4bd3-4859-8458-b751b29e33c&title=&width=531.1711529166023" alt="image.png"><br>（2）开始分析网页内容，可以看到p中有 class&#x3D;”newscontent” ，span中存放的是文章的日期，a中的href存放的是网页链接。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711354905208-052fc036-151c-42ea-9713-a5307364c49f.png#averageHue=%23f7f5f4&clientId=u79fe1332-9459-4&from=drop&id=u926a4e15&originHeight=479&originWidth=1133&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=29076&status=done&style=none&taskId=u96f63981-d6aa-4ea0-aebc-f8c2d96cf94&title=" alt="image003.png"><br>（3）编写爬虫代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义要爬取的网页URL  </span></span><br><span class="line">url = <span class="string">&quot;https://zs.gpnu.edu.cn/bkzn/a2023sefdzsb.htm&quot;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 定义基础URL，用于拼接相对链接以形成完整的URL  </span></span><br><span class="line">bs_url = <span class="string">&quot;https://zs.gpnu.edu.cn/&quot;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 导入requests库，用于发送HTTP请求  </span></span><br><span class="line"><span class="keyword">import</span> requests  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 使用requests库的get方法发送GET请求到指定的URL  </span></span><br><span class="line">r = requests.get(url)  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 设置响应内容的编码为utf-8，确保中文内容能够正确显示  </span></span><br><span class="line">r.encoding = <span class="string">&quot;utf-8&quot;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 检查请求是否成功（HTTP状态码是否为200）  </span></span><br><span class="line"><span class="keyword">if</span> r.status_code != <span class="number">200</span>:  </span><br><span class="line">    <span class="comment"># 如果请求不成功，则抛出一个异常  </span></span><br><span class="line">    <span class="keyword">raise</span> Exception()  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 获取响应的文本内容  </span></span><br><span class="line">html_doc = r.text  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 导入BeautifulSoup库，用于解析HTML文档  </span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 使用BeautifulSoup库解析HTML文档  </span></span><br><span class="line">soup = BeautifulSoup(html_doc, <span class="string">&quot;html.parser&quot;</span>)  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 查找所有class为&quot;newscontent&quot;的&lt;p&gt;标签  </span></span><br><span class="line">dev_nodes = soup.find_all(<span class="string">&quot;p&quot;</span>, class_=<span class="string">&quot;newscontent&quot;</span>)  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 遍历每一个找到的&lt;p&gt;标签  </span></span><br><span class="line"><span class="keyword">for</span> dev_node <span class="keyword">in</span> dev_nodes:  </span><br><span class="line">    <span class="comment"># 在当前&lt;p&gt;标签中查找&lt;a&gt;标签，通常&lt;a&gt;标签包含链接  </span></span><br><span class="line">    link = dev_node.find(<span class="string">&quot;a&quot;</span>)  </span><br><span class="line">      </span><br><span class="line">    <span class="comment"># 在当前&lt;p&gt;标签中查找&lt;span&gt;标签，通常用于存放日期信息  </span></span><br><span class="line">    date = dev_node.find(<span class="string">&quot;span&quot;</span>)  </span><br><span class="line">      </span><br><span class="line">    <span class="comment"># 打印拼接后的完整链接（使用基础URL加上相对链接，并去掉链接开头的三个字符，为了去掉某些特殊字符或路径），链接的文本以及日期信息  </span></span><br><span class="line">    <span class="built_in">print</span>(bs_url + link[<span class="string">&quot;href&quot;</span>][<span class="number">3</span>:], link.get_text(), date.get_text())</span><br></pre></td></tr></table></figure><p>（4）尝试在pycharm中运行代码，输出为以下内容。将网页中所有文章的网址、标题、日期全部输出出来了。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711354915167-7ff8d69c-ef4a-41be-9267-d9d43900497d.png#averageHue=%23f5f3f1&clientId=u79fe1332-9459-4&from=drop&id=u2a938b2c&originHeight=685&originWidth=1586&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=410081&status=done&style=none&taskId=u16c6c4f5-6ba6-4ea6-9d16-91d027d628a&title=" alt="image005.png"></p><ol start="3"><li><strong>实现推送功能</strong>：在爬虫代码中集成推送功能，将获取到的最新通知通过公众号推送给用户。</li></ol><p>（1）使用datetime模块获取当日信息，并将其格式化为带方括号的字符串形式，比较今日日期与网页上的日期是否一致，如果日期匹配则是成绩出了。无论日期是否匹配，代码都会发送一个默认的GET请求到另一个URL，通知用户成绩还未出。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 获取当前系统日期和时间  </span></span><br><span class="line">now = datetime.now()  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 将当前日期格式化为 &quot;yyyy-mm-dd&quot; 的格式，并在前后加上方括号  </span></span><br><span class="line">formatted_date = <span class="string">f&quot;[<span class="subst">&#123;now.strftime(<span class="string">&#x27;%Y-%m-%d&#x27;</span>)&#125;</span>]&quot;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 假设 date.get_text() 是一个函数，它返回一个与 formatted_date 格式相同的日期字符串</span></span><br><span class="line"><span class="comment"># 比较格式化后的当前日期与网页中的日期是否一致  </span></span><br><span class="line"><span class="keyword">if</span> formatted_date == date.get_text():  </span><br><span class="line">    <span class="comment"># 如果日期一致，则打印出链接的完整URL、链接文本和日期信息   </span></span><br><span class="line">    <span class="built_in">print</span>(bs_url + link[<span class="string">&quot;href&quot;</span>][<span class="number">3</span>:], link.get_text(), date.get_text())  </span><br><span class="line">    <span class="comment"># 准备发送 POST 请求的数据，通知有新公告  </span></span><br><span class="line">    mydata = &#123;  </span><br><span class="line">        <span class="string">&#x27;text&#x27;</span>: <span class="string">&#x27;有新公告！有可能是成绩出了&#x27;</span>,  <span class="comment"># 通知的标题  </span></span><br><span class="line">        <span class="string">&#x27;desp&#x27;</span>: <span class="string">&#x27;内容:&#x27;</span> + link.get_text() + <span class="string">&#x27;&lt;br&gt;&#x27;</span> \  <span class="comment"># 通知的描述，包含公告内容  </span></span><br><span class="line">                <span class="string">&#x27;网址:&#x27;</span> + bs_url + link[<span class="string">&quot;href&quot;</span>][<span class="number">3</span>:] + <span class="string">&#x27;&lt;br&gt;&#x27;</span> \  <span class="comment"># 公告的链接  </span></span><br><span class="line">                <span class="string">&#x27;日期:&#x27;</span> + date.get_text()  <span class="comment"># 公告的日期  </span></span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="comment"># 发送 POST 请求到指定的 URL，通知服务有新公告  </span></span><br><span class="line">    requests.post(<span class="string">&#x27;https://wx.xtuis.cn/你的token.send&#x27;</span>, data=mydata)  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 无论日期是否匹配，都发送一个 GET 请求通知用户成绩还未出（可不写，当成绩出了才发送）</span></span><br><span class="line">requests.get(<span class="string">&#x27;https://wx.xtuis.cn/你的token.send?text=成绩还没出哦，请耐心等待&amp;desp=成绩未出&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="4"><li><strong>部署爬虫到云服务器</strong>：将编写好的爬虫代码部署到阿里云服务器上，确保服务器能够24小时运行。</li></ol><p>（1）打开阿里云服务器（<a href="https://www.aliyun.com/">https://www.aliyun.com/</a>）<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711354942534-f0619e4f-7012-4f62-9fcb-907883a2174e.png#averageHue=%23f0f1f1&clientId=u79fe1332-9459-4&from=drop&id=u2c7f3c8e&originHeight=916&originWidth=1878&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=413848&status=done&style=none&taskId=u1ba64f54-0672-4f1f-93cf-2dc58500b21&title=" alt="image007.png"><br>（2）学生可以领取免费的服务器使用，这里我以轻量服务器为例，查找轻量服务器<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711354946943-667f4c60-d22d-45b7-b16a-07455f242802.png#averageHue=%23d9b17e&clientId=u79fe1332-9459-4&from=drop&id=u5aed92c8&originHeight=728&originWidth=1293&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=58919&status=done&style=none&taskId=u6b5ac569-eba9-4623-a4b4-c03a6ab815d&title=" alt="image009.png"><br>（3）选择轻量服务器<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711354951335-f4f967b1-d9e0-4ee1-b229-0c20b6a2cc79.png#averageHue=%23f9ebe1&clientId=u79fe1332-9459-4&from=drop&id=u3450ee0b&originHeight=700&originWidth=1710&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=122634&status=done&style=none&taskId=u0d521dff-0876-4aa2-834d-c570c350b8d&title=" alt="image011.png"><br>（4）设置服务器配置<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711354954566-7a52672e-c4ad-465f-ba92-1f98e259eb27.png#averageHue=%23fdfcfb&clientId=u79fe1332-9459-4&from=drop&id=udcdc7bcd&originHeight=1908&originWidth=1899&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=255813&status=done&style=none&taskId=uf4a4f59e-852e-46b3-a725-74648611bb0&title=" alt="image013.png"><br>（5）转到服务台查看服务器ip地址。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711354961197-4c168d15-270d-47b7-b87f-f336d948d62a.png#averageHue=%23fcf7f7&clientId=u79fe1332-9459-4&from=drop&height=439&id=ue1483a99&originHeight=849&originWidth=837&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=51031&status=done&style=none&taskId=u925eb95e-c96d-433d-8f34-d839fb0f0e3&title=&width=433.0090026855469" alt="image015.png"><br>（6）使用远程连接工具连接<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711354964784-8fbeb15f-d653-4614-becf-dd928622d0f1.png#averageHue=%23f9f8f8&clientId=u79fe1332-9459-4&from=drop&height=506&id=u7e8a38fd&originHeight=845&originWidth=883&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=61319&status=done&style=none&taskId=u2321e562-7e3f-4ef7-b230-dec498c72e3&title=&width=529.0134887695312" alt="image017.png"><br>（7）登录到你的云服务器后，执行宝塔面板安装命令，阿里云服务器网使用的CentOS操作系统，命令如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su</span><br><span class="line">yum install -y wget &amp;&amp; wget -O install.sh https://download.bt.cn/install/install_6<span class="number">.0</span>.sh &amp;&amp; sh install.sh ed8484bec</span><br></pre></td></tr></table></figure><p>执行宝塔Linux面板安装命令后，会提示如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Do you want to install Bt-Panel to the /www directory now?(y/n): y</span><br></pre></td></tr></table></figure><p>保持默认，回复个字母“y”，如下图：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711354970865-c63a371c-7f04-490b-8086-7bdeee970e92.png#averageHue=%23232221&clientId=u79fe1332-9459-4&from=drop&id=uea0a1bd9&originHeight=292&originWidth=1024&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=36655&status=done&style=none&taskId=ufafe1d51-9c1c-47a6-871f-c0cee96c9b9&title=" alt="image019.png"><br>（8）安装好后会有提示IP地址、用户名、密码和端口号。在阿里云中开放端口号。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711354985903-5ba6d1d2-b525-4152-85fd-d5dc3e18dabb.png#averageHue=%23fcfaf4&clientId=u79fe1332-9459-4&from=drop&id=u2b7313ac&originHeight=823&originWidth=1607&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=88235&status=done&style=none&taskId=ufe114bbd-c4ea-4394-a0e5-a8a3ddd03d0&title=" alt="image023.png"><br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711355000263-66c15604-0de0-4254-b13a-73571a523352.png#averageHue=%23f8f7f7&clientId=u79fe1332-9459-4&from=drop&id=u63760765&originHeight=355&originWidth=1332&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=20542&status=done&style=none&taskId=u0fc1d00c-1282-46b4-a683-a7ffee1afdb&title=" alt="image025.png"><br>（9）输入外网面板地址，使用账号密码登录。网页提示安装LNMP，确认并安装好LNMP组件。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711355004670-63d5a6df-73f2-4ec0-83c0-0deb42c73d3a.png#averageHue=%23fdfcfc&clientId=u79fe1332-9459-4&from=drop&id=u1452e5ba&originHeight=580&originWidth=1268&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=88606&status=done&style=none&taskId=u304e1fda-926d-403b-abe7-fce15a0ce3c&title=" alt="image027.png"><br>（10）安装所需要的BeautifulSoup库，并在命令行中编辑好Python代码。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install beautifulsoup4</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">vim /root/main.py</span><br><span class="line">url = <span class="string">&quot;https://zs.gpnu.edu.cn/bkzn/a2023sefdzsb.htm&quot;</span></span><br><span class="line">bs_url= <span class="string">&quot;https://zs.gpnu.edu.cn/&quot;</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">r = requests.get(url)</span><br><span class="line">r.encoding = <span class="string">&quot;utf-8&quot;</span></span><br><span class="line"><span class="keyword">if</span> r.status_code != <span class="number">200</span>:</span><br><span class="line">    <span class="keyword">raise</span> Exception()</span><br><span class="line">html_doc = r.text</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup =BeautifulSoup(html_doc, <span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">dev_nodes= soup.find_all(<span class="string">&quot;p&quot;</span>,class_=<span class="string">&quot;newscontent&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> dev_node <span class="keyword">in</span> dev_nodes:</span><br><span class="line">    link = dev_node.find(<span class="string">&quot;a&quot;</span>)</span><br><span class="line">    date=dev_node.find(<span class="string">&quot;span&quot;</span>)</span><br><span class="line">    <span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line">    now = datetime.now()</span><br><span class="line">    formatted_date = <span class="string">f&quot;[<span class="subst">&#123;now.strftime(<span class="string">&#x27;%Y-%m-%d&#x27;</span>)&#125;</span>]&quot;</span></span><br><span class="line">    <span class="keyword">if</span> formatted_date == date.get_text():</span><br><span class="line">        <span class="built_in">print</span>(bs_url + link[<span class="string">&quot;href&quot;</span>][<span class="number">3</span>:], link.get_text(), date.get_text())</span><br><span class="line">        mydata = &#123;</span><br><span class="line">            <span class="string">&#x27;text&#x27;</span>: <span class="string">&#x27;有新公告！有可能是成绩出了&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;desp&#x27;</span>: <span class="string">&#x27;内容:&#x27;</span> + link.get_text() + <span class="string">&#x27;&lt;br&gt;&#x27;</span> \</span><br><span class="line">            <span class="string">&#x27;网址:&#x27;</span> + bs_url + link[<span class="string">&quot;href&quot;</span>][<span class="number">3</span>:] + <span class="string">&#x27;&lt;br&gt;&#x27;</span> \</span><br><span class="line">            <span class="string">&#x27;日期:&#x27;</span> +  date.get_text()</span><br><span class="line">        &#125;</span><br><span class="line">        requests.post(<span class="string">&#x27;https://wx.xtuis.cn/你的token.send&#x27;</span>, data=mydata)</span><br><span class="line">requests.get(<span class="string">&#x27;https://wx.xtuis.cn/你的token.send?text=成绩还没出哦，请耐心等待&amp;desp=成绩未出&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="5"><li><strong>设置爬虫执行频率</strong>：在Linux中设置合理的执行频率，如每小时执行一次。<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line"><span class="number">0</span> * * * *  python3 /root/main.py</span><br></pre></td></tr></table></figure>这样便完成了一个完整的自动抓取并推送学校最新通知的实践流程。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1711356125734-d5b27471-2bdb-4e61-97b3-1f05d1e9a9f4.png#averageHue=%23f6f6f6&clientId=u79fe1332-9459-4&from=paste&height=141&id=ue0e3139e&originHeight=195&originWidth=412&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=7531&status=done&style=none&taskId=uaabc223a-581c-41dd-aa04-9167b1adffc&title=&width=296.9369267322119" alt="image.png"></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python爬虫 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CI/CD:基于kubernetes的Gitlab搭建</title>
      <link href="/2024/08/12/k8s_Gitlab_start/"/>
      <url>/2024/08/12/k8s_Gitlab_start/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><h2 id="项目目标"><a href="#项目目标" class="headerlink" title="项目目标"></a>项目目标</h2><p>（1）熟悉使用k8s环境搭建Gitlab<br>（2）熟练应用Gitlab基本配置</p><h2 id="项目准备"><a href="#项目准备" class="headerlink" title="项目准备"></a>项目准备</h2><h3 id="规划节点"><a href="#规划节点" class="headerlink" title="规划节点"></a>规划节点</h3><table><thead><tr><th>主机名</th><th>主机IP</th><th>节点规划</th></tr></thead><tbody><tr><td>k8s-master</td><td>10.0.1.1</td><td>kube_master</td></tr><tr><td>k8s-node1</td><td>10.0.1.2</td><td>kube_node</td></tr><tr><td>k8s-node2</td><td>10.0.1.3</td><td>kube_node</td></tr></tbody></table><h3 id="基础准备"><a href="#基础准备" class="headerlink" title="基础准备"></a>基础准备</h3><p><strong>系统镜像：CentOS 7.9</strong><br><strong>环境准备：</strong>K8S集群</p><h2 id="项目实施"><a href="#项目实施" class="headerlink" title="项目实施"></a>项目实施</h2><h3 id="部署GitLab"><a href="#部署GitLab" class="headerlink" title="部署GitLab"></a>部署GitLab</h3><h4 id="编写GitLab资源清单文件："><a href="#编写GitLab资源清单文件：" class="headerlink" title="编写GitLab资源清单文件："></a>编写GitLab资源清单文件：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# vi gitlab-deploy.yaml </span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: gitlab</span><br><span class="line">spec:</span><br><span class="line">  type: NodePort</span><br><span class="line">  ports:</span><br><span class="line">  - port: 443</span><br><span class="line">    nodePort: 30443</span><br><span class="line">    targetPort: 443</span><br><span class="line">    name: gitlab-443</span><br><span class="line">  - port: 80</span><br><span class="line">    nodePort: 30888</span><br><span class="line">    targetPort: 80</span><br><span class="line">    name: gitlab-80</span><br><span class="line">  selector:</span><br><span class="line">    app: gitlab</span><br><span class="line">---</span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: gitlab</span><br><span class="line">spec:</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: gitlab</span><br><span class="line">  revisionHistoryLimit: 2</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: gitlab</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - image: gitlab/gitlab-ce:latest</span><br><span class="line">        name: gitlab</span><br><span class="line">        imagePullPolicy: IfNotPresent</span><br><span class="line">        env:</span><br><span class="line">        - name: GITLAB_ROOT_PASSWORD  # 设置root用户密码</span><br><span class="line">          value: admin@123</span><br><span class="line">        - name: GITLAB_PORT</span><br><span class="line">          value: &quot;80&quot;</span><br><span class="line">        ports:</span><br><span class="line">        - containerPort: 443</span><br><span class="line">          name: gitlab-443</span><br><span class="line">        - containerPort: 80</span><br><span class="line">          name: gitlab-80</span><br></pre></td></tr></table></figure><h4 id="部署GitLab："><a href="#部署GitLab：" class="headerlink" title="部署GitLab："></a>部署GitLab：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl -n devops apply -f gitlab-deploy.yaml</span><br><span class="line">service/gitlab created</span><br><span class="line">deployment.apps/gitlab created</span><br></pre></td></tr></table></figure><h4 id="查看Pod："><a href="#查看Pod：" class="headerlink" title="查看Pod："></a>查看Pod：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl -n devops get pods -o wide</span><br><span class="line">NAME                      READY   STATUS    RESTARTS      AGE     IP               NODE         NOMINATED NODE   READINESS GATES</span><br><span class="line">gitlab-5fcc866774-779wv   1/1     Running   0             9m28s   172.20.102.145   10.0.1.150   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">jenkins-75b6c4878-flrbm   1/1     Running   2 (16m ago)   13d     172.20.102.144   10.0.1.150   &lt;none&gt;           &lt;none&gt;</span><br></pre></td></tr></table></figure><h4 id="查看GitLab-Service："><a href="#查看GitLab-Service：" class="headerlink" title="查看GitLab Service："></a>查看GitLab Service：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get svc -n devops</span><br><span class="line">NAME      TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)                          AGE</span><br><span class="line">gitlab    NodePort   10.68.140.186   &lt;none&gt;        443:30443/TCP,80:30888/TCP       11m</span><br><span class="line">jenkins   NodePort   10.68.241.36    &lt;none&gt;        8080:30880/TCP,50000:30850/TCP   13d</span><br></pre></td></tr></table></figure><p>GitLab启动较慢，可以通过“kubectl logs”查看其启动状态。启动完成后，在Web端访问GitLab（<a href="http://master:30888%EF%BC%89%EF%BC%8C%E8%BE%93%E5%85%A5%E8%B4%A6%E5%8F%B7root%EF%BC%8C%E5%AF%86%E7%A0%81admin@0.0.0.123/">http://master:30888），输入账号root，密码admin@123</a><br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714036809039-216d0882-93a8-404a-a215-804972259449.png#averageHue=%23fdfcfc&clientId=u3f53e471-f471-4&from=paste&height=633&id=u963bce51&originHeight=949&originWidth=1831&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=94043&status=done&style=none&taskId=uf14b73b9-9114-4bff-9084-66b83741303&title=&width=1220.6666666666667" alt="image.png"></p><h3 id="Gitlab基本配置"><a href="#Gitlab基本配置" class="headerlink" title="Gitlab基本配置"></a>Gitlab基本配置</h3><h4 id="projects界面"><a href="#projects界面" class="headerlink" title="projects界面"></a>projects界面</h4><p>登录之后直接进入到gitlab的project界面。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714037019114-3fa9fbb9-3c16-4e68-a81b-71ccf434cafe.png#averageHue=%23fefdfd&clientId=u331f15d4-2770-4&from=paste&height=606&id=u5061db4a&originHeight=909&originWidth=1848&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=74568&status=done&style=none&taskId=ub1579ba3-752b-4715-bfe2-96be01aa630&title=&width=1232" alt="image.png"></p><h4 id="汉化gitlab"><a href="#汉化gitlab" class="headerlink" title="汉化gitlab"></a>汉化gitlab</h4><p>单击右上角头像-&gt;“preferences”-&gt;下拉找到“language”-&gt;修改为“中文”-&gt;“save changes”。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714037174182-395a9f7e-4349-4b9e-a8ad-0ac28a69af72.png#averageHue=%23f9f8f8&clientId=u331f15d4-2770-4&from=paste&height=606&id=u99103fd8&originHeight=909&originWidth=1848&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=144338&status=done&style=none&taskId=u5b256a8b-dfa4-4085-ada8-b775f1badf2&title=&width=1232" alt="image.png"></p><h4 id="关闭注册"><a href="#关闭注册" class="headerlink" title="关闭注册"></a>关闭注册</h4><p>  根据实际情况开启关闭注册，在公网上没关的话，任何人都可以注册，被恶意攻击就麻烦了。<br>展开“菜单”-&gt; “管理员”-&gt;“通用”-&gt;取消“启用注册功能”<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714037967344-974602b0-7897-400c-8660-fb02fd9472d7.png#averageHue=%23f7f6f6&clientId=u331f15d4-2770-4&from=paste&height=606&id=ub38e2898&originHeight=909&originWidth=1848&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=154963&status=done&style=none&taskId=u34324d7a-869b-4fe8-a09b-9b94a042b2c&title=&width=1232" alt="image.png"></p><h2 id="项目总结"><a href="#项目总结" class="headerlink" title="项目总结"></a>项目总结</h2><p>本博客使用kubernetes环境搭建了Gitlab，并进行基本的配置。</p>]]></content>
      
      
      <categories>
          
          <category> kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kubernetes CI/CD </tag>
            
            <tag> gitlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CI/CD:基于kubernetes的Jenkins搭建</title>
      <link href="/2024/08/12/k8s_Jenkins_start/"/>
      <url>/2024/08/12/k8s_Jenkins_start/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><h2 id="项目目标"><a href="#项目目标" class="headerlink" title="项目目标"></a>项目目标</h2><p>（1）熟悉使用k8s环境搭建Jenkins<br>（2）熟练应用Jenkins基本配置</p><h2 id="项目准备"><a href="#项目准备" class="headerlink" title="项目准备"></a>项目准备</h2><h3 id="规划节点"><a href="#规划节点" class="headerlink" title="规划节点"></a>规划节点</h3><table><thead><tr><th>主机名</th><th>主机IP</th><th>节点规划</th></tr></thead><tbody><tr><td>k8s-master</td><td>10.0.1.1</td><td>kube_master</td></tr><tr><td>k8s-node1</td><td>10.0.1.2</td><td>kube_node</td></tr><tr><td>k8s-node2</td><td>10.0.1.3</td><td>kube_node</td></tr></tbody></table><h3 id="基础准备"><a href="#基础准备" class="headerlink" title="基础准备"></a>基础准备</h3><p><strong>系统镜像：</strong>CentOS 7.9<br><strong>Jenkins镜像：</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull jenkins/jenkins</span><br></pre></td></tr></table></figure><p><strong>环境准备：</strong>kubernetes环境准备，可以参考以下内容</p><ul><li><a href="https://github.com/easzlab/kubeasz/blob/master/docs/setup/quickStart.md">k8s-all-in-one</a>安装</li><li><a href="https://blog.csdn.net/m0_60125201/article/details/137642194?spm=1001.2014.3001.5501">快速上手：kubernetes快速搭建-CSDN博客</a></li></ul><h2 id="项目实施"><a href="#项目实施" class="headerlink" title="项目实施"></a>项目实施</h2><h3 id="Jenkins在k8s上部署"><a href="#Jenkins在k8s上部署" class="headerlink" title="Jenkins在k8s上部署"></a>Jenkins在k8s上部署</h3><p><strong>（1）安装Jenkins</strong></p><ul><li><p>新建命名空间：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create ns devops</span><br></pre></td></tr></table></figure></li><li><p>编写Jenkins资源清单文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">vim jenkins-deploy.yaml</span><br><span class="line"></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: jenkins</span><br><span class="line">  labels:</span><br><span class="line">    app: jenkins</span><br><span class="line">spec:</span><br><span class="line">  type: NodePort</span><br><span class="line">  ports:</span><br><span class="line">  - name: http</span><br><span class="line">    port: 8080</span><br><span class="line">    targetPort: 8080</span><br><span class="line">    nodePort: 30880</span><br><span class="line">  - name: agent</span><br><span class="line">    port: 50000</span><br><span class="line">    targetPort: agent</span><br><span class="line">    nodePort: 30850</span><br><span class="line">  selector:</span><br><span class="line">    app: jenkins</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: jenkins</span><br><span class="line">  labels:</span><br><span class="line">    app: jenkins</span><br><span class="line">spec:</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: jenkins</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: jenkins</span><br><span class="line">    spec:</span><br><span class="line">      serviceAccountName: jenkins-admin</span><br><span class="line">      containers:</span><br><span class="line">      - name: jenkins</span><br><span class="line">        image: jenkins/jenkins:latest</span><br><span class="line">        imagePullPolicy: IfNotPresent</span><br><span class="line">        securityContext:</span><br><span class="line">          runAsUser: 0</span><br><span class="line">          privileged: true</span><br><span class="line">        ports:</span><br><span class="line">        - name: http</span><br><span class="line">          containerPort: 8080</span><br><span class="line">        volumeMounts:</span><br><span class="line">        - mountPath: /var/jenkins_home</span><br><span class="line">          name: jenkinshome</span><br><span class="line">        - mountPath: /usr/bin/docker</span><br><span class="line">          name: docker</span><br><span class="line">        - mountPath: /var/run/docker.sock</span><br><span class="line">          name: dockersock</span><br><span class="line">        - mountPath: /usr/bin/kubectl</span><br><span class="line">          name: kubectl</span><br><span class="line">        - mountPath: /root/.kube</span><br><span class="line">          name: kubeconfig</span><br><span class="line">      volumes:</span><br><span class="line">      - name: jenkinshome</span><br><span class="line">        hostPath:</span><br><span class="line">          path: /home/jenkins_home</span><br><span class="line">      - name: docker</span><br><span class="line">        hostPath:</span><br><span class="line">          path: /usr/bin/docker</span><br><span class="line">      - name: dockersock</span><br><span class="line">        hostPath:</span><br><span class="line">          path: /var/run/docker.sock</span><br><span class="line">      - name: kubectl</span><br><span class="line">        hostPath:</span><br><span class="line">          path: /usr/bin/kubectl</span><br><span class="line">      - name: kubeconfig</span><br><span class="line">        hostPath:</span><br><span class="line">          path: /root/.kube</span><br><span class="line">---</span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">apiVersion: v1</span><br><span class="line">metadata:</span><br><span class="line">  name: jenkinshome</span><br><span class="line">  annotations:</span><br><span class="line">    volume.beta.kubernetes.io/storage-class: local-path</span><br><span class="line">spec:</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteMany</span><br><span class="line">  resources:</span><br><span class="line">    requests:</span><br><span class="line">      storage: 1024Mi</span><br><span class="line">---</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: ServiceAccount</span><br><span class="line">metadata:</span><br><span class="line">  name: jenkins-admin</span><br><span class="line">  labels:</span><br><span class="line">    name: jenkins</span><br><span class="line">---</span><br><span class="line">kind: ClusterRoleBinding</span><br><span class="line">apiVersion: rbac.authorization.k8s.io/v1</span><br><span class="line">metadata:</span><br><span class="line">  name: jenkins-admin</span><br><span class="line">  labels:</span><br><span class="line">    name: jenkins</span><br><span class="line">subjects:</span><br><span class="line">  - kind: ServiceAccount</span><br><span class="line">    name: jenkins-admin</span><br><span class="line">    namespace: default</span><br><span class="line">roleRef:</span><br><span class="line">  kind: ClusterRole</span><br><span class="line">  name: cluster-admin</span><br><span class="line">  apiGroup: rbac.authorization.k8s.io</span><br></pre></td></tr></table></figure></li><li><p>部署Jenkins：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl -n devops apply -f jenkins-deploy.yaml</span><br></pre></td></tr></table></figure></li><li><p>查看Pod：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl -n devops get pods</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1712555808657-e8a2ea01-f4ca-47f4-94bd-f09367a7c4c9.png#averageHue=%232c2a28&clientId=u581e12f0-cea2-4&from=paste&height=51&id=u8b9c4114&originHeight=77&originWidth=754&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=8678&status=done&style=none&taskId=ubd37ec87-aa41-4c8a-8be2-bbee3e145df&title=&width=502.6666666666667" alt="image.png"><br><strong>（2）访问Jenkins</strong></p></li><li><p>查看Jenkins Service端口：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl -n devops get svc</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1712555831302-fadd0b23-cb36-4341-ad0b-4468bc13b756.png#averageHue=%232a2726&clientId=u581e12f0-cea2-4&from=paste&height=50&id=u470dd119&originHeight=75&originWidth=1054&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=11467&status=done&style=none&taskId=u2cf5c68c-f633-4439-bab8-7824834be69&title=&width=702.6666666666666" alt="image.png"><br>在Web端使用浏览器访问Jenkins（<a href="http://ip:30880）">http://ip:30880）</a><br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1712833112027-54223dfd-eb88-4154-bd72-4c7b1ba28439.png#averageHue=%23f9f9f9&clientId=u87f6003e-c966-4&from=paste&height=557&id=ub1e03011&originHeight=836&originWidth=1494&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=140641&status=done&style=none&taskId=u0c50e953-7a7d-4c16-9c61-6df0ba985f2&title=&width=996" alt="image.png"></p></li><li><p>获取Jenkins密码：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl -n devops exec deploy/jenkins -- cat /var/jenkins_home/secrets/initialAdminPassword</span><br><span class="line">ec64ed4c8773455392d392abefef53e1</span><br></pre></td></tr></table></figure><p>输入密码后单击“继续”按钮。</p></li><li><p>安装插件，安装不成功也没关系。</p></li></ul><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1712555998547-a637fcbf-558d-434d-b8fc-c6ad909753f8.png#averageHue=%23f2f2f2&clientId=u581e12f0-cea2-4&from=paste&height=567&id=u62e3dc2e&originHeight=851&originWidth=1494&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=116647&status=done&style=none&taskId=uec906181-7018-4943-adfa-a79a1ad4bae&title=&width=996" alt="image.png"></p><ul><li>创建用户</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1712556107047-175d6a01-cb3b-4600-b152-778ca7c5f099.png#averageHue=%23fbfbfb&clientId=u581e12f0-cea2-4&from=paste&height=547&id=u7022cd08&originHeight=820&originWidth=1478&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=89315&status=done&style=none&taskId=uf2151303-d195-4611-8a43-97044206507&title=&width=985.3333333333334" alt="image.png"></p><h3 id="Jenkins基本使用"><a href="#Jenkins基本使用" class="headerlink" title="Jenkins基本使用"></a>Jenkins基本使用</h3><ul><li>安装成功</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1712556147004-00cb4fd4-a89b-40c1-be52-20c142cebb9b.png#averageHue=%23eeeeed&clientId=u581e12f0-cea2-4&from=paste&height=560&id=u57fbd3e8&originHeight=840&originWidth=1889&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=85990&status=done&style=none&taskId=u640552de-1869-4ce5-90fa-1aa5915de1e&title=&width=1259.3333333333333" alt="image.png"></p><ul><li>更新版本</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713177863628-2e53c47e-cbad-4027-986b-0cf6197faf56.png#averageHue=%23e6dcdb&clientId=u130636ed-f696-4&from=paste&height=571&id=u5dcd1b24&originHeight=857&originWidth=1540&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=139071&status=done&style=none&taskId=ua7a1e32b-e159-4f68-94a6-cd3e9fa11d7&title=&width=1026.6666666666667" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713177898471-a159e6b7-22f0-4304-8c52-81bbd2f56d8b.png#averageHue=%23fbf7e2&clientId=u130636ed-f696-4&from=paste&height=173&id=u10699a42&originHeight=259&originWidth=1339&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=32824&status=done&style=none&taskId=u22f7ec22-9e9e-441b-a83d-fdd7bf231e0&title=&width=892.6666666666666" alt="image.png"><br>更新完成后重启Jenkins。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713178249377-ff3df5d9-0220-4253-aeec-62e009bd0312.png#averageHue=%23eae9e8&clientId=u130636ed-f696-4&from=paste&height=577&id=ud4921614&originHeight=865&originWidth=1877&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=162325&status=done&style=none&taskId=u00d6981c-4578-4836-bcec-87ad1da1609&title=&width=1251.3333333333333" alt="image.png"></p><h2 id="项目总结"><a href="#项目总结" class="headerlink" title="项目总结"></a>项目总结</h2><p>本博客使用kubernetes环境搭建了Jenkins，并进行基本配置。</p>]]></content>
      
      
      <categories>
          
          <category> kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kubernetes CI/CD </tag>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>广西游</title>
      <link href="/2024/08/12/guangxi/"/>
      <url>/2024/08/12/guangxi/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><h2 id="第一天-周六-2-17"><a href="#第一天-周六-2-17" class="headerlink" title="第一天 周六 2-17"></a>第一天 周六 2-17</h2><p>⏰行程安排：<br>早上9:59🚅<strong>广州南—阳朔</strong>（126💰）<br>中午12:14到<strong>阳朔</strong><br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790158183-08e1c2b1-9bbc-4dde-b531-b20ce511a9a4.png#averageHue=%23f8f8f5&clientId=ucbf75d12-f74d-4&from=drop&id=u6a315a01&originHeight=202&originWidth=406&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=49218&status=done&style=none&taskId=udcc0963b-65c6-4f6d-8f06-dd8216741bd&title=" alt="1.png"><br>出站左手边买🚌<strong>高铁站—兴坪古镇</strong>的大巴车（5💰）<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790175489-f882f25d-72ea-4972-b1c0-dc49fe8ae8c4.png#averageHue=%23616258&clientId=ucbf75d12-f74d-4&from=drop&height=366&id=u97ac4d04&originHeight=572&originWidth=424&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=424329&status=done&style=none&taskId=u9ebaeeaf-7d17-4560-bdff-95e5e08092d&title=&width=270.99774169921875" alt="2.png"><br><strong>兴坪古镇</strong>下车后，在客运站找店寄存行李🧳（10💰)<br>徒步走生活街区到<strong>一米香阳光粉店</strong>吃<strong>米粉</strong>🍜（试了感觉比其他吃的粉要少，建议找别的吃的）<br>可以吃饱在客运站租一辆<strong>电动车</strong>🛵(30💰)，或者步行，要<strong>带伞</strong>的不然很晒，可以让租车的阿姨帮你指路，出发前先准备好水。（当时讲价到20）一定要租一辆不然走路很累。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790263632-3286100e-0761-46b6-986e-a3c063f01a2d.png#averageHue=%23395b5e&clientId=ucbf75d12-f74d-4&from=drop&height=210&id=u7ed6ef6c&originHeight=320&originWidth=426&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=162901&status=done&style=none&taskId=ua052ff0e-da3d-46a6-8a5d-9ba01df9497&title=&width=279.9909973144531" alt="3.png"><br>景点基本都在一条路线上，沿着路一直开可以打卡漓江（20元人民币背景）记得带<strong>20元纸币</strong>、朝板山、桂林山水、竹筏。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790277171-31f77e63-8709-41b7-acd2-67eea02b9c16.png#averageHue=%237e9ba7&clientId=ucbf75d12-f74d-4&from=drop&height=316&id=ub7dd9a04&originHeight=567&originWidth=424&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=390925&status=done&style=none&taskId=u128b0da3-d285-4f8b-a9e0-4157e80a812&title=&width=235.99774169921875" alt="4.png"><br>三个半小时可以玩完。不要去坐那个电动的竹筏 没意思<br>回到客运站还车🛵然后坐<strong>兴坪古镇到阳朔西街</strong>的大巴（15💰) 45min<br>先到住的地方放好行李，定位阳朔豪源国际大酒店<br>关注遇龙河公众号，提前一天晚上八点在公众号上买票<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790330369-da20f4fa-70b9-495f-9226-d8601c20cda5.png#averageHue=%23e7e8e2&clientId=ucbf75d12-f74d-4&from=paste&height=360&id=u19c5755b&originHeight=865&originWidth=423&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=291446&status=done&style=none&taskId=u8cac5a7b-0a98-47f2-925a-1a64762645d&title=&width=175.8648681640625" alt="5.png"><br>出发到遇龙河漂流，从水厄底码头到工农桥码头，带拖鞋塑料袋垫pp<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790353269-3d72a39a-1b05-441c-82c3-3e8bf53643c6.png#averageHue=%236d8fa2&clientId=ucbf75d12-f74d-4&from=paste&height=267&id=uf6354b7b&originHeight=477&originWidth=420&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=356718&status=done&style=none&taskId=u31a922f7-217a-477f-b3c0-a09efc1926d&title=&width=234.70269775390625" alt="6.png"><br>漂流完打车去阳朔西街美食街吃饭，当时是在酒店附近找了一家啤酒鱼，没有去阳朔西街吃，西街人很多逛一逛就行。有阳朔大字可以打卡还有星巴克、酒吧等等。<br>晚上打卡<strong>阳朔西街</strong>，5💰一对的耳环&#x2F;项链、复古风Starbucks、各种美食店。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790444329-596f77b2-26df-4316-8dc1-e438820f371a.png#averageHue=%234e3713&clientId=ucbf75d12-f74d-4&from=paste&height=245&id=u10772074&originHeight=488&originWidth=426&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=344279&status=done&style=none&taskId=u825c1d0b-883f-4682-97fc-a80b87d96e5&title=&width=214.02700805664062" alt="7.png"><br>返回酒店。</p><h2 id="第二天-周日-2-18"><a href="#第二天-周日-2-18" class="headerlink" title="第二天 周日 2-18"></a>第二天 周日 2-18</h2><p>⏰行程安排：<br>4:00早上去相公山看日出，天气冷，需要带厚衣服，购买82的团购接送车+门票套餐<br>（没去，要天气好才有日出）<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790471237-5bc7d061-179d-4694-b60c-a6820386f14c.png#averageHue=%23c2955b&clientId=ucbf75d12-f74d-4&from=drop&height=342&id=u6092bb34&originHeight=566&originWidth=425&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=199239&status=done&style=none&taskId=ucbbd2397-4b13-469c-9617-cab1e230f2c&title=&width=257" alt="8.png"><br>8点多返回酒店休息，中午退房休息结束去杨氏巷子米粉吃，隔壁吃糖水。<br>14:00搭车去桂林<br>酒店放东西（推荐这个酒店，好住不贵，住了两天）<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790900259-d658c82c-8740-4bb3-912c-88bd92c570d1.png#averageHue=%23dde0ee&clientId=ucbf75d12-f74d-4&from=paste&height=142&id=u40becc7d&originHeight=197&originWidth=387&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=53047&status=done&style=none&taskId=u6199bd8c-e325-4216-a027-bb1c329933d&title=&width=278.9189093334126" alt="11.png"><br>象鼻山打卡，两江四湖（晚上看灯出片）日月双塔（拍照打卡）<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790520879-6f13a81e-3f21-4dfe-b28a-53f2dc754473.png#averageHue=%23575851&clientId=ucbf75d12-f74d-4&from=paste&height=405&id=u4948ae1a&originHeight=562&originWidth=411&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=418484&status=done&style=none&taskId=u76f901f2-bcc0-4a5a-8e30-13b49ba5755&title=&width=296.2162060362599" alt="12.png"><br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790525516-02ad3aaf-0080-4682-8f10-1043220e19bc.png#averageHue=%23222823&clientId=ucbf75d12-f74d-4&from=paste&height=352&id=ub2bbcaad&originHeight=807&originWidth=629&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=688294&status=done&style=none&taskId=u50024ac0-9cab-4cfc-b954-cd341ce303c&title=&width=274.3243103027344" alt="14.png"></p><p>正阳步行街（吃东西）<br>回酒店汗蒸，游泳。</p><h2 id="第三天-周一-2-19"><a href="#第三天-周一-2-19" class="headerlink" title="第三天 周一 2-19"></a>第三天 周一 2-19</h2><p>⏰行程安排：<br>东西巷（美食：桂林米粉、鲜果酸、桂花糕、萃茶师和阿嫲手作等）<br>早上南溪山公园：（还行比较晒 不知道还有没有花）<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790777709-bf69d27d-0859-460d-b9e8-feb7ac95b765.png#averageHue=%23586669&clientId=ucbf75d12-f74d-4&from=paste&height=318&id=ua31febd5&originHeight=874&originWidth=655&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=1172153&status=done&style=none&taskId=ud9245596-226a-45f4-9cbc-d6e2043d063&title=&width=238.07205200195312" alt="image.png"><br>下午：穿山公园 （很美，建议去，错过后悔）<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790830188-e04d291f-b22a-4aed-b728-7d99452a9fa3.png#averageHue=%23879fb7&clientId=ucbf75d12-f74d-4&from=paste&height=322&id=u1090e637&originHeight=940&originWidth=706&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=868483&status=done&style=none&taskId=ud748e91c-75a8-46cc-8799-0977b3d3b7c&title=&width=241.82882690429688" alt="image.png"><br>回酒店汗蒸，游泳。</p><h2 id="第四天-周二-2-20"><a href="#第四天-周二-2-20" class="headerlink" title="第四天 周二 2-20"></a>第四天 周二 2-20</h2><p>⏰行程安排：<br>中午出发柳州<br>柳州酒店放完行李先嗦一碗螺蛳粉。<br>柳州市区很小，出行打车就可以去到各个景点。<br>下午放完行李后直奔龙潭公园，打卡绿油油的湖和歪脖子树。（普通公园 挺大人多 一般般）<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790948976-a00108a8-0379-49ce-b3f3-937498650ded.png#averageHue=%23877f43&clientId=ucbf75d12-f74d-4&from=paste&height=298&id=udbef215c&originHeight=791&originWidth=569&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=1065328&status=done&style=none&taskId=u662170bd-cdcd-4e78-b455-af9d52a151c&title=&width=214.08782958984375" alt="16.png"><br>晚上窑埠古镇🏯，花50元租一套衣服（包发型、装饰品道具），建议先买好水钻，自己化妆，然后就可以拍美照啦。打卡地：龙城阁、柳江沿边、蟠龙山公园 （当时花了150装造＋服装 运气好碰到好心叔叔帮忙拍照 推荐去）<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790960646-15dba6b9-4e09-4438-8568-93f30fa8ed9c.png#averageHue=%237a4a12&clientId=ucbf75d12-f74d-4&from=paste&height=351&id=u5a048271&originHeight=813&originWidth=602&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=878074&status=done&style=none&taskId=u31a9886e-6efd-4f3b-9259-1fe65d00864&title=&width=259.8738708496094" alt="17.png"></p><h2 id="第五天-周三-2-21"><a href="#第五天-周三-2-21" class="headerlink" title="第五天 周三 2-21"></a>第五天 周三 2-21</h2><p>⏰行程安排：<br>早上去青云菜市场吃个位数老友粉~逛集市，青云市场营业时间6:00-12:00<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790992311-24401d84-6db0-48b2-87c1-e2a789161f77.png#averageHue=%23998b6c&clientId=ucbf75d12-f74d-4&from=paste&height=368&id=udff250c5&originHeight=839&originWidth=599&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=1136903&status=done&style=none&taskId=u031ed299-f711-4e29-95ea-46dbe12ef73&title=&width=262.7117004394531" alt="18.png"><br>下午马鞍山公园打卡<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713790998448-527ab6c9-108e-4ed4-a3d3-0e839b7dda79.png#averageHue=%237f96a9&clientId=ucbf75d12-f74d-4&from=paste&height=338&id=uc9941766&originHeight=783&originWidth=577&originalType=binary&ratio=1.3875000476837158&rotation=0&showTitle=false&size=603050&status=done&style=none&taskId=ufc3938ad-8dba-44bf-b32b-ce836bc7d5e&title=&width=248.8558349609375" alt="19.png"><br>返程</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>metabase部署与实践</title>
      <link href="/2024/08/12/metabase_install/"/>
      <url>/2024/08/12/metabase_install/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><h2 id="项目目标"><a href="#项目目标" class="headerlink" title="项目目标"></a>项目目标</h2><p>（1）了解metabase特点<br>（2）熟练部署metabase工具<br>（3）掌握metabase基本使用</p><h2 id="项目准备"><a href="#项目准备" class="headerlink" title="项目准备"></a>项目准备</h2><h3 id="规划节点"><a href="#规划节点" class="headerlink" title="规划节点"></a>规划节点</h3><table><thead><tr><th>主机名</th><th>主机IP</th><th>节点规划</th></tr></thead><tbody><tr><td>metabase</td><td>10.0.1.141</td><td>metabase</td></tr></tbody></table><h3 id="基础准备"><a href="#基础准备" class="headerlink" title="基础准备"></a>基础准备</h3><p><strong>系统镜像：</strong>CentOS 7.9<br><strong>安装包下载网址：</strong><a href="">http://downloads.metabase.com/v0.42.4/metabase.jar</a><br><strong>环境准备：Jdk8，MySQL环境</strong></p><h2 id="项目实施"><a href="#项目实施" class="headerlink" title="项目实施"></a>项目实施</h2><h3 id="metabase入门"><a href="#metabase入门" class="headerlink" title="metabase入门"></a>metabase入门</h3><h4 id="metabase特点"><a href="#metabase特点" class="headerlink" title="metabase特点"></a>metabase特点</h4><ol><li>支持的数据源：Postgres、MySQL、Druid、SQL Server、Redshift、MongoDB、Google BigQuery、SQLite、H2、Oracle、Vertica、Presto、Snowflake、SparkSQL。</li><li>数据准备方式：支持 SQL 查询、简单查询和自定义查询。</li><li>支持的图表类型：曲线、柱状、条形、饼图、面积图、组合图、地图、漏斗、散点、仪表盘等</li><li>邮件报警：可以使用已有查询配置数据阈值报警，发送邮件。</li><li>仪表板功能：支持参数传递、一键全屏、公开分享、iframe 嵌入、定时刷新</li><li>用户集成：LDAP、OAuth2</li><li>权限：支持按数据源或者报表文件夹分配权限给用户组。</li></ol><h3 id="metabase安装部署"><a href="#metabase安装部署" class="headerlink" title="metabase安装部署"></a>metabase安装部署</h3><p><strong>下载metabase.jar</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir /opt/metabase</span><br><span class="line">cd /opt/metabase</span><br><span class="line">curl -O http://downloads.metabase.com/v0.42.4/metabase.jar</span><br></pre></td></tr></table></figure><p><strong>安装jdk</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y java-1.8.0-openjdk.x86_64</span><br></pre></td></tr></table></figure><p><strong>安装MySQL</strong><br><a href="https://blog.csdn.net/m0_60125201/article/details/137690541?spm=1001.2014.3001.5502">MySQL 8.0的三种安装方式</a><br><strong>安装metabase</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java -jar metabase.jar</span><br><span class="line">或者后台运行</span><br><span class="line">nohup java -jar metabase.jar &gt; /opt/metabase/run.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><p><strong>关闭防火墙</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br></pre></td></tr></table></figure><p><strong>访问metabase：ip:3000</strong><br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714445881740-b99e9593-a3d5-4049-9443-c277144deed8.png#averageHue=%23f2f7fa&clientId=u95ae4a7e-c10e-4&from=paste&height=344&id=u0436c8c2&originHeight=740&originWidth=978&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=57256&status=done&style=none&taskId=u9daf02c2-83c7-4d8a-9ab2-abbec1dc8b5&title=&width=455" alt="image.png"><br><strong>metabase也可以使用docker快速开始：</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 3000:3000 metabase/metabase</span><br></pre></td></tr></table></figure><h3 id="metabase的基础使用"><a href="#metabase的基础使用" class="headerlink" title="metabase的基础使用"></a>metabase的基础使用</h3><h4 id="1）metabase基本配置"><a href="#1）metabase基本配置" class="headerlink" title="1）metabase基本配置"></a>1）metabase基本配置</h4><p>选择使用的语言<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714445898463-85fdbd62-6a9f-492d-931e-09c28e96a832.png#averageHue=%23fffefa&clientId=u95ae4a7e-c10e-4&from=paste&height=359&id=GnYw0&originHeight=903&originWidth=1142&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=51910&status=done&style=none&taskId=uaa7335f5-5744-4e3a-8cba-205815366b8&title=&width=454" alt="image.png"><br>设置管理员用户<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714445991779-08383499-ce1e-4431-90d4-41fc2d36bb00.png#averageHue=%23fefefe&clientId=u95ae4a7e-c10e-4&from=paste&height=395&id=wmzGO&originHeight=885&originWidth=1009&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=44400&status=done&style=none&taskId=u8bb02eca-06d2-465c-9e4b-78ce7cc7dbe&title=&width=450.66668701171875" alt="image.png"><br>选择使用的数据库，这里我选择使用MySQL<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714446029909-6113bb69-f43f-401b-bd38-4c959003f6d5.png#averageHue=%23fefefe&clientId=u95ae4a7e-c10e-4&from=paste&height=359&id=lgtnF&originHeight=876&originWidth=1048&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=61138&status=done&style=none&taskId=ufab6ea78-fbe8-4f9a-aaf7-c89e64e2dbc&title=&width=429.66668701171875" alt="image.png"><br>导入准备好的数据库表：<br><a href="https://www.begtut.com/wp-content/uploads/2019/07/mysqldemo.sql.zip">MySQL示例数据库</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p000000 &lt; mysqldemo.sql</span><br></pre></td></tr></table></figure><p>输入数据库相关信息。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714446258062-d43cd7c7-2794-4255-862d-4884d56dc56d.png#averageHue=%23fefefe&clientId=u2d153fa0-f39e-4&from=paste&height=460&id=MaPtM&originHeight=901&originWidth=838&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=42084&status=done&style=none&taskId=uea1ca524-14a8-4ef1-8f6d-bf3eedfac2e&title=&width=427.66668701171875" alt="image.png"><br>使用MySQL8.0公钥问题，需要添加allowPublicKeyRetrieval&#x3D;true才能连接成功。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714447297030-887d81bf-f46b-4ebe-b80a-7bd63d877e1e.png#averageHue=%23fefdfd&clientId=ue8946bd7-0147-4&from=paste&height=298&id=FbqRk&originHeight=566&originWidth=803&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=52846&status=done&style=none&taskId=u5b22aa92-f02a-42b7-8db5-75ed8d09d51&title=&width=422.3333435058594" alt="image.png"><br>连接时会出现没有权限连接数据库的问题，解决方法。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on *.* to &#x27;root&#x27;@&#x27;%&#x27; with grant option;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>成功部署metabase<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714464208419-53817c67-ce08-44dc-ae61-88395031e653.png#averageHue=%23d5ebd8&clientId=u32c01903-176c-4&from=paste&height=473&id=FYP4W&originHeight=710&originWidth=1827&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=56092&status=done&style=none&taskId=ud998c54a-f3b7-4b21-8302-b11027d307c&title=&width=1218" alt="image.png"></p><h4 id="2）简单查询"><a href="#2）简单查询" class="headerlink" title="2）简单查询"></a>2）简单查询</h4><p>操作界面设计得非常简洁易用，用户只需通过鼠标点击就能轻松获取所需信息，无需掌握复杂的数据库查询语言，非常适合初学者使用。<br>添加新的question（疑问）使用刚刚添加的数据库mysqldemo数据库<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714964387760-26dd748b-d77e-42cc-aa54-4cd3491b5ad8.png#averageHue=%23fefefe&clientId=u664880eb-454c-4&from=paste&height=550&id=uf27c5019&originHeight=825&originWidth=1819&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=52194&status=done&style=none&taskId=uaf42ca28-c742-4df4-bd87-eb725a77619&title=&width=1212.6666666666667" alt="image.png"><br>添加筛选的内容，比如统计平均的信用额度。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714965459417-e3f4d3cb-fd81-4386-8bc4-fbeb1e870a2f.png#averageHue=%23e2eed3&clientId=u664880eb-454c-4&from=paste&height=542&id=ue34c60c9&originHeight=813&originWidth=1556&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=87954&status=done&style=none&taskId=u6a31e108-c5a2-47e1-a24e-081e211fddd&title=&width=1037.3333333333333" alt="image.png"><br>查看信用额度的分配情况<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714965922727-53ebab5c-91e3-4284-bdb3-448af3af5155.png#averageHue=%23dbeac8&clientId=u664880eb-454c-4&from=paste&height=662&id=u0dd22dda&originHeight=993&originWidth=1420&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=63746&status=done&style=none&taskId=u99edc948-810a-4191-8d18-f28674f213d&title=&width=946.6666666666666" alt="image.png"><br>可视化使用柱状图查看。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714965958254-f1417c0f-1706-4836-9812-555b1c3f5e09.png#averageHue=%23e5e7cc&clientId=u664880eb-454c-4&from=paste&height=530&id=ua4fec276&originHeight=795&originWidth=1845&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=90308&status=done&style=none&taskId=udf1b377b-097a-473a-916f-d5ca0af7c04&title=&width=1230" alt="image.png"><br>单击保存，设置这个图表的名字和描述即可保存。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714966148793-c472f051-fa7c-48bf-be13-b27b309a9c3e.png#averageHue=%23fefefe&clientId=u664880eb-454c-4&from=paste&height=344&id=u2004e117&originHeight=732&originWidth=964&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=37213&status=done&style=none&taskId=ube23c6ca-5f6b-443f-84d8-c1df8ea3878&title=&width=452.66668701171875" alt="image.png"></p><h4 id="3）添加新的仪表盘"><a href="#3）添加新的仪表盘" class="headerlink" title="3）添加新的仪表盘"></a>3）添加新的仪表盘</h4><p>单击 新的 -&gt; 仪表盘<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714966364090-f06a8c2e-ae15-4ecd-a8f2-a3f02f2929f8.png#averageHue=%23fffbeb&clientId=u664880eb-454c-4&from=paste&height=299&id=ueb64c660&originHeight=449&originWidth=402&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=20977&status=done&style=none&taskId=u6a5c7492-d533-4862-a2da-81c327777c1&title=&width=268" alt="image.png"><br>设置仪表盘名字，描述，合集后单击创建。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714966409678-041e1d38-2f5f-4e0b-920a-e4bcef5b0833.png#averageHue=%23fefefe&clientId=u664880eb-454c-4&from=paste&height=343&id=u07e66537&originHeight=724&originWidth=955&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=32519&status=done&style=none&taskId=u216d948c-2eda-41ee-8726-c6f9730b16a&title=&width=452.66668701171875" alt="image.png"><br>单击编辑仪表盘，即可添加需要的图表。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714966565467-8c89850f-f8df-4bc6-8517-032d81c4859d.png#averageHue=%23e3faf9&clientId=u664880eb-454c-4&from=paste&height=515&id=ue1976e7f&originHeight=772&originWidth=1795&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=57168&status=done&style=none&taskId=ud32facdd-278e-443a-8c19-a67564fdee7&title=&width=1196.6666666666667" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714966616183-313a8e9b-38e9-40db-bd87-4aef49d1deaf.png#averageHue=%23fdfdf8&clientId=u664880eb-454c-4&from=paste&height=142&id=ueefdccf7&originHeight=213&originWidth=307&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=9769&status=done&style=none&taskId=u5f8afae4-d713-4952-82eb-1a7fbdb6cb4&title=&width=204.66666666666666" alt="image.png"><br>单击需要的图表即可添加到仪表盘。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714966669370-7ab44ff6-9616-48a9-b935-827a450af8e4.png#averageHue=%23fefdfd&clientId=u664880eb-454c-4&from=paste&height=487&id=uf39de83e&originHeight=731&originWidth=1774&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=51569&status=done&style=none&taskId=uac096234-5c4c-4ae6-aba9-217d0d75cfd&title=&width=1182.6666666666667" alt="image.png"></p><h4 id="4）SQL原生查询"><a href="#4）SQL原生查询" class="headerlink" title="4）SQL原生查询"></a>4）SQL原生查询</h4><p>单击 新的 -&gt; SQL查询<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714967250167-17bd0d45-8522-4a27-8256-7d7e22f4cc7b.png#averageHue=%23fffff1&clientId=u9b5db048-cbf8-4&from=paste&height=299&id=u1ca5f8e9&originHeight=448&originWidth=391&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=22184&status=done&style=none&taskId=ub490c33f-3a34-4108-9075-0035a0c2739&title=&width=260.6666666666667" alt="image.png"><br>查询查找职位名称为Sales Rep的员工：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">    lastname,</span><br><span class="line">    firstname,</span><br><span class="line">    jobtitle</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    jobtitle = &#x27;Sales Rep&#x27;;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714967360275-d59fe564-f245-4af2-a1ea-f7d08a4919a9.png#averageHue=%23c5daa8&clientId=u9b5db048-cbf8-4&from=paste&height=543&id=u91080aa7&originHeight=814&originWidth=1833&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=95071&status=done&style=none&taskId=ua7f6c90f-b6c6-4142-b161-b3caf30bd09&title=&width=1222" alt="image.png"><br>可把jobtitle变成变量来编辑，可以添加字段过滤器。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">    lastname,</span><br><span class="line">    firstname,</span><br><span class="line">    jobtitle</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">WHERE</span><br><span class="line">    jobtitle = &#123;&#123;jobtitle&#125;&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714967637234-832f39b6-b181-4192-8139-a3df99d68e37.png#averageHue=%23f8eed7&clientId=u9b5db048-cbf8-4&from=paste&height=540&id=ub6a38fa4&originHeight=810&originWidth=1304&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=90251&status=done&style=none&taskId=u9590564d-2391-48d6-99a7-8518923610b&title=&width=869.3333333333334" alt="image.png"><br>单击保存即可保存图表。</p><h4 id="5）用户权限管理"><a href="#5）用户权限管理" class="headerlink" title="5）用户权限管理"></a>5）用户权限管理</h4><p>单击 设置齿轮图表 -&gt; 管理员设置<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714974295856-dfb9f0f2-c587-4d2c-ac7b-867f4f98d893.png#averageHue=%23fffae8&clientId=uc193183d-22c3-4&from=paste&height=300&id=ubcd1ebe8&originHeight=562&originWidth=409&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=24827&status=done&style=none&taskId=u86eecd8c-791e-4361-af60-c2916dbeabb&title=&width=218.66668701171875" alt="image.png"></p><p>单击 人员 -&gt; 邀请某人，添加人员。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714974520604-f038fe21-f88d-495b-b3c0-bd39011de510.png#averageHue=%23fefefe&clientId=uc193183d-22c3-4&from=paste&height=144&id=u6cbb01f9&originHeight=427&originWidth=1707&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=38352&status=done&style=none&taskId=u2c5fe55c-51f4-44b2-a494-35594712e68&title=&width=577" alt="image.png"><br>填入用户信息后单击 创建。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714974588614-1df00c9f-78a6-4703-80fe-f13bc2c4de7d.png#averageHue=%23fefefe&clientId=uc193183d-22c3-4&from=paste&height=294&id=u138f58c6&originHeight=708&originWidth=937&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=25945&status=done&style=none&taskId=u6fdbcea4-51a5-4ea2-807f-85974fe5986&title=&width=389.66668701171875" alt="image.png"><br>生成了一个临时密码，单击显示可以查看密码，也可以复制。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714974665077-aa8f9e32-f189-486d-87b3-d5a0338ad196.png#averageHue=%23fefefe&clientId=uc193183d-22c3-4&from=paste&height=240&id=u9e0807fc&originHeight=581&originWidth=937&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=43122&status=done&style=none&taskId=u63b967a9-9139-4e25-918c-7e3cd86c22b&title=&width=387.66668701171875" alt="image.png"><br>单击 人员 -&gt; 分组 -&gt;创建分组<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714974421457-4e21b908-d27d-4d01-8d11-ac31a7111d46.png#averageHue=%23efd3b2&clientId=uc193183d-22c3-4&from=paste&height=392&id=duAK8&originHeight=588&originWidth=1809&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=50953&status=done&style=none&taskId=ua5ca8816-85bb-478d-85ed-b947c4653bd&title=&width=1206" alt="image.png"><br>这里添加了一个“运维部”分组<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714974479379-f071d8b2-fca3-49c1-b64d-4cf81371999d.png#averageHue=%23fefdfd&clientId=uc193183d-22c3-4&from=paste&height=273&id=DJeBn&originHeight=587&originWidth=1203&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=36729&status=done&style=none&taskId=u950e37e1-28c9-4cc4-902b-9e469572fef&title=&width=559" alt="image.png"><br>把刚刚创建的人员添加到运维部。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714974806750-c30b72f1-bac8-40b9-b763-cc0cb970a64b.png#averageHue=%23fefefe&clientId=uc193183d-22c3-4&from=paste&height=191&id=u6385ec83&originHeight=530&originWidth=1688&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=38182&status=done&style=none&taskId=u18f3c00a-7cbb-4939-9020-5dab48d207f&title=&width=608" alt="image.png"><br>单击 权限 -&gt; 查看运维部权限<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714974960555-af73b0bf-b743-4d9b-b852-37f3354f00a7.png#averageHue=%23efcdb0&clientId=uc193183d-22c3-4&from=paste&height=254&id=ua8ed548d&originHeight=658&originWidth=1586&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=82426&status=done&style=none&taskId=udca1283b-23d1-4164-a8a5-cf5a0c88765&title=&width=612" alt="image.png"><br>根据需求配置权限<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714975045905-96ad2d0c-5503-4fb8-816c-059a2d03060f.png#averageHue=%23d6d6a9&clientId=uc193183d-22c3-4&from=paste&height=485&id=ua85e545b&originHeight=728&originWidth=1812&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=98595&status=done&style=none&taskId=u9465e1bc-9c67-47c6-97ee-90d47d33832&title=&width=1208" alt="image.png"><br>也可以单独授权某个表的权限。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1714975072413-eccbd7cf-688e-4e17-ba0d-506abe557c18.png#averageHue=%23fefefe&clientId=uc193183d-22c3-4&from=paste&height=462&id=u13364a20&originHeight=693&originWidth=1657&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=123038&status=done&style=none&taskId=u41b99376-5f4b-41ac-a37c-a4928bd9020&title=&width=1104.6666666666667" alt="image.png"></p><h2 id="项目总结"><a href="#项目总结" class="headerlink" title="项目总结"></a>项目总结</h2><p>本博客简要介绍了metabase这个BI工具，使用两种方法来部署metabase，并简单介绍了metabase的使用。</p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
          <category> BI工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> metabase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>快速上手：kubernetes快速搭建</title>
      <link href="/2024/08/12/kubernetesquick/"/>
      <url>/2024/08/12/kubernetesquick/</url>
      
        <content type="html"><![CDATA[<h2 id="项目目标"><a href="#项目目标" class="headerlink" title="项目目标"></a>项目目标</h2><p>（1）了解<a href="https://github.com/easzlab/kubeasz"><strong>kubeasz</strong></a>开源项目；<br>（2）熟练掌握kubernetes的快速搭建</p><h2 id="项目准备"><a href="#项目准备" class="headerlink" title="项目准备"></a>项目准备</h2><h4 id="规划节点"><a href="#规划节点" class="headerlink" title="规划节点"></a>规划节点</h4><table><thead><tr><th>主机名</th><th>主机IP</th><th>节点规划</th></tr></thead><tbody><tr><td>k8s-master</td><td>10.0.1.1</td><td>kube_master</td></tr><tr><td>k8s-node1</td><td>10.0.1.2</td><td>kube_node</td></tr><tr><td>k8s-node2</td><td>10.0.1.3</td><td>kube_node</td></tr></tbody></table><h4 id="基础准备"><a href="#基础准备" class="headerlink" title="基础准备"></a>基础准备</h4><p><strong>系统镜像</strong>：CentOS 7.9<br><strong>安装包下载网址：</strong><a href="https://github.com/easzlab/kubeasz"><strong>https://github.com/easzlab/kubeasz</strong></a><br><strong>环境准备：</strong></p><ul><li><strong>服务器资源：</strong>确保你有至少三台服务器，每台服务器至少具备2核CPU、4GB内存和40GB硬盘。</li><li><strong>网络配置：</strong>配置服务器的内网IP地址，确保它们在同一子网内，并且能够互相通信。</li><li><strong>SSH免密登录：</strong>配置从部署节点能够SSH免密登录到所有节点。</li></ul><h2 id="项目实施"><a href="#项目实施" class="headerlink" title="项目实施"></a>项目实施</h2><h4 id="安装前的准备工作"><a href="#安装前的准备工作" class="headerlink" title="安装前的准备工作"></a>安装前的准备工作</h4><ul><li><strong>安全组设置</strong>：在云服务提供商的安全组设置中，放通内网的ICMP协议，确保服务器之间可以互相PING通。</li><li><strong>SSH免密登录</strong>：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br><span class="line">ssh-copy-id &lt;IP地址&gt;</span><br></pre></td></tr></table></figure> 替换 <code>&lt;IP地址&gt;</code> 为所有节点的内网IP地址，按照提示输入yes和root密码。</li></ul><h4 id="安装Kubeasz工具"><a href="#安装Kubeasz工具" class="headerlink" title="安装Kubeasz工具"></a>安装Kubeasz工具</h4><ul><li><p><strong>下载安装脚本</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> release=3.5.0</span><br><span class="line">wget https://github.com/easzlab/kubeasz/releases/download/<span class="variable">$&#123;release&#125;</span>/ezdown</span><br><span class="line"><span class="built_in">chmod</span> +x ./ezdown</span><br></pre></td></tr></table></figure></li><li><p><strong>下载Kubeasz代码和二进制文件</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./ezdown -D</span><br></pre></td></tr></table></figure><p> <code>-D</code> 参数表示下载默认的Kubeasz代码和二进制文件。</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">./ezdown</span> <span class="string">-S</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="创建Kubernetes集群"><a href="#创建Kubernetes集群" class="headerlink" title="创建Kubernetes集群"></a>创建Kubernetes集群</h4><ul><li><strong>容器化运行Kubeasz</strong>：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it kubeasz ezctl new &lt;集群名称&gt;</span><br></pre></td></tr></table></figure> 替换 <code>&lt;集群名称&gt;</code> 为你想要的集群名称，例如 <code>k8s-01</code>。</li></ul><h4 id="配置集群"><a href="#配置集群" class="headerlink" title="配置集群"></a>配置集群</h4><ul><li><strong>修改集群配置文件</strong>：<br>编辑 <code>/etc/kubeasz/clusters/&lt;集群名称&gt;/hosts</code> 文件，设置集群节点的IP地址。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[etcd]</span><br><span class="line">10.0.1.1</span><br><span class="line">10.0.1.2</span><br><span class="line">10.0.1.3</span><br><span class="line"></span><br><span class="line">[kube_master]</span><br><span class="line">10.0.1.1</span><br><span class="line"></span><br><span class="line">[kube_node]</span><br><span class="line">10.0.1.2</span><br><span class="line">10.0.1.3</span><br></pre></td></tr></table></figure></li></ul><h4 id="安装Kubernetes集群"><a href="#安装Kubernetes集群" class="headerlink" title="安装Kubernetes集群"></a>安装Kubernetes集群</h4><ul><li><p><strong>建议配置别名</strong>，方便执行命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;alias dk=&#x27;docker exec -it kubeasz&#x27;&quot;</span> &gt;&gt; /root/.bashrc</span><br><span class="line"><span class="built_in">source</span> /root/.bashrc</span><br></pre></td></tr></table></figure></li><li><p><strong>一键安装集群</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dk ezctl setup &lt;集群名称&gt; all</span><br></pre></td></tr></table></figure><p> 替换 <code>&lt;集群名称&gt;</code> 为你在步骤4中创建的集群名称。</p></li></ul><h4 id="验证安装"><a href="#验证安装" class="headerlink" title="验证安装"></a>验证安装</h4><ul><li><p>应用环境变量：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">source</span> <span class="string">~/.bashrc</span></span><br></pre></td></tr></table></figure></li><li><p><strong>验证集群版本</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl version</span><br></pre></td></tr></table></figure></li><li><p><strong>验证节点状态</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get node</span><br></pre></td></tr></table></figure></li><li><p><strong>验证Pod状态</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pod -A</span><br></pre></td></tr></table></figure></li><li><p><strong>验证服务状态</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get svc -A</span><br></pre></td></tr></table></figure></li></ul><h2 id="项目总结"><a href="#项目总结" class="headerlink" title="项目总结"></a>项目总结</h2><p> 本博客详细描述了使用开源项目kubeasz快速搭建kubernetes，适合新手快速的上手哦！</p>]]></content>
      
      
      <categories>
          
          <category> kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kubernetes入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python web：Fastapi快速入门</title>
      <link href="/2024/08/12/Fastapi_start/"/>
      <url>/2024/08/12/Fastapi_start/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><h2 id="项目目标"><a href="#项目目标" class="headerlink" title="项目目标"></a>项目目标</h2><p>（1）了解fastapi优点<br>（2）熟悉创建fastapi程序流程<br>（3）了解fastapi常用CURD操作</p><h2 id="项目准备"><a href="#项目准备" class="headerlink" title="项目准备"></a>项目准备</h2><h4 id="基础准备"><a href="#基础准备" class="headerlink" title="基础准备"></a>基础准备</h4><p><strong>系统镜像：</strong>Win 11<br><strong>fastapi官网：</strong><a href="https://fastapi.tiangolo.com/zh/"><strong>https://fastapi.tiangolo.com/zh/</strong></a><br><strong>环境准备：</strong></p><ul><li><strong>python环境3.8以上</strong></li><li><strong>pycharm</strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip3 install uvicorn</span><br><span class="line">pip3 install fastapi</span><br></pre></td></tr></table></figure></li></ul><h2 id="项目实施"><a href="#项目实施" class="headerlink" title="项目实施"></a>项目实施</h2><h4 id="为什么要使用FastAPI？"><a href="#为什么要使用FastAPI？" class="headerlink" title="为什么要使用FastAPI？"></a>为什么要使用FastAPI？</h4><p>  在当今快速发展的软件开发领域，构建高质量、高性能的 API 已成为开发者们的共同追求。FastAPI，作为一个新兴的 Python web 框架，以其卓越的性能和简洁的代码结构，迅速在开发者社区中获得了广泛的关注和认可。我个人认为使用FastAPI的理由如下：</p><ul><li><strong>更高性能</strong></li><li><strong>提高开发效率</strong></li><li><strong>简单易学</strong></li><li><strong>代码简洁</strong></li><li><strong>健壮可靠</strong></li></ul><h4 id="快速开始FastAPI"><a href="#快速开始FastAPI" class="headerlink" title="快速开始FastAPI"></a>快速开始FastAPI</h4><p><strong>（1）新建项目</strong><br>在pycharm中创建FastAPI项目，第一次启动时pycharm会自动安装fastapi和uvicorn<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713238618335-4fde4f14-efdc-4772-ad29-1f3ad0b6bcf7.png#averageHue=%232a2d31&clientId=ue9ddf71c-599e-4&from=paste&height=577&id=ub496f93c&originHeight=974&originWidth=1199&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=74282&status=done&style=none&taskId=u90244de3-8b90-4e8d-990d-186eefe7d02&title=&width=710" alt="image.png"><br>（2）<strong>导入 FastAPI</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br></pre></td></tr></table></figure><p>（3）<strong>创建一个 FastAPI实例</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app = FastAPI()</span><br></pre></td></tr></table></figure><p>变量app就是fastapi类的一个实例，后面的代码都会用上前面创建的这个实例。<br>（4）<strong>创建一个helloworld应用</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">root</span>():</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Hello World&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>将代码放入 main.py 文件中，然后你可以像下面这样运行 uvicorn：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uvicorn main:app --reload</span><br></pre></td></tr></table></figure><p>也可以直接在代码中调用uvicorn：（学习时推荐，不用重复运行uvicorn命令，直接右键run即可）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> uvicorn</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    uvicorn.run(app=<span class="string">&#x27;main:app&#x27;</span>, host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="number">8000</span>, reload=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>运行后控制台输出：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713239661007-b9bebafa-a844-4c9a-b381-78f71a3a2a44.png#averageHue=%231f2125&clientId=ue9ddf71c-599e-4&from=paste&height=181&id=udc2382f1&originHeight=271&originWidth=1262&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=52257&status=done&style=none&taskId=u659b4e9d-8052-4614-b057-74bd4474d44&title=&width=841.3333333333334" alt="image.png"><br>使用浏览器访问<a href="http://127.0.0.1:8000：">http://127.0.0.1:8000：</a><br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713239685356-0140b852-8bd8-4ede-8e28-5ed128e1b0c2.png#averageHue=%23faf9f9&clientId=ue9ddf71c-599e-4&from=paste&height=98&id=u2f4195f0&originHeight=147&originWidth=396&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=10832&status=done&style=none&taskId=u674edcee-b6b1-43ce-be6c-f6820ccc685&title=&width=264" alt="image.png"><br><strong>（5）查看交互式API文档</strong><br>浏览器访问<a href="http://127.0.0.1:8000/docs%EF%BC%9A">http://127.0.0.1:8000/docs：</a><br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713239967514-d5e7564f-3a6c-42cd-923d-844e1e8f8e28.png#averageHue=%23fdfdfc&clientId=ue9ddf71c-599e-4&from=paste&height=347&id=udef6d955&originHeight=661&originWidth=1036&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=36910&status=done&style=none&taskId=u6d2df47c-3518-4f75-b413-74d6d2dd487&title=&width=544" alt="image.png"><br>展开后单击“Try it out”<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713240053888-c227eed5-887b-4e33-8f53-d4748d8452b3.png#averageHue=%2399e8b0&clientId=ue9ddf71c-599e-4&from=paste&height=427&id=ude0539ee&originHeight=743&originWidth=951&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=40170&status=done&style=none&taskId=ua7953b02-bc8d-479b-a711-1be98581745&title=&width=546" alt="image.png"><br>单击“Execute”可以查看到Curl，Responses等信息。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1713245844701-1ae23a74-428d-4572-b94c-88b356215d56.png#averageHue=%2378cc90&clientId=ue9ddf71c-599e-4&from=paste&height=901&id=u17db0542&originHeight=1668&originWidth=964&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=106859&status=done&style=none&taskId=u0848bfa6-71e5-4f62-8f02-9653d62bfa2&title=&width=520.6666870117188" alt="image.png"></p><h4 id="FastAPI操作"><a href="#FastAPI操作" class="headerlink" title="FastAPI操作"></a>FastAPI操作</h4><p><strong>（1）FastAPI有以下操作</strong>（这里的「操作」指的是一种 HTTP「方法」）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.get() </span><span class="comment"># GET请求 用于读取数据</span></span><br><span class="line"><span class="meta">@app.post() </span><span class="comment"># POST请求 用于创建数据</span></span><br><span class="line"><span class="meta">@app.put() </span><span class="comment"># PUT请求 用于更新数据</span></span><br><span class="line"><span class="meta">@app.delete() </span><span class="comment"># DELETE请求 用于删除数据</span></span><br><span class="line"><span class="meta">@app.options() </span><span class="comment"># OPTIONS请求 用于获取目的资源所支持的通信选项</span></span><br><span class="line"><span class="meta">@app.head() </span><span class="comment"># HEAD请求 用于请求资源的头部信息</span></span><br><span class="line"><span class="meta">@app.patch() </span><span class="comment"># PATCH请求 用于用于对资源进行部分修改</span></span><br><span class="line"><span class="meta">@app.trace() </span><span class="comment"># TRACE请求 用于实现沿通向目标资源的路径的消息环回（loop-back）测试 ，提供了一种实用的 debug 机制。</span></span><br></pre></td></tr></table></figure><p><strong>（2）FastAPI常用操作</strong></p><ul><li>POST：创建数据。</li><li>GET：读取数据。</li><li>PUT：更新数据。</li><li>DELETE：删除数据。</li></ul><p><strong>（3）GET</strong><br>GET 请求通常用于从服务器检索数据。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设我们有一个存储了用户信息的内存数据库</span></span><br><span class="line">fake_db = &#123;</span><br><span class="line">    <span class="string">&#x27;1&#x27;</span>: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Alice&#x27;</span>&#125;,</span><br><span class="line">    <span class="string">&#x27;2&#x27;</span>: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Bob&#x27;</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/users/&#123;user_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_user</span>(<span class="params">user_id: <span class="built_in">str</span></span>):</span><br><span class="line">    <span class="keyword">return</span> fake_db.get(user_id)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取所有用户</span></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/users&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_users</span>():</span><br><span class="line">    <span class="keyword">return</span> fake_db</span><br></pre></td></tr></table></figure><p>这个程序使用了两次get：一个用于根据用户ID获取单个用户信息，另一个用于获取所有用户信息。<br><strong>（4）POST</strong><br>POST 请求通常用来向服务器发送数据以创建新的资源。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line">fake_db = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个Pydantic模型，用于接收用户数据</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/users/&#123;user_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_user</span>(<span class="params">user_id: <span class="built_in">str</span>, user: User</span>):</span><br><span class="line">    <span class="keyword">if</span> user_id <span class="keyword">in</span> fake_db:</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;User with this ID already exists&quot;</span>&#125;</span><br><span class="line">    fake_db[user_id] = user.<span class="built_in">dict</span>()</span><br><span class="line">    <span class="keyword">return</span> fake_db[user_id]</span><br></pre></td></tr></table></figure><p>这段代码定义了一个POST路由&#x2F;users&#x2F;{user_id}，用于创建新用户。user_id是路径参数，表示用户的唯一标识符。user是通过Pydantic模型User验证后的请求数据。<br>处理函数create_user首先检查user_id是否已经存在于fake_db中。如果已存在，返回一个错误消息。如果user_id不存在于fake_db中，它会将新用户数据存储到fake_db字典中，键为user_id，值是user对象转换为字典的结果。函数返回创建的用户的详细信息。<br><strong>（5）PUT</strong><br>PUT 请求用于更新现有资源的全部或部分内容。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI, HTTPException</span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line">fake_db = &#123;</span><br><span class="line">    <span class="string">&#x27;1&#x27;</span>: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Alice&#x27;</span>&#125;,</span><br><span class="line">    <span class="string">&#x27;2&#x27;</span>: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Bob&#x27;</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserUpdateRequest</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.put(<span class="params"><span class="string">&quot;/users/&#123;user_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update_user</span>(<span class="params">user_id: <span class="built_in">str</span>, user_update: UserUpdateRequest</span>):</span><br><span class="line">    <span class="keyword">if</span> user_id <span class="keyword">not</span> <span class="keyword">in</span> fake_db:</span><br><span class="line">        <span class="keyword">raise</span> HTTPException(status_code=<span class="number">404</span>, detail=<span class="string">&quot;User not found&quot;</span>)</span><br><span class="line">    fake_db[user_id].update(user_update.<span class="built_in">dict</span>())</span><br><span class="line">    <span class="keyword">return</span> fake_db[user_id]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>函数update_user首先检查user_id是否存在于fake_db中。如果不存在，抛出一个404状态码的HTTPException，表示用户未找到。如果user_id存在于fake_db中，它会使用update方法更新该用户的名称。user_update.dict()将Pydantic模型转换为字典，以便可以更新模拟数据库中的用户信息。最后，函数返回更新后的用户信息。<br><strong>（6）DELETE</strong><br>DELETE 请求用于删除服务器上的资源。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI, HTTPException</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line">fake_db = &#123;</span><br><span class="line">    <span class="string">&#x27;1&#x27;</span>: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Alice&#x27;</span>&#125;,</span><br><span class="line">    <span class="string">&#x27;2&#x27;</span>: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Bob&#x27;</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.delete(<span class="params"><span class="string">&quot;/users/&#123;user_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">delete_user</span>(<span class="params">user_id: <span class="built_in">str</span></span>):</span><br><span class="line">    <span class="keyword">if</span> user_id <span class="keyword">not</span> <span class="keyword">in</span> fake_db:</span><br><span class="line">        <span class="keyword">raise</span> HTTPException(status_code=<span class="number">404</span>, detail=<span class="string">&quot;User not found&quot;</span>)</span><br><span class="line">    <span class="keyword">del</span> fake_db[user_id]</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;User deleted successfully&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>函数delete_user首先检查user_id是否存在于fake_db中。如果不存在，抛出一个404状态码的HTTPException，表示用户未找到。如果user_id存在于fake_db中，使用del语句删除该用户信息。最后，函数返回一个包含成功消息的字典，表示用户已成功删除。</p><h2 id="项目总结"><a href="#项目总结" class="headerlink" title="项目总结"></a>项目总结</h2><p>本项目简要介绍了FastAPI的入门。我先介绍了为什么要使用fastapi，它有许多的优点，然后我使用了简单的helloworld程序开始我们的fastapi之旅，最后使用一个用户信息库的CURD演示了FastAPI的常用操作。</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python fastapi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>15篇文章吃透四级单词</title>
      <link href="/2024/08/12/English/"/>
      <url>/2024/08/12/English/</url>
      
        <content type="html"><![CDATA[<h2 id="1、A-Question-of-Rights-一项权利问题"><a href="#1、A-Question-of-Rights-一项权利问题" class="headerlink" title="1、A Question of Rights [一项权利问题]"></a><strong>1、A Question of Rights [一项权利问题]</strong></h2><p>Unfortunately , a crime was about to be committed but at that moment Lesley was unaware of the impending(即将发生的,迫近的) event , which would affect her life so drastically(极端地,彻底地) for the next years .<br>一项犯罪就要得逞了。而不幸的是，就在那时，莱斯利对即将发生的事毫无察觉。这件事将彻底改变她此后两年的生活。<br>For the moment at least, her holiday at the cottage had been ideal. She had spent many idle hours relaxing on the deck , reading ,eating a sandwich when she was hungry and in the evening watching the sky turn from brilliant orange to peach and finally to pale purple , eventually the light becoming dim . It was about this time that the mist would begin to rise from the cool water hiding in the dense forest that hugged(环绕,拥抱) the shoreline(海岸线). Late evening dew(露水) glistened(闪耀,反光) on every bush and soon the loons’ (潜鸟) call would resound (回响) across the water . She decided to take on last dip in the lake. As the cool night air touched her arms. She gave a little shiver and decided it was time to move inside.<br>至少在那个时候，她在小别墅的假期还是很惬意的。她在平台上度过了很多闲适轻松的时光，读书、饿了吃块三明治;晚上，看着天空由鲜橙色变为桃红色，然后变为淡紫色，最后光线终于黯淡下来。就在这时，薄雾开始从隐藏在环绕岸边的密林里的冷水中升起;再晚些，灌木上的露珠开始闪烁，不久，潜水鸟的叫声就会在水面上回荡起来。她决定在湖里最后再泡一会儿。当她的手臂触到夜晚凉爽的空气时，不禁有些发抖，于是她决定该是回到屋里去的时候了。<br>This was to be her last evening alone as Jeff, her former mate, would be returning Zac to her early in the morning. As the case in many marriages these days, problems had arisen between Lesley and Jeff, but they did not extend to Zac. He was a good kid, just entering kindergarten. The couple had come to a mutual agreement , as dictated by the legal custody(监管,保管) agreement .It stated that each parent would share Zac’s care every second weekend and this had been her weekend to be alone.<br>这是她在家中独处的最后一个晚上，因为她的前夫杰夫会在早上把扎克送回来。与当时许多婚姻情况一样，莱斯利和杰夫之间出现了许多问题，但并未影响到扎克。他是个好孩子，刚刚上幼儿园。他们达成了一个依法监护的协议，协议规定双亲每两个周末轮换照顾孩子，这是她独处的周末。<br>Jeff was an architect, with a high-profile reputation, who worked in downtown Toronto, a partner in a private corporation which mostly did consultant work for the university. Lesley’s company had been hired to advertise the new science complex in order to raise corporate(公司的) money for the proposed building. She liked her work and she harbored a secret ambition to manage her division of the company some day.<br>杰夫是个建筑师，名声很大，在多伦多市区工作，是一家私人公司的合伙人，该公司主要为大学做咨询工作。莱斯利的公司已经接下了为新的科学综合大楼做广告的工作，以便为计划中的大楼筹集合作基金。她喜欢她的工作，并且心怀抱负：有一天她要管理这个部门。<br>After a whirlwind(旋风般的) courtship(求爱,热恋) and a fairytale wedding the couple had settled down to an urban lifestyle. However, after three years and one child the dreamlike marriage came smashing down. One disadvantage(不利条件) of being young and ambitious(有抱负的) was that both of them needed to devote untold hours to their busy schedules. As a result of these late hours, Lesley became suspicious(猜疑的) of Jeff’s after hours activities. She accused him of making her part of a love triangle. The whole miserable scene was to set the proceedings(过程,诉讼,诉讼程序) for an ugly(不愉快的) divorce in motion.<br>在一段旋风般的热恋和一个童话式的婚礼之后，夫妻俩定居下来，过起了都市生活。然而，在过了三年并有了孩子之后，这段梦幻般的婚姻开始破裂了。年轻而又雄心勃勃的不利之处，就是两个人都要把数不清的时间花在忙不完的事业上。由于经常工作到很晚，莱斯利开始怀疑杰夫工作之余的活动，她指责他让她成了三角爱情的一部分。事情发展到最痛苦的场面就是提出不愉快的离婚诉讼。<br>Daydreaming(幻想,白日梦) about those earlier days would not help tonight. So with a shrug of her shoulders she tackled the advertising assignment she needed to complete. Tomorrow would be a busy day with Zac arriving home.<br>那些对最初美好时光的回忆，对今夜也无济于事。于是，她耸了耸肩，着手处理她必须完成的广告业务。明天扎克到家后将会非常忙碌。<br>The next day, as the morning wore on, Lesley became more and more agitated(烦躁), and her mood became apprehensive(忧虑的,不安的), when Jeff did not appear. When noon hour arrived and he still had not appeared, she started making some phone calls. None of their mutual friends had either seen or talked with Jeff that day. Until today, Jeff had always been very punctual about returning the boy at the appointed time. Lesley felt a knot forming in her stomach as a crazy thought persisted at the back of her mind. She was absolutely sure something was wrong.<br>Jeff sat with his head bowed. He was undecided what to do. The domestic arrangement with his former wife was proving to be awkward. He was frustrated at being able to see his son only on weekends and felt he was always making concessions to accommodate(适应,迁就) Lesley’s work schedule. Every meeting was turning into a competition for the boy’s affection. His one desire was to take Zac away for good. The enormous decision to undertake this plan appeared to be presenting itself. Today he would depart for a conference in California. This appeared to be a marvelous opportunity to take the boy and leave the country for good. He bet that he could pack sufficient baggage into his vehicle and then disappears across the border, gaining entry the U.S.A. He gave little thought to whatsoever of the fact this act could lead to his conviction if he was tracked down by the cops.<br>第二天，随着上午的时间慢慢逝去，莱斯利越来越感到不安。杰夫没有出现，她变得焦躁起来。到了中午，他还没出现，于是她开始打电话。他们共同的朋友都说那天没看见他，也没和他通过电话。以前，杰夫总是非常准时地将孩子送回来。一种不祥的想法在下意识地困扰着她，莱斯利感到恐惧。她绝对肯定是出事了。杰夫低头坐着，他不知该做些什么。和前妻商定的对家庭的安排看来是蠢笨的，只能在周末看看儿子令他沮丧极了。为了莱斯利的工作安排，他觉得一直在迁就。每次相见都变成一场争夺“孩子到底爱谁”的竞争。他有一个心愿就是把扎克永远带走，现在就应做出实施这个计划的重大决定了。今天，他要前往加利福尼亚参加一个会议，这显然是一个带走孩子，永远离开这个国家的绝好机会。他确信他能够把足够多的行李装上车，然后跨过边境，进入美国后就消失掉。如果被警察抓住，这种行为是可以构成犯罪的，可他不再多想了。<br>Meanwhile, for Lesley the nightmare continued to unfold(展现,显露) as the reality of the situation deepened. After 48 hours, the spokesman for the district police department assured her they would investigate Zac’s disappearance. Her faith that justice would be realized was faint. The shock of the past two days’ events made her realize that possibly her son would become one more statistic in the missing children file. The police completed a preliminary survey after asking hundreds of detailed(详细的) questions. Hot lines proved fruitless(无结果的).<br>Meanwhile, over the next year there were countless visits and interviews at the police station and her home. The police appeared to be making no progress in tracking Zac’s whereabouts(行踪). As the days passed, Lesley’s frustration(挫败) mounted and she felt a sense of alarm. Eventually, she decided to take the initiative in continuing the search and she began to use well-established child find agencies. At times, boosted by hopes, she appeared to be on the right trail with a sense of disgust, but her hopes were dashed at the final moment. These obstacles hope. After Zac’s picture was circulated nationwide, telephone calls followed from strangers reporting sightings(被看见的人或事物) of a Zac look alike. Month by month her plan evolved into a campaign equal to a full-scale battle plan. She paid an exceedingly high fee for specialized help, such as the services of an attorney. Lesley became determined to target every major city where Jeff normally contracted business. As the months slopped by, Lesley’s exhaustion became noticeable in her eyes. Her cheeks became hollow pits. Most days she felt as though she did not have an ounce of energy left because proof of Zac’s existence seemed impossible to find.<br>Another year passed and her hopes dimmed. Unexpectedly, late in August a promising lead brought her to Los Angeles.<br>与此同时，对于莱斯利，随着事件真相的不断深入，噩梦也在继续显现。48小时后，地区警察部门发言人向她保证，他们将对扎克的失踪展开调查。她对正义会得到伸张的信心减弱了。最近两天发生的事使她认识到，他的儿子很可能成为失踪儿童名单中增加的又一个新数字。在询问了许许多多的细节问题之后，警察完成了初步调查。热线电话丝毫没有结果。<br>在接下来的一年多时间里，她在警察局和家中接受了无数次的访问和会见。在寻找礼物的下落上，警察似乎并没有取得什么进展。时间一天天地过去，莱斯利感到日益失望，她有一种恐慌的感觉。终于，她决定要争取主动，继续找寻，她开始求助于专门的儿童寻找机构。有时，尽管感到有些厌烦，由于希望的驱使，她还是加入到搜寻线索的行列，但她的希望都在最后时刻破灭了。这些挫折只会令她更坚定不放弃寻找或不丧失希望的决心。扎克的照片在全国传阅，不断有陌生人打来电话，报告说看见了像扎克模样了人。一月又一月，她参与活动的计划安排相当于一场大规模的战役部署。她出高薪请专家帮忙，例如聘请代理人为她服务。莱斯利开始决定在杰夫平日联系生意的每一个主要城市去寻找目标。几个月过去了，从莱斯利的眼里，可以明显感觉到她的确精疲力竭了。她的脸颊深深地凹了下去。大多数日子里，她觉得好像一点儿精力也没有了，因为证明扎克还在的证据看来是不可能找到了。<br>又一年过去了，她的希望变得更加渺茫。但出乎意料，八月底，一个很有希望的线索把她带到洛杉矶。<br>The interior of the bar was dark. Her quest to locate Jeff and Zac had taken two years. She had paid private investigators in American currency to help her locate her ex-husband. In her handbag she carried the necessary proof that would identify her to the authorities if she was successful in being able to bring Zac home again, to Canada. She had been impatient for this moment to arrive for so long and yet now she just wanted to secure her son with a minimum of fuss. Now, right on cue, a tall stranger slipped into the bar and sat down. One glimpse told her it was Jeff. He looked weary(疲劳的) and older but definitely familiar. A chill ran up her spine(脊椎,脊柱). Close to success, she refused to concede defeat. It was the time to remedy the enormous sadness. This time she wanted a guarantee of success. She stared straight ahead with a vacant look, trying to grasp the important moment. Vivid scenes, from the pass two years’ search, flashed(思想等的闪现) through her mind.<br>酒吧里面很暗。追寻杰夫和扎克和下落已经花了她现年时间。她付费给在美国的私家侦察机构，帮她查找前夫的下落。在她的手提包里，有可以向当局证明的必要材料，一旦成功，她就可以将扎克带回家，回到加拿大。她焦急地等待着这一刻的到来已经很久了，而现在她只想找回她的儿子，发行量不要出什么乱子。就在这个时候，一个高个的陌生人溜进酒吧坐下来。她一眼就认出那是杰夫。他看起来很疲惫，显得更苍老了，但还是相当熟悉。一阵寒气掠过她的背脊。马上就要成功了!她拒绝承认失败，这正是治疗巨大伤痛的时刻。这次，她要确保成功。她带着迷茫的神情凝视着前方，努力要抓住这重要的时刻。过去两年的搜寻情景，一幕幕清晰地在她的脑海中闪现。<br>The following day, happily for Lesley, the headline of the local paper read, “Father turns over child, Mother slams system.”<br>翌日，使莱斯利感到高兴的是当地报纸的头条新闻：“父亲将孩子送回，母亲猛烈抨击体制”。<br>Lesley and Zac’s subsequent life could now resume some form of normalcy(正常状态), however, the stress and strain of the past two years would always remain as a part of this renewed relationship in the memory.<br>至于莱斯利和扎克后来的生活，现在可能恢复到某种正常状态了。然而，过去两年的压力和紧张将成为这种重新恢复起来的关系中的一部分，永远留在记忆里。</p><h2 id="2、One-Chance-一次机会"><a href="#2、One-Chance-一次机会" class="headerlink" title="2、One Chance [一次机会]"></a><strong>2、One Chance [一次机会]</strong></h2><p>The tiny antique silver pin lay in my hand. I stared hard at the solemn face looking back at me from the oval frame. I was looking for some resemblance between my ancestor and myself. Her brow was broad and strong, the eyes kind and forgiving. She wore a stiff black bonnet(无边小圆软帽), a high white collar and a coarsely woven shawl(披肩) around her shoulders. In examining her face more closely, maybe I could identify some similarity around the eyes and the nose. An inner strength shone from the eyes of this diminutive lady who had helped lead her family from Ireland to the New World.<br>那枚小小的旧银别针就放在我的手上。我紧盯着那张从椭圆形镜框里反过来看着我的严肃面孔。我在寻找我的祖先和我自己之间的某些相似之处。她的眉毛宽大浓密，眼睛里温和慈祥。她戴着一顶绷紧的黑色软帽，高白领，肩上披着一条做工粗糙的披肩。再近点观察她的脸孔，或许我能在眼睛和鼻子周围辨认出一些相似的地方。从这位身材矮小的女士的眼里，透射出一种内在的力量，她曾帮助和带领她的家庭，从爱尔兰来到了新世界。<br>The times, in Ireland during the 1770’s, were difficult for everyone. John and Lily Love and all the tenants(租地者,佃户) of the Barren’s Court Estate were suffering after terrible floods destroyed their crops. The landlord was generous in allowing the land rent to fall into arrears(拖欠,还款), due to the difficult times. However, as weather conditions continued to worsen, the little family became pessimistic and felt desperate about the direction of their lives. Nearly every family at this time had at least one member of their family who had left for the New World. The ugly face of famine was lurking(潜藏,潜伏) everywhere. It was not possible with one acre of arable(可耕作的) land to make a living.<br>那时候，在18世纪70年代的爱尔兰，人人处境艰难。一场特大洪水毁掉了他们的庄稼之后，约翰和莉莉·洛夫一家像其他所有的巴伦斯宫廷庄园的佃户一样痛苦不堪。庄园主还算慷慨，鉴于这个艰难时期，允许佃户们拖欠租金。然而，天气状况持续恶化，这个小家庭变得悲观起来，对他们的生活前途感到绝望。那个时候，几乎每个家庭至少有一名家庭成员出走前往新世界。饱受饥荒之苦的憔悴面容到处都是，要靠一英亩耕地生活是不可能的。<br>Late one night, after the children were in bed, John and Lily discussed the possibility of making a reservation aboard a sailing ship bound for America. John had noticed a poster in the town square, that posted by a ship’s owner trying to recruit people for his ship. John knew that conditions aboard ship would not be ideal for Lily, her new infant son and the two elder boys; however, she acknowledged that settling in America would be the only way for the family to gain some independence and to earn a living. More importantly, it was rumored that land was free in the new country. Lily gave her consent to leave.<br>一天夜里，孩子们入睡以后，约翰和莉莉讨论起预定船只前往美国的可能性。就在当天，约翰在市镇广场上看到一张海报，是船主张贴出来招揽乘客的。约翰知道船上的条件对莉莉不大合适，她有一个刚出生的婴儿和两个大点的男孩。但是，她认为在美国定居将是这个家庭取得独立和谋生的唯一出路。更重要的是，据说在那个新国家土地是免费的。莉莉也赞成出去。<br>In port, the sailing ship, Hannah, under the command of Captain Mitchell lay at anchor. The adventure of crossing the Atlantic Ocean bound for Philadelphia would take two to three months. Passengers were assured there would be the best provisions and plenty of barrels of fresh water. Storms could be fierce and living conditions below deck would be primitive. John joined the long queue and eventually after a lengthy wait, reached the revenue table. He affixed(签署名字) his signature to the contract promising to pay five pounds per person for berths(卧铺) aboard ship. The clerk returned the receipt to John indicating that the sum of money had been paid.<br>在港口，那艘帆船“汉纳”号，在米切尔船长的指挥下，正抛锚停泊。跨越大西洋前往费城的冒险要花两到三个月。乘客们被许诺有最好的食品供应和充足的淡水。暴风雨可能很猛烈，甲板下面的生活条件将是很单调的。约翰加入到了那长长的队列里，等了很久以后，终于来到付款台前。他在合同上签了字，按要求为乘坐那艘船的每个人付5英镑。办事员为约翰开了收据，表示钱已付清。<br>Once under sail the three hundred passengers found themselves crowded into miserable conditions. The smell of so many people crowded together was offensive. The breadth of the vessel was narrow and the headroom(净空,头上空间) below deck minimal.<br>可是一上船，三百名乘客发现船上非常拥挤，条件很恶劣。这么多人挤在一起，气味简直让人受不了。船舱狭窄又很低矮。<br>As the tiny craft sailed out of Lough Foyle, and entered the Atlantic Ocean, it started to roll ominously(不吉利的) and those aboard wondered if they would survive the long voyage ahead or be swallowed up by the enormous waves. Seasickness(晕船) was everywhere and people had no appetite. The food, instead of being of high quality as promised, was too often rotten and the water was brackish(有咸味的).<br>小船驶离洛夫福伊进入大西洋的时候，就开始不祥地摇晃起来，船上的人担心他们是否能够安全完成航程还是会被巨浪吞噬。到处都是晕船的，人们没有食欲。伙食没有承诺的那么好，还常常是腐烂的，水也有咸味。<br>Eventually, the winds lessened and the Captain was able to set his sights towards America and become ably steering the ship on an even course(航线). Eight weeks later, plus on day, the Hannah made landfall(着陆) and the Love family disembarked(离船上岸) in America and became American newest immigrants. Gazing at the mainland after so many days of sailing was indeed a glorious sight. The difficult days aboard ship seemed worthwhile. Porters hurried along the docks pushing baggage. Little girls with ribbons in their hair scanned the ship’s decks hoping to get a first glimpse of their father arriving. It seemed to Lily that it took forever to register and to pass through immigration.<br>终于风浪减弱了，船长能够看准美国的方向，成功地驾船工行驶在平静的航线上。八个星期零一天之后，“汉纳”号靠岸，洛夫一家在美国登陆，成为美国最早的移民。经过这么多天的航行，凝视着这片大地，的确令人心旷神怡。看来在船上过的那些艰苦的日子还是值得的。码头上的搬运工在忙着搬运行李。头发上带着丝带的小姑娘们环视着甲板，希望第一眼看到他们到来的父亲。对于莉莉来说，登记和办理移民手续好像没完没了。<br>John said that he would go ahead to scout out some land in the far west of the state. He would push on to the frontier with a bunch of other Irish chaps. Lily and the children could follow more slowly, harnessing the horse and cart to convey their scanty(贫乏的,少的) possessions. The stuff in the cart would include a kettle, dishes, blankets, a chair, a bucket and an axe.<br>约翰说他要先出发，在这个州遥远的西部找一些土地。他和一帮爱尔兰小伙子一起赶往边疆。莉莉和孩子们可以在后面慢慢地跟，坐马车把他们仅有的一点家产运来。车上的那些东西包括一个壶、一个盘子、毯子、一把椅子、一个提桶和一把斧头。<br>There was a perception by the government at this time that the feisty(易怒的,好斗的) Irish would resist any hostile natives refusing to retreat and thus maintaining the western boundary. The Irish, too, were pleased to settle as far away from the government as possible. Instead of purchasing land, they would “squat(占据)” on the property erecting only a temporary, humble shelter to stave off(遮挡) the weather. Once their families arrived, they would inspire the men to build proper cabins. Neither fancy nor elegant, these log structures would be their first real homes. Property boundaries at this time were not marked out with iron rods or stakes in a standard fashion, but rather designated(标明,标出) by natural objects such as rocks, trees and creeks. Confusion and disputes must often have followed later, when these survey points disappeared.<br>After exploring the area around Shirley’s burg, John and his sons rode over Sandy Ridge to survey the property below Black Log Mountain. It was here in a long narrow valley they decided to settle. The valley became known then, and is still called Love’s valley today.<br>那时候，政府认为，好斗的爱尔兰人会抵抗那些有敌意的当地人，拒绝妥协让步，以保住西部边疆。而爱尔兰人也乐得尽量远离政府定居。不需要购买，他们只要支起一个能遮蔽风雨的临时简陋住所，就算占用了这片土地。一旦家人到达，他们会鼓励男人们建造合适的房屋。既不奇特也不优雅，这些原木结构的建筑物将是他们第一个真正的家。那时，地产边界不是用标准的铁棍或木桩来做标志，而是用象岩石、树木和小溪等自然物来界定。后来因为这些测量点消失了，混乱和争执时常发生。<br>At the time, drums were used to forewarn(预先警告) that the natives were going to capture the forts(城堡), which guarded the western frontier. Daily life in this new land, for the early settlers, was harsh and difficult. First they needed to tame the land, chopping down trees, in order to be able to plant crops. At times they needed to defend their land and be wary(机警的) of attacks from wild animals, such as wolves and bears. Mosquito bites caused severe reactions of swelling and itchiness(痒痒). Once the work was done, neighbors would gather for an occasional social function. The children would play for hours chasing butterflies and looking for birds’ nests. The boys would catch frogs and then tease(戏弄) the girls with them. There would be a delicious picnic lunch spread on the grass. John asked Lily to bring some freshly squeezed lemon juice for the picnic. He found the sour taste of lemonade(柠檬汽水) was refreshing on a hot summer’s day. Some of the men would have a drink of homemade(自制的) in the moonshine before striking up a tune on the fiddle(小提琴). Square dancing was popular among the young people and the young lads would leap up to dance with the eligible(中意的,合格的) young ladies. Rivals for a young lady’s hand in marriage would tend to compete to walk her home at the end of an evening. The romantic times were few and contrasted sharply with the stern reality of everyday life.<br>在探究了歇里斯伯格周围的地区之后，约翰和他的儿子们翻过桑迪山脉，在布莱克拉格山下面勘察了土地，他们决定就在这条狭长的山谷里定居下来。因此这个山谷被称为洛夫山谷，直到今天还这样叫。<br>那时候，当土著人来夺取防护西部边界的那些城堡时，他们就使用鼓声作为预先的示警。在这块新土地上的日常生活对于早期的定居者来说是非常艰辛和困苦的。首先，他们需要开垦土地，砍倒树木，以便能够种上庄稼。有时，他们需要保卫他们的土地，提防狼和熊等野兽的攻击以及蚊子叮咬造成的肿痛和奇痒。干完活后，邻居们偶尔会聚在一起举行社交活动。孩子们会玩上好几个小时，去捕蝴蝶，掏鸟窝，男孩子们会逮青蛙去捉弄女孩们，还有布置在草地上的美味午餐。约翰叫莉莉为野餐带去一些鲜榨柠檬汁，他发现柠檬的酸味在炎热的夏天令人清爽，使人振奋。月光下，有的人还会来一杯自家酿的酒，然后便趁兴用小提琴拉上一曲。青年人中很流行方块舞，年轻的小伙子们就会跳出来与中意的姑娘们一起跳舞。晚上，向姑娘们求婚的竞争对手们往往会竞相来到她们的家里。浪漫的时候虽然很少，但却和每天严酷的现实生活形成鲜明的对照。<br>Neighbors were also few and Lily found she was very lonely. She looked forward to the occasional visits of the minister, Robert Ayers, who was a Methodist circuit rider. Meetings would be held in fields or small barns, three to four times a year. At other times neighbor women from over the mountain would meet to make quilts(被子), blankets and cushions and to gossip(聊天) about their respective lives. They would share their secret fears regarding their new lives, their hopes for their children’s future and enjoy each other’s companionship(友谊,伴侣关系).<br>邻居也很少，莉莉觉得孤独。她盼望着卫理公会教派骑马巡回的罗伯特?埃亚牧师的偶然造访。一年有三、四次在田地里或小库房进行集会。另外，有时候，翻山过来的邻家妇女会聚在一起做被子，织地毯和垫子，聊聊各自生活中的琐事。他们分担着对新生活的暗自担心，对孩子前程的殷切期望，并为相互间的友谊高兴不已。<br>Twenty years slipped by and John Love died at the early age of 47. Several years later, son James and his family, as well as widow Lily, his Mother, made the decision to leave Pennsylvania and settle in Canada. They made the arduous(困难的,艰巨的) trek(旅行) over Indian trails, crossing the Niagara River to settle in what we now call Ontario.<br>20年过去了，约翰洛夫在47岁时就过早地去世了。几年后，儿子詹姆斯和他的家庭，还有他的母亲——寡妇莉莉，决定离开宾夕法尼亚到加拿大定居。他们经过艰难跋涉，沿着印第安人的足迹，渡过尼亚加拉河，在今天我们称之为安大略的地方定居下来。<br>I am a Canadian. Having traced my roots and followed in the footsteps of these early settlers, I feel a sense of gratitude to my ancestors who faced extreme difficulties and severe hardship to settle in a new land. Liberty, then and in today’s world, is a priceless inheritance(遗产).<br>Once more, I glanced at the silver pin before returning it to the velvet(丝绒的) box. Once again, I questioned, “What did I inherit from my Love ancestors?” I realize the answer has been revealed while writing this story. I have determination, strength, loyalty and a love of adventure. This is my inheritance.<br>我是加拿大人。追根溯源，沿着这些早期移民的足迹，一种感激之情油然而生。我的祖先们面对艰难困苦，克服重重困难才在这片土地上定居下来。不论那时还是现在，自由都是宝贵的遗产。在把那枚银别针放回丝绒盒之前，我又看了它一眼。我再次问到：“我从洛夫祖先那里继承了什么呢?”在写这个故事的时候，我知道我有了答案。我所拥有的决心、力量、忠诚和对冒险的热爱就是我继承到的遗产。</p><h2 id="3、A-Man-and-His-Castle-一个大人物和他的城堡-（1）"><a href="#3、A-Man-and-His-Castle-一个大人物和他的城堡-（1）" class="headerlink" title="3、A Man and His Castle [一个大人物和他的城堡]（1）"></a><strong>3、A Man and His Castle [一个大人物和他的城堡]（1）</strong></h2><p>La Cuesta Encantada (The Enchanted[使用魔法迷惑] Castle) is one of the most remarkable displays of power and passion in the world. This marvelous tourist site now known as Hearst San Simeon State Historical Monument is better known as Hearst Castle. It is located six hours south of San Francisco and five hours north of Los Angeles. Sheltered by the mountains in northern San Luis Obispo County, the complex of 165rooms and 127 acres of gardens, terraces(露台), pools, fountains and footpaths draws approximately 800,000 visitors annually. To understand the castle, you have to understand the man who built it, William Randolph Hearst. And to understand the man, you have to understand the land upon which he built his dream.<br>魔幻城堡是世界上最著名的展示才能与激情的名胜之一。这个奇迹般的游览地，就是现在著名的赫斯特圣西蒙国家历史博物馆，它作为赫斯特城堡，则更为有名。它位于旧金山以南6小时、洛杉矶以北5小时车程的地方。这座隐蔽在圣路易斯?奥比斯波郡北部群山之中的综合建筑有165个房间，占地127英亩，有花园、游廊、水池、喷泉和小径，每年吸引大约80万名游客来到这里。要了解这座城堡，你就得了解建造它的那个人——威廉·伦道夫·赫斯特，而要了解这个人，你就得了解他把梦想建在其上的这块土地。<br>Born on April 29, 1863, William Randolph Hearst was the only child of Gorge Hearst and his wife, Phoebe. George was a multimillionaire(千万富翁) who amassed(积聚) his fortune through partnerships(合作关系) in three of the ever largest mining discoveries of copper, silver, and gold ores. In 1865, George began to accumulate parcels of land by obtaining 46,000 acres of the Piedra Blanco Ranch on California’s Central Coast. There he began a successful cattle ranch(大农场), eventually enlarging it to 250,000 acres stretching 50 miles along the coast.<br>威廉·伦道夫·赫斯，生于1863年4月29日，是乔治?赫斯特和他的妻子菲比唯一的孩子。乔治是一个千万富翁，他通过合伙参与三个曾经是最大的铜矿、银矿和金矿的发现和开采，积聚起大量财富。1865年，乔治得到了在加利福尼亚海岸的46000英亩的皮亚得拉布兰可牧场，开始积聚大片土地。在那里，他开始了对养牛场的成功经营，并最终将它扩大到沿着50英里海岸的250，000英亩。<br>William loved the ranch where he spent his summer vacations as a youngster and a youth, playing in the rugged canyons(峡谷), descending the cliffs and camping in colorful Arab-style tents in the mountains with his family.<br>威廉热爱这个青年时期渡过暑假的牧场。在崎岖不平的溪谷里游玩，攀登悬崖，和家人一起在山里华美的阿拉伯式的帐篷里野营。<br>Phoebe was delighted in exposing her darling child to the beauties and wonders of the world and spared no expense doing so. During one of their adventures, an 18-month tour of the historic palaces and castles of Europe, William began a lifelong love of collecting. With his first acquisitions, German picture books, he embarked(着手,开始工作) on a 78-year session of excessive spending. He confessed to a love of the finer things in life and, as he had a bottomless(不见底的) purse, would never deny himself anything he wanted.<br>菲比很喜欢让她心爱的孩子去认识这个美丽而奇妙的世界，花费多少都无所谓。在一次冒险活动期间，他们用18个月游览了欧洲历史上著名的宫殿和城堡，从那时起威廉开始养成收集的终身爱好。他从最初收集德国的图画书开始，进行了长达78年的超级消费。他承认一生中对精美物品的痴迷和热爱，而且因为有一个用不完的钱包，他对想要的任何东西从不吝惜金钱。<br>In 1887, while William was at Harvard University, he decided to take over the small newspaper, the San Francisco Examiner, which his father had accepted as payment for a gambling(赌博) debt several years earlier. George would have preferred that his son be involved in the mining and ranching interests, but William declined this offer and was given ownership of the Examiner in March 1887. He was determined to increase the popularity(普遍,流行) of the paper and acquire the best equipment and writers available. William’s resolve to succeed inspired him to publish juicy(有趣的) tales of vice and stories full of drama and motivation(积极性,动机). In 1895, he purchased the New York Morning Journal, putting him in direct competition with the distinguished(杰出的) Joseph Pulitzer and a circulation(传播,发行) war began.<br>1887年，当威廉在哈佛大学读书时，他决定接管一家小报纸《旧金山问询报》，几年前他的父亲将其作为一笔赌债接收了下来。乔治更希望他的儿子把兴趣放在采矿和经营牧场上，但威廉拒绝了这个建议并于1887年3月接手成为《问询报》的主人。他决定购置最好的设备，邀请最好的作者撰稿，提升报纸的声望。<br>威廉渴望成功的决心，促使他出版有趣的下流传闻和充满戏剧性、引人入胜的故事。1895年，他买下《纽约晨报》，与著名的约瑟夫?普利策展开直接的竞争，开始了一场扩大发行量的商战。<br>Both the Hearst and Pulitzer newspapers started to include sensational(耸人听闻的) stories about the Cuban Insurrection(起义). The stories greatly exaggerated claims of Spanish troops placing Cubans in concentration camps, forcing them to live under substandard conditions, disease-ridden, starving and dying. This style of reporting became known as “Yellow Journalism(新闻事件)”. The newspapers were transformed as the scope of the news broadened and became less conservative. Circulation soared as the public could get enough of the banner headlines and abundant illustrations. At the time, many people believed William actually might have initiated(开始,发动) the Spanish-American War to encourage sales. According to one report, when one of his correspondents, Frederick Remington, requested to return from Havana, William responded that if Remington would furnish the pictures, William would furnish the war. He was once quoted in an editorial as saying, “Make the news thorough Print all the news. Condense it if necessary. Frequently it is better when intelligently(聪明的) condensed.”<br>赫斯特和普利策的报纸都开始刊登有关古巴起义的耸人听闻的故事。这些故事极大地夸大了西班牙部队的行为：他们把古巴人关进集中营，迫使他们在恶劣的条件下生活，饱受疾病、饥饿和死亡的折磨。这种报道形式成了有名的“黄色新闻”。报纸在向扩大新闻范围方面转变，并变得不那么保守了。因为能够使公众获得足够的头条新闻和丰富的插图，发行量激增。据一篇报道说，当他的一个通讯记者弗雷德里克雷明顿请求从哈瓦那回来时，威廉回答说如果雷明顿能提供图片，他就可以发起这场战争。曾有一篇社论引用过他的格言：“跟踪新闻到底。报道所有新闻。必要时浓缩新闻。浓缩后的新闻常常更出色。”<br>Another classic example of his influence occurred when; merely months after he advocated political assassination(暗杀) in an editorial, American President McKinley was assassinated.<br>As an intelligent and dynamic business man, William generated increased readership by employing some of the most talented(天才的) writers in the United States, recruiting figures from the literary community, like Mark Twain and Stephen Crane, and the previously mentioned illustrator, Frederick Remington. He also showed his initiative when he chartered a yacht(快艇), equipped it as a miniature(小型的) newspaper headquarters, anchored off the coast of Cuba, and led his army of reporters into the field.<br>关于受他影响的另一个典型例子是，他在一篇社论中鼓吹政治暗杀，仅仅几个月后，麦金利总统就遇刺身亡。作为一个聪明能干的商人，威廉通过雇佣美国最有才华的作者，从文学团体中聘用大人物，像马克?吐温和斯蒂芬·克莱恩，以及前面提到过的插图画家弗雷德里克?雷明顿，造就了不断增长的读者群。他还显示了他的创新能力。当时，他包租了一条游艇，把装备成一个小型的报社总部，停在古巴海岸边，让他的采访队伍进入战场。<br>William’s interests led him to follow in his father’s footsteps, inspiring him to enter into politics. He was elected to the U.S. Congress as a senator representing the State of New York in 1902 and served until 1907. He was a candidate for the office of mayor of New York City and governor of New York State, but failed in both of these attempts.<br>威廉的兴趣爱好引领他、激励他继承父业进入政界。1902年作为纽约州的代表，他以参议员的身份被选进美国国会，一起任职到1907年。他还是纽约市市长和纽约州州长职位的候选人，但两次努力都失败了。<br>While honeymooning in Europe after his marriage to Millicent Wilson in 1903, he expanded his publishing empire with Motor Magazine. The Hearst Corporation grew to comprise a total of 12 newspapers, including the Examiner, and 25 magazines, including Cosmopolitan. Not satisfied with just his publishing enterprises, he expanded his business operations into radio, and later produced movie newsreels(新闻纪录片). (To Be Continued)<br>1903年与米莉森特?威尔逊结婚。在欧洲渡蜜月期间，他以《汽车杂志》扩张他出版帝国的疆土。赫斯特公司迅速成长以来，总共有包括《问询报》在内的12种报纸，和包括《大都会》在内的25种杂志。他并不满足于出版行业，还把他的事业扩展到电台，后来还生产新闻记录片。(待续)</p><h2 id="4、A-Man-and-His-Castle-一个大人物和他的城堡-（2）"><a href="#4、A-Man-and-His-Castle-一个大人物和他的城堡-（2）" class="headerlink" title="4、A Man and His Castle [一个大人物和他的城堡]（2）"></a><strong>4、A Man and His Castle [一个大人物和他的城堡]（2）</strong></h2><p>This influential media giant was not without his faults. His prejudices were common knowledge. His career was blemished(玷污) by his offensive remarks about Spaniards, Japanese, Filipinos, and Russians. He printed lies, forged documents, falsified(歪曲) stories of violence, wrote provocative editorials, and published sensational cartoons and photographs to support his opinions.<br>这个有巨大影响的媒体巨人也不是没有缺点。他的偏见是众所周知的。他对西班牙人、日本人、菲律宾人和俄罗斯人的攻击性评论是对他职业的玷污。为支持自己的观点，他刊载谎言，伪造文献，编选暴力故事，写煽动性的社论，出版蛊惑人心的卡通和照片。<br>William hated minorities. He took advantage of every opportunity to heighten racial tensions. His real motive for his hatred of Mexicans may have been the loss of 800,000 acres of prime timber land to the Mexican outlaw(逃犯), Pancho Villa. His papers described them as marijuana-smoking, job-stealing, lazy, wicked, and violent degenerates(堕落). Some suggest he saw the Mexicans as a threat to his empire.<br>威廉憎恨少数民族。他利用一切机会加剧种族间的紧张关系。他憎恨墨西哥人的真正原因，可能是由于那个墨西哥逃犯Pancho Villa让他损失了800,000英亩的原始树林。他的报纸把他们描绘成抽大麻、磨洋工、懒惰、邪恶和喜欢暴力的堕落者。有人说他认为墨西哥人对他的帝国是一个威胁。<br>During this period, William met and fell in love with a young actress, Marion Davies. Millicent, his wife and the mother of his five sons, including a set of twins, refused to dissolve the marriage, which obliged William to “live in sin” with the woman whom the tour guides refer to as his “friend” or “companion”.<br>在这个时期，威廉遇见了年轻的女演员马里恩戴维斯并爱上了她。他的妻子，他5个儿子其中有一对双胞胎的母亲米莉森特，拒绝解除婚姻，迫使威廉与那个女人过着姘居的生活，导游提到她时就说是他的“朋友”或“同伴”。<br>With the death of his mother in 1919, William inherited the beloved quarter-million-acre ranch. At first, he planned to build modest ranch house on his favorite campsite(野营的) but as he became more involved in the project, his vision of a monument to display his collections gained momentum(动力). Working closely with family architect, Julia Morgan, William created a glorious and extraordinary castle-like structure, blending Spanish, European, and Californian architectural styles. Huge warehouses(仓库) were built in San Simeon to store the shiploads of splendid antiques, including entire carved ceilings and walls hung with enormous tapestries(挂毯). They could be installed in the completed rooms. Landscaping integrated exotic(外来的,奇异的) plants, hedges, and trees with native flora(植物群落). As William was in his 60’s, he had the insight to know he couldn’t wait for them to grow, but he was optimistic. He ordered tons of fertile topsoil to cover the grounds to a depth of five feet and full-grown specimens of the plants were trucked up the mountain for planting. With thousands of acres of land covered with grassland, trees, natural ponds, and man-made reservoirs available for use, William stocked the estate with herds of rare oxen and deer, and flocks of sheep and lambs. These animals flourished as they were allowed to wander freely. Larger, more dangerous beasts, including tigers, ostriches, buffalo, yaks, emus, kangaroos, llamas, zebras and giraffes were enclosed in the largest private zoo in the world.<br>1919年，他母亲去世，威廉继承了那个他深爱着的25万英亩的牧场。起初，他计划在他最喜欢的宿营地建一所普通的低矮平房，但当他更多地介入这个工程时，建一个纪念馆来展示他的收藏品的想法占了上风。威廉与家庭建筑师朱莉亚?摩根进一步密切协作，创造了一种气派显赫的像城堡一样的结构，整合了西班牙、欧洲和加利福尼亚的建筑风格。在圣西蒙创造了巨大的仓库存放成船的贵重古董，全部雕花的天花板以及用巨大挂毯装饰的墙壁。它们可以安置到已完工的房间里来。把外来的植物、灌木和树木结合进当地的植物种群，进一步美化景观。威廉已经60多岁了，他清楚地知道他可能等不到它们长大，但他是乐观的。他定购了成吨肥沃的表层土，覆盖地面达5英尺深，把这些植物长好的样品用卡车运到山上种植。<br>在可以利用的数千英亩的土地上，有草地、树林、天然水池和人工水库，威廉在庄园里放养了珍稀的牛群和鹿群，还有一群群的绵羊和小羊羔。因为允许它们自由漫游，这些动物健壮而活跃。那些大家伙，比较危险的野兽，包括老虎、鸵鸟、水牛、牦牛、鸸鹋(产于澳洲的大型鸟)、袋鼠、骆驼、斑马和长颈鹿，则被关在这个世界上最大的私人动物园里。<br>The “complex” was ready for occupancy(占有) in 1927, but additions continued until 1947. Eventually it comprised the main house and three cottages, all of which are furnished with a variety of valuable antiques. Even the lavatories were specially equipped. William’s favorite room was said to be the library with its collections of more than 5,000 books, ancient Greek vases, and an antique Spanish ceiling suspended(悬挂的) by cables so it will sway in the event of an earthquake (all the antique furnishings and treasures are anchored as a precaution as this is earthquake country).<br>那座“综合性建筑”在1927年就已经可以使用，但扩建工程一直持续到1947年。最后，它包含了一幢主楼和三栋别墅，每一座的家具配备都使用各种贵重的古董。连厕所的设施都很特别。威廉最喜欢的房间据说是图书室，里面有收藏的5，000多本书籍，古希腊的花瓶，以及一个用缆索悬吊起来的古代西班牙吊顶，一旦发生地震，吊顶就会摇摆(所有的古代家具和珍宝都被事先用铰链固定住，因为这是一个多地震的国家)。<br>In the ‘20s, ‘30s, and ‘40s, William loved part-time at the estate with his mistress, Marion Davies. They entertained to an excessive extent. To be invited to the castle was a privilege. Movie stars, politicians, businessmen, and even royalty(皇室成员) were frequent guests. Many of these guests, including a British lord, Sir Charles Kingsford-Smith, Amelia Ear hart, and Charles Lindbergh, flew to the ranch, landing on the private(私人的) airstrip(飞机跑道).<br>20年代到40年代，威廉时常与他的情人马里恩?戴维斯居住于此。他们待客极尽奢华。被邀请到城堡是一种殊荣。电影明星、政治家、商人，还有皇室成员都是他们的常客。这些客人当中的很多人，包括一名英国的勋爵、查尔斯?金福特?史密斯先生、阿梅莉亚?埃尔哈特、查尔斯?林德伯格，曾直接飞到这个庄园，降落在这里的私人飞机跑道上。<br>Life on the “hill” was never dull. The visitors stayed in the main house or the cottages, depending on their prominence(重要) or their intimacy(亲密) with the family and were free to roam(漫游) the grounds, go riding on their choice of horses on the property. Company was expected, however, to meet in the main drawing room at 7:30 p.m. sharp, principally (主要地) to amuse their host. Dinner was a formal affair beginning at 9:00 p.m. this meal was held in the immense dining room, the walls of which are lined with priceless panels from ancient European cathedrals (大教堂). Following dinner, movies were shown in the private theater, starting at 11:00.<br>“山”上的生活从来都不乏味。来访者按他们的显赫程度或与这个家庭的亲密关系，或住在主楼里，或住在别墅中，在园子里自由散步，去马厩里挑匹马来骑，到水池里去游泳，或者在这块领地上的私人球场上玩高尔夫球。不过，大家还是急切期盼着晚上7点30分在主画室里同主人相见，显然主要是想让他们的主人高兴。宴会是一项正式的活动，在晚上9点开始。这顿饭在巨大的餐厅进行，餐厅墙壁是用来自古代欧洲天主教堂的珍贵的镶板拼成的。饭后，在私人影院上映电影，11点开始。<br>There were, however, three rules guests had to follow: do not get drunk; do not swear or tell off-color jokes; sleep in separate bedrooms if an unmarried couple. Food was not allowed in the rooms. If you wanted to eat, you could visit the kitchen… if you could find it.<br>不过，有三条规矩客人必须遵守：不能醉酒;不能赌咒或开伤风败俗的玩笑;还没结婚的一对恋人要睡在不同的卧室。食物不能带进房间。如果你想吃东西，可以到厨房去……只要你找得到。<br>Although William was closely involved in all aspects of the construction and decoration of the mansion(大厦,宅邸), he continued his business and social interest. No stranger to scandal, in November 1924, he found himself in the topic of headlines. The most enduring rumor was that, during a party on his yacht, he had found Marion kissing Charlie Chaplin. In a fit of jealousy he took a shot at Chaplin, missed, and accidentally his Thomas Ince, killing him. However, even though the morning papers carried the story, the evening paper and successive editions printed that Ince had died of acute indigestion(消化不良).<br>尽管威廉积极参与了这所豪宅的建设和装饰的各个方向，他仍然在继续他的商业和社交活动。对流言蜚语习以为常的他，1924年11月，发现自己上了头条新闻。那是一个流行已久的谣言：在游艇上的一次聚会上，他发现马里恩在亲吻查里?卓别林，他妒火中烧，于是向卓别林开了一枪，偏了，却意外地击中了托马斯·因斯，杀死了他。不过，尽管早上的报纸登载了这个故事，但晚上的报纸和更多的版面就登出因斯死于急性消化不良。<br>In 1945, William initiated the Hearst Foundation and created the California Charities Foundation in 1948 (the name was changed to the William Randolph Hearst Foundation soon after his death in 1951). The Great Depression took its toll on even the wealthiest and William Randolph Hearst was no exception. His fantastically(荒诞的) decadent lifestyle couldn’t last forever, and gradually his finances began to suffer, beginning the next chapter in the saga(传奇) of excesses. He came close to being bankrupt but Marion rescued him from debt, unselfishly selling her jewels and some other property to raise over a million dollars.<br>1945年，威廉建立赫斯特基金会。1948年创立加利福尼亚慈善基金会(在他1951年去世后不久，改为威廉·伦道夫·赫斯特基金会)。大萧条对即使是最富有的人都会带来损失，威廉·伦道夫也不例外。他那种荒诞放纵的生活方式不能再继续下去了，他的财政开始逐渐吃紧。这种放荡生活的下一篇章开始了。就在他行将破产的时候，马里恩在把他从债务中挽救出来。她无私地卖掉了她的珠宝和一些其他的地产，筹集了100多万美元。<br>In 1947, due to his poor health, he was forced to move permanently to Beverly Hills. Marion looked after him during this time, seldom leaving his side. When he died in 1951 at the age of 88, she was shunned(避开) by his family and forbidden to attend his funeral.<br>1947年，由于健康状况恶化，他被迫永久地住在贝弗莉山上。马里恩在此期间一直照顾他，几乎没有离开过他的身边。当他于1951年88岁去世时，她却被他的家庭有意避开，并被禁止参加葬礼。<br>The castle, its furnishings, the artworks in the gallery, and 127 acres of land were given to the state of California in 1957. Since that time, the California Department of Parks and Recreation has kept the castle open to tourists.<br>这座城堡，连同里面的家具设施，走廊里的艺术品，以及127英亩的土地在1957年给了加利福尼亚政府。从那时起，加利福尼亚公园和娱乐部一直把这座城堡向游人开放。<br>Today a visit to the estate begins near the site of the old airstrip. Guests are transported to the top of the hill via bus. One can still see the signs giving wandering animals the “right-of-way” on the lanes. Deer, cattle, and sheep often halt the buses’ progress up or down the mountain as they meander(漫游) to the salt licks.<br>今天游览到这个庄园，起点就在旧飞机跑道所在位置附近。客人们乘巴士到山顶。路上，仍然可以看见让放养的动物们“优先通行”的标示牌。鹿、牛和羊悠闲地在盐渍地舔食时，常常迫使正在行驶的上下山巴士停下来。<br>Depending on the tour one chooses, guides escort(护送,陪同) the public through a variety of rooms, gardens, cottages, and pools. The luxury of a bygone(过去的) era is evident at every turn. From the moment you arrive at the stairway to the Neptune Pool until you bid farewell to your guides at the magnificent, golden and blue Roman Pool, you are reminded that a man had a dream. He had power and influence. Furthermore, he was prosperous enough to achieve his objectives and implement his dream.<br>根据你选好的路线，导游会陪你经过各种房间、花园、别墅和水池。处处显现出昔日的奢华。从到达通向尼普顿水池楼梯的那一刻起，到在金碧辉煌的罗马水池边对导游说再见，你会一直想起一个有梦想的人。他有才能和影响力。而且他曾经飞黄腾达，能够达到他的目的并实现他的梦想。</p><h2 id="5、Yip-Sang-a-Chinese-Canadian-加籍华人阿寿"><a href="#5、Yip-Sang-a-Chinese-Canadian-加籍华人阿寿" class="headerlink" title="5、Yip Sang, a Chinese-Canadian [加籍华人阿寿]"></a><strong>5、Yip Sang, a Chinese-Canadian [加籍华人阿寿]</strong></h2><p>The gold boom in British Columbia in the 1850’s was the beginning of Chinese immigration from the U.S. into Canada. Many of these early immigrants from Fujian and Guangdong provinces to San Francisco. When they heard of the gold discoveries in British Columbia, many crossed the border into Canada by moving overland through Oregon or arriving by sea in Victoria. When the gold deposits were depleted(用尽,枯竭), these early settler stayed, moving into occupations like gardening, farming, domestic service, road construction, and railway building. By 1871, these were approximately 3,000 Chinese inhabitants in the province, only 53 of whom being women.<br>1850年不列颠哥伦比亚的淘金热开始了华人从美国移民到加拿大的历程。在这些早期移民中间，很多人是从福建省、广东省乘船到达旧金山的。当听说在不列颠哥伦比亚发现了金矿，很多人从陆路穿越俄勒冈州，过边境进入加拿大，或者乘船到达维多利亚港。当金矿被淘尽的时候，这些早期的定居者留了下来，转而从事园艺、农业、家政服务、道路和铁路建设等行业。到1871年，这个省大约有3,000名华裔居民，其中只有53名妇女。<br>Since Chinese workers were know to be conscientious and reliable, several companies actively recruited them. As a result, it was estimated that 10,000 workers arrived between 1882 and 1884. In an effort to restrict the entry of Chinese immigrants, an act was passed in the Canadian Parliament confining the proportion to one person for every 50 tons of vessel tonnage(船舶的吨数). A head tax was also imposed. Records of those who paid the head tax are still available for viewing in the National Archives of Canada.<br>因为华人劳工以勤劳守信闻名，多家公司争相雇佣他们。结果，在1882年至1884年期间，估计来了10,000名工人。为了有效地限制华人入境，加拿大国会通过了一项法令，限制每50吨排水吨位只能运载1人，还征收人头税。那些交了人头税的人，其档案至今还可以在加拿大国家档案馆查阅到。<br>An article in the Illustrated London News in January 1875 gave some insight into the emigration process of the Chinese by conveying the ideas of changes they might undergo. The author thought the modifications(修改,改造) would be slight and principally external. He believed that, in an attempt to blend in, the Chinese would adopt American language, culture, and dress. However, because the Chinese brought with them a strong sense of their own identity, it wasn’t necessary for them to cultivate a North American way of life, nor did they feel an obligation to abandon their traditions. Much of the article would be considered insulting by today’s standards.<br>1875年元月刊登在《伦敦新闻画报》上的一篇文章，通过揭示华人一些观念的改变，对移民过程做了某些深层的透视。其作者认为，他们的变化是很小的，而且基本上都是外在的。他相信在努力融入当地社会的过程中，华人接受了美洲的语言、文化和服饰。然而，因为华人总是带有一种对他们自己身份的强烈认同感，要他们养成北美的生活方式是没有必要的，他们也认为没有义务放弃自己的传统。以今天的标准来看，这篇文章的大部分内容可以被认为是带有侮辱性的。<br>In the United States, there were two opposing points of view. On one side of the coin, the Chinese were seen as an inexpensive means of providing the manual labor necessary to develop the assets of the country, most often in hazardous occupations. On the other side, there were those who branded them as the “curse” of the nation. Some Americans applauded the Chinese but others condemned them as evil. Some were disturbed by what might happen if all the immigrants decided to stay. Their distress was unfounded however, as most Chinese had no intention of staying. Their greatest wish was to accumulate as much money as possible and return to China.<br>在美国，存在两种对立的观点。一方面，华人被看成廉价的劳动力，为这个国家的财富积累提供了必要的人力资源，大多数通常从事危险的职业。另一方面，又有人污蔑他们是这个国家的“祸根”。有些美国人赞扬中国人，另一些人则指责他们是恶棍。还有些人忧心忡忡于如果所有移民都决定留下来可能会发生的问题。然而，他们的担心毫无道理，因为大多数华人并没打算留下来。他们最大的愿望就是尽可能地攒钱，然后回到中国。<br>Guilds(行会,协会) were set up to provide lodging and employment for the emigrants, for a fee of course. The fee ensured that the worker would be paid a decent wage and that his employer would not deceive him. The accumulated fees amounted to a large sum, allowing the Guilds to help those who were ill or out of work. They not only saw that the worker received whatever was due to him, they also made him pay all his debts. The worker wasn’t allowed to return to his own country without a certificate from his agent stating he owned nothing.<br>为移民提供食宿和就业的行会建立了起来。当然，这是要付钱的。所付费用可以保证工人得到合理的工资，不受雇主欺骗。会费累积到很大一笔的时候，行会就能够帮助生病或失业的人。他们不仅要注意工人是否得到应得的收入，还要使他还清所有的债务。没有其代理人出具的无欠债的证明，工人是不允许回到自己国家的。<br>Many Chinese were able to save a portion of their earnings to take with them to their family back home. Often, after workers returned to China, they would revisit North America to accumulate more money.<br>很多华人能够存下一部分收入，回家时带回他们的祖国。工人们回到中国后，常常会再次到北美挣更多的钱。<br>Yip Sang, born in Canton(广州旧称) in 1845, left China at the age of nineteen to seek his fortune in America. After arriving in San Francisco in 1864, he earned a living by working first as a dish-washer, then as a cook, and finally as a cigar roller. From the outset, he perceived that if he was patient and could represent the best of his race, his merits would be recognized.<br>Possibly the attraction of high wages rumored to be offered by Canadian railroad companies roused Yip San to leave San Francisco. He arrived in Vancouver in 1881 and worked on the western portion of the Canadian pacific Railroad from 1882 until 1884, first as a book-keeper, then as a time-keeper, and finally as a paymaster(出纳员), before being promoted to Chinese superintendent(主管) for the supply company. The promotion made him responsible for hiring on contract and transporting thousands of men from China to work on the railway line in British Columbia. He supervised(监督,管理) some six to seven thousand Chinese workers during the peak of the construction.<br>阿寿，1845年出生于广东，19岁时离开中国到美国谋生。1864年到达旧金山后，靠打工过活，先是当洗碗工，然后是厨师，最后是雪茄卷烟工。从一开始，他就认识到，只要他有耐心，能够表现出最佳的能力，就会实现他的价值。也许是受传闻中加拿大铁路公司所给的高工资的吸引，阿寿离开了旧金山。1881年他到温哥华。1882年至1884年，他在加拿大太平洋铁路的西段工作。先是做簿记员，然后是记工员，出纳员，最后被提拔为供应公司的华人主管。这次晋升使他负责雇佣合同的事务，他把几千人从中国运送到不列颠哥伦比亚的铁路线上工作。在建设高峰期间，他管理的华工达六、七千人。<br>In 1885, he returned to China using the money he had saved from his CPR job. He remained there from 1885 until 1888, while there he married four different wives, a regular occurrence at the time for wealthy young men. He and his first wife, Lee She, had a son and a daughter. Lee She became gravely(严重的) ill after their marriage and urged Yip Sang to take another wife, one who could be able to take good care of their children. Wong She, Yip Sang’s second wife, was very young with “sensitive” eyes, but did not meet with the approval of Lee Shee. She insisted he should marry third time, and this time choose someone more suitable to care for the children. Dong She, wife number three, was more mature and had the capacity to supervise the household and the children. Dong Shee convinced Yip Sang to take a fourth wife, Chin She, whose primary role was to be Dong She’s companion. With his four wives, Yip Sang had 23 children, one of whom became the first Chinese Canadian doctor to be recognized in Canada. In 1888, Yip Sang returned to Canada with three wives——Lee She died before they left.<br>1885年，他用在加拿大太平洋铁路公司挣的钱回到中国，并从1885年住到1888年。在那里，他娶了四个妻子。那时，对富有的年轻人来说这种情况很普遍。他和他的第一位妻子李氏有一个儿子和一个女儿。李氏在婚后得了重病，力劝他再娶一位妻子，以便照顾他们的孩子。他的第二位妻子汪氏，很年轻，有一双“多情”的眼睛，但却得不到李氏的认可。她坚持要他再结第三次婚，这次一定会选一个能够照顾孩子的。第三位妻子董氏比较成熟，有能力管理家务和照顾孩子。董氏又说服他要了第四位妻子金氏，她的主要角色是董氏的帮手。他与他的四个妻子有二十三个孩子，其中一个成为加拿大知名的第一位加籍华人医生。他和他的三个妻子于1888年回到加拿大——李氏在他们走之前已经去世。<br>On his return to Canada he undertook a new enterprise. He became a merchant, opening an import-export business in the heart of Vancouver’s Chinatown. Wing Sang Company specialized in goods imported from China. The company provided Chinese Canadians with merchandise(商品) not readily available in Vancouver and exported Canadian foodstuffs(食品) to China.<br>这次回到加拿大，他创办了一家新企业。他成了一位商人，在温哥华唐人街的中心地段开了一家进出口公司。Wing Sang公司的业务是从中国进口货物。该公司为华裔加拿大人供应在温哥华不容易买到的商品，并把加拿大的食品出口到中国。<br>His formula of pouring as much money as he could afford into building and expansion couldn’t help but succeed. In 1889, Yip Sang bought land on Pender Street in Chinatown and began construction of a complex, which still stands today. Initially(最初) being a two-story building with a ground floor storefront and a second floor residence, it was probably the first in Chinatown to be built of durable brick. Customers of the store walked on wooden platforms covering the unpaved dirt streets to avoid tracking the dust and mud into the building.<br>他倾其所有投资房地产的方式和扩展经营的方法大获成功。1889年，阿寿在唐人街的彭得街买地，开始建一座综合大楼，这座大楼至今犹在。最初是一座两层大楼，一楼作店面，二楼住人，这也许是唐人街上用耐用砖建造的第一座楼房。顾客进商店前，要走过铺在土路街上的木板平台，以免把灰尘和泥土带进屋里。<br>With the tone of success, Yip Sang added to his building. In 1901, he widened the street to accommodate three more shops, each with a second story above. He also added a third floor to the original building in the same year. In 1912, to house both his growing family and his business, he built a new six-story brick building behind the old one and connected to it by a narrow corridor at ground level, and by an enclosed stairway extension on the third floor that stretched above the alley between the two buildings. Most of the new building was used to warehouse goods for the import&#x2F;export business.<br>伴随成功的步伐，阿寿扩建了他的房屋。1901年，他加宽了街道以适应另外三个商店的需要，每个都是两层的。同年，他在原来的房屋上加了第三层。1912年，为满足不断增长的家庭和事业的用房需要，他在旧房子的后面建了一座六层的砖房。两座房屋之间的地面有个狭小的走廊相连，在三楼上架设了一个跨过两座楼之间小巷的楼梯。大多数房间用于储存进出口货物。<br>Yip Sang’s involvement(卷入) with shipping companies and his own business demonstrated his understanding of the freight industry and his ability to work fluently in both Chinese and English languages. In 1889, the CPR rehired Yip Sang to act as their Chinese Passenger Agent for their Canadian Steamship Line, a position he held until his death in 1927 at the age of 82.<br>阿寿与船运公司的联系以及他自己的事业，展示了他对运输业的了解和熟练使用汉语和英语工作的能力。1889年，加拿大太平洋铁路公司再次请他担任加拿大轮船公司的华人旅客代理。他担任这个职务一直到1927年82岁去世时为止。<br>The demand for salted herring(鲱鱼) in china, in conjunction with huge catches being brought in by the fishing fleet, spurred Yip Sang to build a fish packing plant in Nanaimo. The success of this plant led to the opening of a second plant on Vancouver Island soon afterward. Both plants were staffed by large numbers of Chinese workers and helped establish sizeable(相当大的) Chinese community in Nanaimo’s downtown core.<br>对中国咸鲱鱼的大量需求，再加上渔船船队带回来的巨大捕获量，促使阿寿在南奈莫建立了鱼片加工厂。这个厂的成功又促使他不久就在温哥华岛开了第二家。两个厂雇佣了大量的华工，帮助在南奈莫城中心建立了一个很大的华人社区。<br>Consistent with Yip Sang’s devotion to growth and improvement, he promoted and fostered(支持) education. Not only did he found the Ok Kuo Night School, he also served as its principal for over ten years. His children went to public school, but they also received schooling at home from tutors hired from Hong Kong to teach them Chinese. Yip Sang took great pleasure in quizzing his offspring(子女,后代) about their lessons. His philosophy was that by moderating the children’s Canadian education with fundamental Chinese, the equation would result in well-rounded, responsible citizens.<br>与对事业发展壮大的投入相一致的是，阿寿支持和鼓励教育。他不仅建了Ok Kuo夜校，还担任这所学校的校长达十多年。他的孩子们进的是公立学校，但他们在家还要接受教育。他从香港雇来家庭教师教他们汉语。阿寿以极大的兴致关心孩子们的学习。他的哲学是，把基础汉语加入到孩子们的加拿大教育中，综合起来将培养出更全面、更负责的公民。<br>As a keen advocate of education in Canada, Yip Sang also sponsored education abroad in China. The ling-nan University and Toi-shan Middle School in his hometown of Canton were established with his help.<br>作为一个加拿大教育的热心倡导者，身在国外的阿寿还赞助中国的教育。他家乡广东的Ling-nan大学和Toi-shan中学就是在他的帮助下建立的。<br>Throughout his life, he maintained an active role in Vancouver’s Chinatown. He was one of eleven men, his contemporaries, who founded the Chinese Benevolent(慈善的) Association, one component of which looked after the ill, elderly or destitute(贫困的) Chinese in the absence of their families.<br>纵观他的一生，他始终是温哥华唐人街里的活跃人物。他是当时一起建立华人慈善协会的十一个人之一，协会有一个部门是照顾无家可归的生病、年迈或有困难的华人的。<br>When he died at the age of 82, Yip Sang was not only one of the wealthiest merchants in Vancouver; he was also considered a pillar of the community. Yip Sang’s descendants(后裔,后代) continue to honor his values and remain active in the Vancouver Community.<br>在他82岁去世的时候，阿寿不仅是温哥华最富有的人之一，还被认为是社会的栋梁。阿寿的后代一直以他的成熟为荣，继续在温哥华社会中发挥着积极的作用。</p><h2 id="6、An-Ideal-Position-理想职业"><a href="#6、An-Ideal-Position-理想职业" class="headerlink" title="6、An Ideal Position [理想职业]"></a><strong>6、An Ideal Position [理想职业]</strong></h2><p>Life is good. My career in elementary education in Canada is now just a fond memory. I think back on the many years of service and I recall the many classed I taught, the different schools I worked at, the countless staff meetings I attended and the many committees I served on. I estimate that the number of faculty members I worked with over the years is in the hundreds and well over a thousand students have called me teacher. Is it any wonder that I can say that I always felt comfortable walking in school corridors?<br>生活是美好的。在加拿大教小学的职业生涯，如今成了美好的回忆。回顾多年的工作，我想起了我教的许多班级，我工作过的多所学校，我出席过的数不清的教职员工会议，以及我参与服务的众多委员会。我估计，这些年来，和我一起工作过的同事有好几百人了，而有一千多名学生叫过我老师。我要是说我走在学校走廊上总是觉得很愉快，没什么奇怪吧?<br>Sometimes I worked with students at the intermediate level. In Canada, students at that level are youth in their preteen(青春期前的) years as well as teenagers. When I decided to retire, I knew that the first step in the procedure was to write a letter to my employer, a school board, to resign my position. I postponed mailing the letter. I was reluctant to add the postage to the letter, knowing that once I mailed it, the decision could not be reversed.<br>有时，我的工作是教中年级的学生。在加拿大，这个阶段的学生和十几岁青少年都是青春期前的孩子。<br>当我决定退休的时候，我知道办手续的第一步是写一封信给我的老板，即学校董事会，要求辞去我的工作。我推迟了寄信。我不太愿意把邮票贴到信封上，因为我知道一旦把信寄出，这个决定就不能更改了。<br>Because I was a veteran teacher of many years, I would be eligible to receive a pension. I calculated that the revenue(收入) I would receive each month would be sufficient to sustain my current lifestyle. If I was smart about my spending habits, I might even have a surplus of money. I certainly would not need to pinch every penny. I knew the money would not come to me in the form of a check. Instead, it would be deposited directly into my bank account. I could withdraw cash from my investments if I needed to supplement my income, my credit rating would allow me to be eligible for a loan when some unforeseen(预料不到的) financial crisis a rose. I knew, therefore, that there was no reason to panic, as my future was secure even if inflation increased or a recession occurred. In either case my income would only be minus a few dollars, a fraction of the total amount.<br>因为我是工作多年的老教师，我有资格领取一份退休金。我算出我每月领到的退休金足够维持我现在的生活方式。如果在花钱时精打细算，我甚至可能还有剩余。当然，我不需要去节省每个便士。这些钱不会以一张支票的形式发到我手上，而是直接存入到我的银行账户。如果我需要补贴收入，可以撤回一些投资换成现金。而且，我的信用等级使我有资格在出现无法预料的财政危机时得到银行贷款。因此，我知道没有理由惊惶失措，即使是通货膨胀或者出现经济衰退，我的将来也是有保障的。不论出现哪种情况，我的收入只不过是减少这些钱，那只是总数中的一小部分而已。<br>I decided to take the plunge, but waited another fortnight before I mailed the letter. I even paused briefly(简短的,暂时的) with the letter part way into the mail slot(投信口,狭缝) before I thrust the letter into the mailbox. I knew that the simple act of mailing that letter would alter my life.<br>我决定冒险一试，但我又等了两个星期才把信发出去。甚至在信已经部分插入投信口时，还犹豫了一会儿才把它推进邮筒。我知道寄出这封信的这一简单举动将改变我的生活。<br>I looked for clues to determine how striking the changes in my daily life would be. How would I spend my time? In spite of having many long yearly vacations when I could pursue other interests, I had not bothered to make an earnest effort to confine my activities to one particular hobby. Would I find life as a retiree boring? What new adventures might await me? Would I use my time to volunteer at a hospital or maybe work for a local charity? Maybe I would apply for membership in a golf league. Maybe I would donate(捐赠) my time and work with the Better Business Bureau. I night decide to enter local politics and run for a position on town council or I could run for the position of Deputy Mayor of my town, or maybe even consider submitting my name to be a candidate in an election for member of parliament(国会). I would need to campaign and then wait to see if people would vote for me on Election Day at the polls.<br>我在寻找一些线索，以便决定如何就会日常生活的改变。我该如何消磨时光?尽管有了很多一年一次的假期，可以让我追求其他的兴趣爱好，我还是想尽力把我的活动放在追求一个特别的爱好上。我会厌烦退休人员的生活吗?会有什么新的冒险生活在等着我吗?我会利用我的时间在一所医院或者本地的一家慈善机构做自愿服务者吗?也许我会申请成为一个高尔夫球协会的会员。也许我会把时间贡献出来为商业扶助局工作。我可以决定进入本地的政界，竞选市议会议员的位置，或者可以竞选一下本市的副市长，甚至可以考虑让自己成为国会议员选举中的一位候选人。我需要参加竞选活动，然后，等着看是否有人会在选举日到投票处把票投给我。<br>In spite of the fact that the possibilities all had merit, I had to admit that I only had a superficial interest in pursuing any of them. In fact, I was indifferent to most of the options. Did I think they might interfere with other commitments(义务,委托) or mean I would have to cancel other appointments? Or was I just too attached to the idea of teaching, feeling that it formed part of my identity?<br>尽管这些可能的选择都是有益的，我必须承认我对它们之中的任何一个都没有多大兴趣。事实上，我对其中的大多数选择都不动心。是否因为我认为它们可能干扰我决定要做的其他事情，或者意味着我将不得不取消其他的约会呢?还是我对教书的想法太执着，觉得那已经成为我自身的一部分?<br>I examined my emotions about the new direction my life would take. Would retirement add a new dimension to my life and multiply my feeling of satisfaction or would the world apprehension(理解,领悟) be more applicable?<br>我在心里仔细衡量着我的新生活究竟要走向何方。是退休给我的生活带来一种全新的方式，使我倍感称心呢，还是(走出去与人)沟通交流更切实可行?<br>Did I feel guilty about not being gainfully(有利益的) employed when I was qualified and capable? As a certified(被证明的) teacher, did I feel obligated to work in the field of education? Did I feel entitled to sleep in late each day, or would that bother my conscience? Would I simply grow old gracefully or would feel that ridiculous?<br>当我够资格有能力但没被高薪聘用时，我会觉得惭愧吗?作为一个有执业资格的教师，我是觉得有义务在教育领域里工作吗?我觉得有资格每天睡懒觉呢，还是那样会使我良心不安?我是这样悠闲地衰老下去呢，还是会觉得那样很可笑?<br>My instincts told me that although I would feel grateful for my good health, curiosity about other countries and lifestyles would overtake the desire to spend my time with senior citizens, playing board games, such as chess all day. Wouldn’t I rather learn about other cultures and at the same time be an ambassador for my own country?<br>我本能地告诉我，尽管我觉得身体很健康，应该保持，但对其他国家和其他生活方式的好奇心，超过了希望把时间花在与老人们整天玩像国际象棋这样的棋盘游戏上。难道我不能学习其他文化，同时做一名我自己国家文化的使者吗?<br>I began to inquire about opportunities and whenever I searched the internet for jobs, I always seemed be drawn like a magnet to the category of teaching. It did not take long before I found that there were countless positions available in many countries. Amid the listings I identified several that were for teaching positions in China.<br>我开始寻找机会，每当我搜索互联网寻找工作时，我总是像一块磁石一样被吸引到教学目录上。没过多久，我就发现在许多国家可以得到数不尽的工作。在这些目录表中，我挑选了几个在中国的教书工作。<br>I decided that I would communicate with some of the people offering these positions. I sent e-mails and made phone calls to several prospective(可能的,未来的) employers. The feedback that I got from most of them was that they expected me to bring all the resources necessary. How could I pack enough in my baggage to provide what was needed? I was inclined to look for a situation where books were provided. I wanted to sign a contract for only one semester but found that most positions were for one or two years. I could sympathize with the amount of paper work needed to arrange for a person to accept one of those positions and realized that it was wiser for people to spend a year or two in one location. I attended seminars by companies trying to recruit teachers. I found several companies that captured my interest.<br>我决定与提供这些工作的人联系。我给几个有希望雇用我的雇主发电子邮件，打电话。他们中的大部分回答说，他们希望我带上所有必需的资料。我怎样才能在我的行李中装上足够的东西以备所需呢?我倾向于找一个能提供书籍的地方。我只想签一个学期的合同，但发现大多数的职位是一年或二年。我可以理解，要安排一个人担任其中一个职位，要做的工作量相当大，并认识到受聘人员在一个地方呆一年或两年是更明智的。我参加了想招聘老师的公司的讨论会。我发现了几个我感兴趣的公司。<br>I began to review my options. I asked specific questions about the positions with companies that sincerely interested me. I inquired about how many suitcases I would be allowed to bring and what the living accommodations would be. It was refreshing to realize that there was a big demand for people who could teach English. Several positions seemed superior in their benefits and they sparked my interest even more. I especially wanted to teach students at the secondary or high school level rather than middle school.<br>我开始核实我的选择。我向真正对我感兴趣的公司问了几个特定的有关职位方面的问题。我询问我可以带多少个手提箱，食宿条件如何。了解到对教英语的人有这么大的需求，真是令人振奋不已。有几个职位在待遇方面好像不错，这更加激发了我的兴趣。我特别想教的是高中而不是初中。<br>I could hardly believe that I was contemplating(盘算,思量) dong this at this age of my life. At times I felt that it was a radical idea but I also realized that I had always had the desire to have this kind of experience but circumstances never seemed quite right. Now they were. I decided to proceed.<br>我几乎不相信在我一生中的这个阶段还希望做这件事。有时，我觉得这是一个过激的想法，但是我也知道我一直有想获得这种经历的欲望，只是环境从来没有这么合适。现在是时候了。我决定坚持下去。<br>I made an oral agreement with a company. I read their written contracts, clause by clause; to be sure nothing had been omitted from the oral agreement. In spite of wanting the clause about staying two years to be deleted, I signed the legal contract after a few minor changes were made and initialed in the margin.<br>我与一家公司达成了一个口头协议。然后我一条一条地读了他们的书面合同，确信没有从口头协议中漏掉什么。尽管很想删掉关于工作二年的那一条，但在做了一些较小的变动后，我签了法律合同并在页边签字。<br>There were many details to consider. After choosing the company that I wanted to work for, I still had to take a long time look at my circumstances. I decided that I would sell my car, put my personal belongings in storage and rent my house. A lot of time and effort was required to make all the arrangements. I decided to tackle(解决) one aspect at a time.<br>还有很多细节要考虑。在选定了我要去工作的公司后，我还花了很长时间认真地考虑我现在的状况。我决定卖掉我的汽车，把我的个人财产保存好，并把我的房子租出去。做好所有这些安排要花许多时间和精力。我决定一件一件来处理。<br>The first thing I targeted was to sell my car. As a matter of principle, I felt that the value of the car would depreciate(贬值,跌价) over the time I was out of the country. The sensible strategy was to sell it. Fortunately, my niece wanted to buy the car.<br>我要做的第一件事是卖掉我的汽车。事实上，我觉得在我出国这段时间里汽车会贬值，明智的办法就是卖掉它。正好，我的侄女想买这辆汽车。<br>I made a list of things to take with me. I was advised to take auxiliary light. I packed battery-operated flashlights to be used to case of power failure. I included a waterproof jacket in case I needed to walk to school in the rain.<br>我列出了一个我要带走的物品的清单。有人劝我带上辅助照明设备。我在包里装进了使用电池的手电筒，以备万一停电时使用。我也没忘带上一件防水夹克，以防下雨时需要步行。<br>I needed to sort my belongings. I had to decide what to save and what to pitch out. For example, I decided I no longer needed my typewriter, as I only used my computer for word processing now, so I decided to give it away.<br>我需要的把我的财产分类。我必须决定哪些东西保留，哪些东西扔掉。例如，我决定不再需要打字机了，因为现在我只用计算机作文字处理，于是我决定把它赠送给别人。<br>I made many lists and developed a cold as a way to catalogue my possessions. As I packed items in cardboard boxes, I made a list regarding the contents on the outside of each box. I packed dishes in towels to protect them. Many times I had to undo a box because I forgot to list the contents. When I finally snapped the lid of a box shut, I sealed it with transparent tape and checked to be sure that it would not loosen. I also included another tag, which gave each box a number because all cardboard boxes look identical. I was careful not to abbreviate(缩写) the names of items in the lists lest that would mislead me as to the contents. I continued with this method, which also created an index of items. It seemed the rational way to coordinate and organize things. I remarked many times during this phase of my preparations that I had not realized I had so much gear.<br>我做了许多目录，还作了编码，作为对我的东西进行分类的一个办法。当我把这些物品装入纸板箱时，在每个箱子的外面，我再作一个所装物品的目录。我用毛巾把盘子包起来保护它们不会破碎。有很多次，我因为忘记列出所装的东西而不得不再次把箱子打开。当我在最后啪嗒一声关上箱子盖子的时候，我就用透明胶带把它封好，并进行检查，确信它不会松动。我还准备了另一个标签，为每个箱子编一个数字，因为所有的纸板箱看上去是一样的。我很小心，不在目录中缩写每一件的名字以免使我认错里面的东西。我继续使用这个方法，还编制了一个物品索引。看来这是一个组织协调的合理方法。在准备期间，我多次感叹，我怎么会有这么多杂物。<br>At times I had to laugh at myself. My activities seemed like they would make a good script for a comedy. Maybe I should write a play about what I was doing and copyright it. It certainly would be good for a few scenes on a soap opera.<br>有时，我不得不自我解嘲。我的活动好像可以作为一出喜剧的好素材。也许我应该把我正在做的事情写成一个剧本并取得版权，作为一出肥皂剧里面的几幕肯定是不错的。<br>On the spur of the moment I decided to loan my sofa and my rug to my niece who was moving to a larger home. That would mean a few less things to put into storage. I fulfilled my obligation to provide proof of good health. I had a chest x-ray taken. I had a complete physical examination. I had dental check up. Because my health reports all indicated I was in excellent health, all of the health care professionals I visited encouraged me to pursue my adventure. I renewed my passport, my proof of identity as a Canadian citizen. I knew that once I arrived in China I would also be registered with the Canadian Embassy.<br>我不假思索地就决定把我的沙发和我的小地毯借给我的侄女，她就要搬到一个较大的家了。这意味着可以少储藏几件东西了。我履行了提供身体健康证明的义务。我作了X光胸透，还作了一个全面的体检，并且检查了牙齿。因为所有的健康报告都表明我身体很好，我拜访过的那些保健专家都鼓励我去从事我的冒险活动。我延长了护照的期限，那是确认我是一个加拿大公民的证明。一旦抵达中国，我要在加拿大使馆登记。<br>My family’s reaction when I told them about my plans was as expected. Although they sanctioned my idea and supported me the endeavor(努力,尽力), they were sad to think that I would be half way across the world for such a long time. The frown on my grandson’s face told me that the situation would be especially difficult for him and that he might feel neglected by me.<br>当我把我的计划告诉我的家人时，他们的反应和我预料的一样。虽然他们同意我的想法而且尽力支持我，但想到我要横跨半个世界，离开如此长的时间，他们还是有点难过。我孙子眉头紧锁的表情告诉我，他尤其难过，他可能觉得我忽视了他。<br>Although I could scarcely argue with the comments of my family about their feelings, for their sake I talked about the time away from home as if it was just a few short days. I would be backing home before they knew it. They suggested that I come back after one year for the summer and then return for the second year. I agreed to this plan.<br>对于我家人的担心，虽然我不用就他们的意见进行解释，但为了让他们放心，我说这次离家的时间就好像只是短短几天罢了，不知不觉我就回家了。他们提议我在一年之后回来过夏天，然后再返回去继续第二年的工作。我同意了这个计划。<br>Five years ago, would I have thought that this was in the realm of possibility? I doubt that I would have. But here I am in China, in my second year of living in this amazingly progressive civilization, and I can honestly say that I have never once regretted my decision to teach in China. I must also admit that I have learned far more from my students than they have learned from me. I admire their thirst for knowledge and they seem to thrive on challenges. They never seen tempted to take a short cut, always working hard and giving a supreme effort. Their tolerance for their English teacher’s lack of familiarity with Chinese customs has been appreciated. They always are positive in their attitudes toward me and have helped me whenever they could. At times they have insisted on doing things for me that was capable of doing myself. It has become a habit to surrender to their wishes to assist. One student in particular always takes on the job of carrying my packages, saying that it is his pleasure to be my porter.<br>在五年前，我会想到这是可能的吗?我想我不会。但是，现在我就在另，已经是在这个正以惊人的速度前进的文明国度里的第二年了。我可以真诚地说，对于在中国教书的决定，我从不曾后悔过。我还得承认，我从学生们那里学到的东西，远多于他们从我这里学到的。我钦佩他们对知识的渴望，他们含金量在挑战之中成长。他们从不设法走捷径，总是刻苦学习，付出最大的努力。他们对他们的英语老师对中国习俗缺乏了解的宽容，值得赞赏。他们总是以肯定的态度待我，并且尽可能给我帮助。有时，他们要坚持为我做我能够做的事。满足他们要帮忙的愿望已经变成一个习惯了。有一个学生很特别，总是干帮我提包的事，说他很高兴当我的搬运工。<br>When I started to plan this adventure I had only a vague idea of what the country of china would be like. I could recognize their flag but was not even familiar with their national anthem(国歌). My comprehension of the customs of the country was very limited I felt almost ashamed at how little I knew. I did not know if they used the metric or the imperial(英制的) system of measurement. Would I buy fluids such as milk and soda in quarts or liters? Would I need to learn the Chinese word for gram or for inch? Indeed I had never heard the word ‘jin’ before.<br>当我开始计划这次冒险时，对于中国到底是个什么样子，我只有一个模糊的概念。我可以认出他们的国旗，但还不熟悉他们的国歌。我对这个国家的习俗的了解也非常有限。我觉得惭愧得很，我知道得太少了。我不知道他们是用公制还是英制单位。我要按夸脱还是按升去买牛奶和苏打等液体商品?我需要学习表示“克”或“英寸”的中国字吗?的确，我以前从未听到过“斤”这个字。<br>I knew little about the food I would be eating. Would dairy products such as skim milk and cheese and yoghurt(酸酪) be available? Would I eat only rice and noodles or would the variety of foods be endless? May be I would be enjoying a rack of lean pork ribs as a delicious treat.<br>I was unaware that there were so many dialects in the Chinese language. I had no idea how I would communicate but when I arrived in china, I soon found myself having a limited dialogue with Chinese people. They would try to speak a few words of English and I would attempt a few words in Chinese. However, I resorted to sign language more than words.<br>对于我将要吃的食品，我知道得很少。可以买到像脱脂牛奶、乳酪和酸酪这样的奶制品吗?我只能吃米饭和面条，还是有各种各样的食品?也许我能享受到作为美味款待的烤瘦肉猪排。我不知道汉语有这么多方言。我一点儿不知道如何进行交流，但是当我抵达中国后，很快发现我自己可以和中国人进行有限的对话。他们常常试着说几句英语，而我就尝试几句汉语。不过，我借助手势语的时候超过口语。<br>How much I have learned! It has been a wonderful, rewarding experience and the one comment that comes to my mind is “I wouldn’t have missed it for the world!”<br>我居然学了这么多!这真是一次令人愉快的、十分有益的经历。这使我想起了一句话，就是“无论如何我没有错过它!”</p><h2 id="7、A-History-of-Christmas-圣诞节的历史"><a href="#7、A-History-of-Christmas-圣诞节的历史" class="headerlink" title="7、A History of Christmas [圣诞节的历史]"></a><strong>7、A History of Christmas [圣诞节的历史]</strong></h2><p>Christmas is the most cheerful and holy of holidays in the Christian world, which boasts of an estimated 1.8 billion people. Although the origin of this holiday was purely religious, it has evolved into a highly secular(长期的,世俗的) celebration each year. However, strong religious components are still conveyed in various ways each year. The two are intrinsically(本质上的,完全的) mixed in the midst of modern commercialism(商业主义) and attached to.<br>圣诞节是号称有大约18亿教徒里的基督教世界里最愉快、最神圣的节日。尽管这个节日的起因纯粹是宗教性的，但它已演变成了每年的非常世俗化的庆祝活动。不守，纯粹宗教性的部分每年还是在以各种方式进行着。二者在现代重商主义中，很自然地融合在一起。<br>Christmas day fall on December 25th each year, celebrating the birth of Jesus Christ, the son of a carpenter living over two thousand years ago. Christianity(基督教), the movement following the teachings of Christ, roused the world over the next many centuries. It is said that the first celebration of Christmas took place in 336 A.D. in Ancient Rome. No one seems to know for sure if December 25th was actually the date of Christ’s birth, but it is possible that Christian leaders in Ancient Rome wanted to replace pagan(异教的) religious holidays that occurred around the same time.<br>圣诞节时值每年的12月25日，是耶稣基督的诞生庆典，他是两千多年前的一个木匠的儿子。基督教，这场追随基督教义的运动，在接下来的几个世纪里影响了全世界。据说，圣诞节的第一次庆祝活动是在公元336年的古罗马举行的。好像没有人能肯定12月25日就是基督的实际诞生日，而更有可能的是，古罗马的基督教领导人想要以此取代几乎同时举行的异教徒的宗教节日。<br>Many secular symbols of Christmas have emerged over several centuries. Santa Claus, in his present form, is a fairly recent development whereas his origin, in part, goes back to Roman times.<br>St. Nicholas was an early Christian Bishop (主教) of Patara of the Lycian seaport (in present-day Turkey) in the 4th century A.D. The Roman Emperor Diocletian, who persecuted Christians, imprisoned(监禁,关押) him because the practice of Christianity was illegal. The first Christian Emperor of Rome, Constantine, later released him. Nicholas’ reputation for generosity(慷慨,大方), kindness and miracles earned him a widespread reputation and eventually sainthood(圣徒). He is said to have brought back life to the children who had been chopped into pieces by their butcher father. He is reputed to have placed some gold coins in stockings, hung by a fire to dry by three poor girls. He had hoped that the girls would be able to use the money to marry to avoid living on prostitution(卖淫), the common destiny(命运) of such girls at that time. From this gesture came the tradition of empty oversize(特大的) stockings hanging on fireplaces at Christmas time for Santa to fill with little gifts. From these roots, the present-day Santa Claus seems to have emerged.<br>圣诞节的很多世俗象征已经出现好几个世纪了。现在这种形象的圣诞老人，可以说是最近才出现的。然而，他的起源却可以部分追溯到古罗马时代。圣·尼古拉斯是公元4世纪时利西亚海港的帕塔拉(在现今的土耳其)的一个早期的基督教主教。迫害基督教徒的罗马皇帝戴克里以非法宣扬基督教的罪名把他关进了监狱。后来，罗马的第一位信仰基督教的皇帝康士坦丁释放了他。尼古拉斯的慷慨、仁慈和圣迹为他赢得了广泛的声誉，最终被尊为圣徒。据说，他恢复了被他们那屠夫父亲砍成碎片的孩子们的生命。还说他在三个可怜女孩挂起来用火烘烤的长袜子里放了一些金币，希望这些女孩能用这些钱结婚，以免沦为妓女，而在那个时代，这种女孩的命运大多就是这样。在圣诞节，把特大号的空长袜挂在壁炉上面让圣诞老人放一些小礼物的传统，就来自这个故事。根据这些传说，现代的圣诞老人的形象似乎显现出来。<br>In some European countries, the image of Father Christmas is identified more closely with Saint Nicholas than with Santa Claus. The red and white suit, that Santa wears, is said to have come from the traditional color of early Christian Bishops’ robes. Santa, flying in a sleigh(雪橇) pulled by reindeer(驯鹿), and going down chimneys, originated(起源) from an American poem written in the 1820’s, another American made an engraving(雕刻术) called “Santa’s Workshop” in which Santa, is portrayed(描绘,描写) in a lovely sunset, scratching his chin, reading letters and checking a list activities which was revived(复苏,苏醒) every year in music and stories told to children during the yuletide(圣诞季节) (Christmas) season. Every year children write letters to Santa Claus before Christmas, asking him to bring favorite toys.<br>在一些欧洲国家，圣诞老人的形象更多的是与圣尼古拉斯联系在一起，而不是与Santa Claus联系在一起。圣诞老人穿的红白相间的服装，据说是来自早期基督教主教的长袍的传统颜色。在驯鹿拉的雪橇上飞翔、从烟囱里下来的圣诞老人，源自19世纪20年代克莱门特·摩尔写的一首美国诗“圣诞节的前夜”。19世纪60年代，另一个美国人制作了一幅版画，叫做“圣诞老人的作坊”，上面的圣诞老人被描绘成在美丽的落日余晖下，挠着下巴，读着信，检查一份清单(每年在圣诞节以音乐和故事的形式反复告诉孩子们的各种活动都列在这份清单上)。每年，孩子们在圣诞节之前给圣诞老人写信，请他带来他们最喜欢的玩具。<br>Santa traditionally navigates(航海) the frosty night skies December 24th without using a compass or a chart to plot his course. He, in his sleigh pulled by nine reindeer, usually lands on slippery sloped roofs. Clumsily(笨拙的), with his big bag heaped with toys and slung(用带吊挂) over his shoulder, he jumps down chimney and dumps toys under Christmas trees. Gifts often include a doll for a little girl or a train for a little boy. He does all of this without disturbing the inhabitants. Santa then crawls vertically back up the chimneys and, without a trace, flies off, exclaiming the resounding phrase, “Merry Christmas to all, good night”. He is back at his home at the North Pole before dawn on Christmas morning, tired but very happy after his very speedy sweep around the world. After a big yawn, Santa falls asleep.<br>根据传说，圣诞老人在12月24日深夜，在寒冷的夜空飞翔，不用使用指南针或者地图来计划他的路线。他坐在由九头驯鹿拉着的雪橇上，在通常很滑的斜屋顶上降落。他笨拙地扛着一个装满玩具的大口袋，从烟囱里跳下来，把玩具倒在圣诞树下。礼品中常常有送给小女孩的一个洋娃娃，或送给小男孩的一辆小火车。他无声无息地做着这一切，然后垂直向上从烟囱里爬回去，不留一点痕迹，飞走时大声地说着那句人们熟知的话：“祝大家圣诞快乐，晚安”。在圣诞节清晨破晓之前，他回到在北极的家里。在全世界快速飞奔了一夜，很疲倦却非常愉快。打了一个大呵欠后，圣诞老人就睡着了。<br>Christmas carols(圣诞颂歌), or Christmas religious songs, began in the middle Ages when people danced and sang religious songs on village greens (central gathering areas in small towns and villages) in Anglo-Saxon England. A Christmas carol today is a religious tune without the dance associated with it.<br>圣诞节颂歌，也叫基督教宗教歌曲，始于中世纪时期。那时，在盎格鲁撒克逊人的英格兰，人们在乡村草地上(小镇或村庄的聚集中心)跳舞，唱宗教歌曲。今天的圣诞节颂歌只是一道宗教曲子，没有与之相配合的舞蹈。<br>A strong religious tradition today, as in other times, is to go to church at midnight of Christmas Eve or on Christmas morning. A priest may say mass (in a Catholic[天主教的] Church) or preach(宣讲教义) a sermon(布道) about the significance of the birth of Christ.<br>今天的一项强烈的宗教传统，像其他时期一样，是在圣诞节前夕午夜或圣诞节早晨去教堂做礼拜。牧师可能作弥撒(在天主教堂)或者布道宣讲救世主诞生的重要性。<br>Another very prominent symbol of Christmas is the Christmas tree. There are several explanations for its origin. One story suggests that Martin Luther was walking through a wood on a clear winter night admiring the beauty of the bright stars glowing through the branches of trees. He decided to cut down a small evergreen tree and take it home. He put candles in it to represent the stars he had seen earlier because he wanted to share that beautiful image with his family.<br>圣诞节另一个显著的象征是圣诞树。关于它的起源有好几种说法。有一个故事说，在一个清冷的冬季夜晚，马丁路德走过一个树林，十分惊羡明亮的星光洒过树枝的美丽。他决定砍下一棵常青树带回家。他在树上放上蜡烛代替他看到过的星星，因为他想与家人一起分享那美丽的景色。<br>Another story tells of the bringing of an evergreen tree inside the home during winter solstice(至日,至点) (December 21st) symbolizing the renewal(复活,复兴) of life in the dead of winter. It became associated with Christmas, which occurs only four days later. The Christmas tree was firmly established as a Christmas symbol by the Germans who eventually brought it to America. In Victorian England, people hung cakes and candies on it and later, fruit made of paper adorned(装饰) the branches. Modern commercial tree decorations appeared in the 1880’s at Woolworth’s Department Store in the United States, and electric Christmas tree lights made their debut(初次登场) in 1882.<br>另一个故事讲的是，在冬至(12月21日)这一天，把一棵常青树搬回家，象征着在死寂的冬天生命的复苏。把它与圣诞节联系在一起，只因刚好四天之后便是圣诞节。德国人把圣诞树确立为一种圣诞节的象征，后来又将之带到了美国。在维多利亚女王时期的英格兰，人们把蛋糕和糖果挂在树上，以后，又用纸做的水果装饰树枝。现在商店卖的圣诞树装饰品出现在19世纪80年代美国的伍尔沃斯百货商店，而圣诞树上装彩灯则始于1882年。<br>The first Christmas cards were sent in the 1840’s in both England and America. Gift giving probably stems from the Bible where it is written that three kings, bearing gifts from the Orient(东方), visited Bethlehem when Jesus was born. We know that St. Nicholas also gave gifts. A later tradition developed, whereby gifts were given on each of the twelve days of Christmas, from December 25th, when Jesus allegedly(据说,传说) was born, to January 6th, when Jesus was apparently baptized(洗涤,实行浸礼) (the Epiphany). There is a popular song called the “Twelve Days of Christmas” that keeps this tradition alive each year. We understand that Macy’s Department Store in New York City introduced the annual Christmas or Santa Claus Parade during the 1880’s. Today, in late November, or early December, a Christmas Parade is held in almost every city and town in Europe and America.<br>第一批圣诞贺卡是19世纪40年代在英格兰和美国寄出的。赠送礼物可能源于《圣经》，里面写到，耶稣诞生时三个国王带着礼物从东方来访问伯利恒。我们知道圣?尼古拉斯也送礼物。后来发展起来的传统是在圣诞节的12天里，从声称耶稣诞生的12月25日，到耶稣公开受洗礼的1月6日(主显节)，每天都送礼。有一首叫做“圣诞节的12天”的流行歌曲，使每年的这种传统保持下来。我们知道，每年的圣诞节或圣诞老人游行是在19世纪80年代，由纽约市的梅西百货公司引入的。如今，在11月底或12月初，圣诞节游行几乎在欧美的每个城镇举行。<br>Early on the night before Christmas (Christmas Eve), children are encouraged to go to bed early if they expect Santa to come. They lay their heads on their pillows with visions of what the next day will bring. Santa is invisible to children since no one has actually seen him, his sleigh, or reindeer on Christmas Eve.<br>圣诞节前的晚上(圣诞节前夕)，孩子们被鼓励说，如果他们希望圣诞老人来的话，就要早些上床睡觉。他们把头放到枕头上时，就在幻想第二天会带来什么东西。在圣诞节前夕，孩子们是看不见圣诞老人的，因为实际上没有人看见过他、他的雪橇以及他的驯鹿。<br>On Christmas Day, families usually get together for a roast goose or turkey(火鸡) dinner served with mashed(压碎的) potatoes, gravy(肉汁), cranberry sauce, and pie or pudding(一种甜点心) for dessert. Grown-ups will pour a glass or two of wine or other spirits(烈酒). Together, families will openly exchange gifts and gratitude. Children, including cousins, nieces and nephews, often kneel on the floor in front of the tree, excitedly trying to find presents with their names on them. On that day, warm receptions are extended to everyone, friend or stranger.<br>在圣诞节，一家人通常聚在一起吃烤鹅或者烤火鸡，还有土豆泥、肉汤、酸果沙司和作为餐末甜点的馅饼或布丁。大众们会倒上一、两杯葡萄酒或其他烈酒。聚到一起时，家人们公开地交换礼物和表达感谢之情。孩子们，包括堂、表兄弟姐妹，侄儿、侄女，外甥、外甥女，常常跪在树前的地板上，兴奋地寻找上面定有他们名字的礼物。那天每一个人都会受到热情接待，不管是朋友还是陌生人。<br>For many merchants, Christmas has become the economic boom season of the year. It is estimated that a major percentage of the annual yield of revenue from sales is generated during the month or more of intense Christmas shopping before Christmas. As a matter of fact, there has been some debate for years that Christmas has become too commercialized and that the true meaning of Christmas is gradually disappearing. An escalating(逐步上升的) tendency has been to buy more and more expensive gifts each year. Some people go into debt, sometimes owing more than they can easily pay back. Some people are personally beginning to rethink(反思) this commercial approach to Christmas. However, toy manufacturers and their contemporaries in advertising make a killing during this period. Christmas shopping hits a peak(最高点,顶峰) on Boxing Day, the day after Christmas, when stores offer great discounts to unload the unsold Christmas merchandise(商品). This is usually the busiest shopping day of the year.<br>对于很多商人来说，圣诞节成了一年中生意电繁荣的时节。据估计，全年销售收入的很大一部分，来自在圣诞节前圣诞大采购的一个多月里。实际上，已经争论多年的话题是，圣诞节太商业化了，而其真正意义在逐渐消失。一个日益明显的倾向是每年要买越来越多的贵重礼物。有些人已经私下开始反思这种圣诞节的商业行为了。玩具制造商及其广告业的同伙们，在这个期间大大地赚了一笔。圣诞采购在圣诞节后的一天即节礼日达到高峰，这个时候商店大打折扣，倾销没有卖完的圣诞商品。通常，这是一年中最忙的采购日。<br>Christmas has spread far and wide across the globe. My wife and I lived in Beijing last year. During the Christmas season, we saw many Christmas decorations and heard a lot of western Christmas music in department stores. It seemed little different from Toronto, Canada. We celebrated Christmas much as we would have in Canada, except that we weren’t with our families in our homes during that very special family-oriented holiday season. We have great memories of Christmases of the past and look forward to many more great Christmas memories in the future.<br>圣诞节在全球广泛传播开来。去年，我和妻子住在北京时，在圣诞节期间，我们在百货商店里看到了很多圣诞节装饰品，听到了许多西方圣诞音乐。与加拿大多伦多几乎没什么区别。除了不是和我们的家人在一起，我们就像是在加拿大一样，庆祝了圣诞节。在我们家乡，这个季节是一个特别适合全家一起过的节日。我们对过去的圣诞节还有很深刻的印象，也盼望将来有更多值得回忆的圣诞节。<br>Christmas is the most cheerful and holy of holidays in the Christian world, which boasts of an estimated 1.8 billion people. Although the origin of this holiday was purely religious, it has evolved into a highly secular(长期的,世俗的) celebration each year. However, strong religious components are still conveyed in various ways each year. The two are intrinsically(本质上的,完全的) mixed in the midst of modern commercialism(商业主义) and attached to.<br>Christmas day fall on December 25th each year, celebrating the birth of Jesus Christ, the son of a carpenter living over two thousand years ago. Christianity(基督教), the movement following the teachings of Christ, roused the world over the next many centuries. It is said that the first celebration of Christmas took place in 336 A.D. in Ancient Rome. No one seems to know for sure if December 25th was actually the date of Christ’s birth, but it is possible that Christian leaders in Ancient Rome wanted to replace pagan(异教的) religious holidays that occurred around the same time.<br>Many secular symbols of Christmas have emerged over several centuries. Santa Claus, in his present form, is a fairly recent development whereas his origin, in part, goes back to Roman times.<br>St. Nicholas was an early Christian Bishop (主教) of Patara of the Lycian seaport (in present-day Turkey) in the 4th century A.D. The Roman Emperor Diocletian, who persecuted Christians, imprisoned(监禁,关押) him because the practice of Christianity was illegal. The first Christian Emperor of Rome, Constantine, later released him. Nicholas’ reputation for generosity(慷慨,大方), kindness and miracles earned him a widespread reputation and eventually sainthood(圣徒). He is said to have brought back life to the children who had been chopped into pieces by their butcher father. He is reputed to have placed some gold coins in stockings, hung by a fire to dry by three poor girls. He had hoped that the girls would be able to use the money to marry to avoid living on prostitution(卖淫), the common destiny(命运) of such girls at that time. From this gesture came the tradition of empty oversize(特大的) stockings hanging on fireplaces at Christmas time for Santa to fill with little gifts. From these roots, the present-day Santa Claus seems to have emerged.<br>In some European countries, the image of Father Christmas is identified more closely with Saint Nicholas than with Santa Claus. The red and white suit, that Santa wears, is said to have come from the traditional color of early Christian Bishops’ robes. Santa, flying in a sleigh(雪橇) pulled by reindeer(驯鹿), and going down chimneys, originated(起源) from an American poem written in the 1820’s, another American made an engraving(雕刻术) called “Santa’s Workshop” in which Santa, is portrayed(描绘,描写) in a lovely sunset, scratching his chin, reading letters and checking a list activities which was revived(复苏,苏醒) every year in music and stories told to children during the yuletide(圣诞季节) (Christmas) season. Every year children write letters to Santa Claus before Christmas, asking him to bring favorite toys.<br>Santa traditionally navigates(航海) the frosty night skies December 24th without using a compass or a chart to plot his course. He, in his sleigh pulled by nine reindeer, usually lands on slippery sloped roofs. Clumsily(笨拙的), with his big bag heaped with toys and slung(用带吊挂) over his shoulder, he jumps down chimney and dumps toys under Christmas trees. Gifts often include a doll for a little girl or a train for a little boy. He does all of this without disturbing the inhabitants. Santa then crawls vertically back up the chimneys and, without a trace, flies off, exclaiming the resounding phrase, “Merry Christmas to all, good night”. He is back at his home at the North Pole before dawn on Christmas morning, tired but very happy after his very speedy sweep around the world. After a big yawn, Santa falls asleep.<br>Christmas carols(圣诞颂歌), or Christmas religious songs, began in the middle Ages when people danced and sang religious songs on village greens (central gathering areas in small towns and villages) in Anglo-Saxon England. A Christmas carol today is a religious tune without the dance associated with it.<br>A strong religious tradition today, as in other times, is to go to church at midnight of Christmas Eve or on Christmas morning. A priest may say mass (in a Catholic[天主教的] Church) or preach(宣讲教义) a sermon(布道) about the significance of the birth of Christ.<br>Another very prominent symbol of Christmas is the Christmas tree. There are several explanations for its origin. One story suggests that Martin Luther was walking through a wood on a clear winter night admiring the beauty of the bright stars glowing through the branches of trees. He decided to cut down a small evergreen tree and take it home. He put candles in it to represent the stars he had seen earlier because he wanted to share that beautiful image with his family.<br>Another story tells of the bringing of an evergreen tree inside the home during winter solstice(至日,至点) (December 21st) symbolizing the renewal(复活,复兴) of life in the dead of winter. It became associated with Christmas, which occurs only four days later. The Christmas tree was firmly established as a Christmas symbol by the Germans who eventually brought it to America. In Victorian England, people hung cakes and candies on it and later, fruit made of paper adorned(装饰) the branches. Modern commercial tree decorations appeared in the 1880’s at Woolworth’s Department Store in the United States, and electric Christmas tree lights made their debut(初次登场) in 1882.<br>The first Christmas cards were sent in the 1840’s in both England and America. Gift giving probably stems from the Bible where it is written that three kings, bearing gifts from the Orient(东方), visited Bethlehem when Jesus was born. We know that St. Nicholas also gave gifts. A later tradition developed, whereby gifts were given on each of the twelve days of Christmas, from December 25th, when Jesus allegedly(据说,传说) was born, to January 6th, when Jesus was apparently baptized(洗涤,实行浸礼) (the Epiphany). There is a popular song called the “Twelve Days of Christmas” that keeps this tradition alive each year.<br>We understand that Macy’s Department Store in New York City introduced the annual Christmas or Santa Claus Parade during the 1880’s. Today, in late November, or early December, a Christmas Parade is held in almost every city and town in Europe and America.<br>Early on the night before Christmas (Christmas Eve), children are encouraged to go to bed early if they expect Santa to come. They lay their heads on their pillows with visions of what the next day will bring. Santa is invisible to children since no one has actually seen him, his sleigh, or reindeer on Christmas Eve.<br>On Christmas Day, families usually get together for a roast goose or turkey(火鸡) dinner served with mashed(压碎的) potatoes, gravy(肉汁), cranberry sauce, and pie or pudding(一种甜点心) for dessert. Grown-ups will pour a glass or two of wine or other spirits(烈酒). Together, families will openly exchange gifts and gratitude. Children, including cousins, nieces and nephews, often kneel on the floor in front of the tree, excitedly trying to find presents with their names on them. On that day, warm receptions are extended to everyone, friend or stranger.<br>For many merchants, Christmas has become the economic boom season of the year. It is estimated that a major percentage of the annual yield of revenue from sales is generated during the month or more of intense Christmas shopping before Christmas. As a matter of fact, there has been some debate for years that Christmas has become too commercialized and that the true meaning of Christmas is gradually disappearing. An escalating(逐步上升的) tendency has been to buy more and more expensive gifts each year. Some people go into debt, sometimes owing more than they can easily pay back. Some people are personally beginning to rethink(反思) this commercial approach to Christmas. However, toy manufacturers and their contemporaries in advertising make a killing during this period. Christmas shopping hits a peak(最高点,顶峰) on Boxing Day, the day after Christmas, when stores offer great discounts to unload the unsold Christmas merchandise(商品). This is usually the busiest shopping day of the year.<br>Christmas has spread far and wide across the globe. My wife and I lived in Beijing last year. During the Christmas season, we saw many Christmas decorations and heard a lot of western Christmas music in department stores. It seemed little different from Toronto, Canada. We celebrated Christmas much as we would have in Canada, except that we weren’t with our families in our homes during that very special family-oriented holiday season. We have great memories of Christmases of the past and look forward to many more great Christmas memories in the future.<br>圣诞节是号称有大约18亿教徒里的基督教世界里最愉快、最神圣的节日。尽管这个节日的起因纯粹是宗教性的，但它已演变成了每年的非常世俗化的庆祝活动。不守，纯粹宗教性的部分每年还是在以各种方式进行着。二者在现代重商主义中，很自然地融合在一起。<br>圣诞节时值每年的12月25日，是耶稣基督的诞生庆典，他是两千多年前的一个木匠的儿子。基督教，这场追随基督教义的运动，在接下来的几个世纪里影响了全世界。据说，圣诞节的第一次庆祝活动是在公元336年的古罗马举行的。好像没有人能肯定12月25日就是基督的实际诞生日，而更有可能的是，古罗马的基督教领导人想要以此取代几乎同时举行的异教徒的宗教节日。<br>圣诞节的很多世俗象征已经出现好几个世纪了。现在这种形象的圣诞老人，可以说是最近才出现的。然而，他的起源却可以部分追溯到古罗马时代。<br>圣·尼古拉斯是公元4世纪时利西亚海港的帕塔拉(在现今的土耳其)的一个早期的基督教主教。迫害基督教徒的罗马皇帝戴克里以非法宣扬基督教的罪名把他关进了监狱。后来，罗马的第一位信仰基督教的皇帝康士坦丁释放了他。尼古拉斯的慷慨、仁慈和圣迹为他赢得了广泛的声誉，最终被尊为圣徒。据说，他恢复了被他们那屠夫父亲砍成碎片的孩子们的生命。还说他在三个可怜女孩挂起来用火烘烤的长袜子里放了一些金币，希望这些女孩能用这些钱结婚，以免沦为妓女，而在那个时代，这种女孩的命运大多就是这样。在圣诞节，把特大号的空长袜挂在壁炉上面让圣诞老人放一些小礼物的传统，就来自这个故事。根据这些传说，现代的圣诞老人的形象似乎显现出来。<br>在一些欧洲国家，圣诞老人的形象更多的是与圣·尼古拉斯联系在一起，而不是与Santa Claus联系在一起。圣诞老人穿的红白相间的服装，据说是来自早期基督教主教的长袍的传统颜色。在驯鹿拉的雪橇上飞翔、从烟囱里下来的圣诞老人，源自19世纪20年代克莱门特·摩尔写的一首美国诗“圣诞节的前夜”。19世纪60年代，另一个美国人制作了一幅版画，叫做“圣诞老人的作坊”，上面的圣诞老人被描绘成在美丽的落日余晖下，挠着下巴，读着信，检查一份清单(每年在圣诞节以音乐和故事的形式反复告诉孩子们的各种活动都列在这份清单上)。每年，孩子们在圣诞节之前给圣诞老人写信，请他带来他们最喜欢的玩具。<br>根据传说，圣诞老人在12月24日深夜，在寒冷的夜空飞翔，不用使用指南针或者地图来计划他的路线。他坐在由九头驯鹿拉着的雪橇上，在通常很滑的斜屋顶上降落。他笨拙地扛着一个装满玩具的大口袋，从烟囱里跳下来，把玩具倒在圣诞树下。礼品中常常有送给小女孩的一个洋娃娃，或送给小男孩的一辆小火车。他无声无息地做着这一切，然后垂直向上从烟囱里爬回去，不留一点痕迹，飞走时大声地说着那句人们熟知的话：“祝大家圣诞快乐，晚安”。在圣诞节清晨破晓之前，他回到在北极的家里。在全世界快速飞奔了一夜，很疲倦却非常愉快。打了一个大呵欠后，圣诞老人就睡着了。<br>圣诞节颂歌，也叫基督教宗教歌曲，始于中世纪时期。那时，在盎格鲁撒克逊人的英格兰，人们在乡村草地上(小镇或村庄的聚集中心)跳舞，唱宗教歌曲。今天的圣诞节颂歌只是一道宗教曲子，没有与之相配合的舞蹈。<br>今天的一项强烈的宗教传统，像其他时期一样，是在圣诞节前夕午夜或圣诞节早晨去教堂做礼拜。牧师可能作弥撒(在天主教堂)或者布道宣讲救世主诞生的重要性。<br>圣诞节另一个显著的象征是圣诞树。关于它的起源有好几种说法。有一个故事说，在一个清冷的冬季夜晚，马丁路德走过一个树林，十分惊羡明亮的星光洒过树枝的美丽。他决定砍下一棵常青树带回家。他在树上放上蜡烛代替他看到过的星星，因为他想与家人一起分享那美丽的景色。<br>另一个故事讲的是，在冬至(12月21日)这一天，把一棵常青树搬回家，象征着在死寂的冬天生命的复苏。把它与圣诞节联系在一起，只因刚好四天之后便是圣诞节。德国人把圣诞树确立为一种圣诞节的象征，后来又将之带到了美国。在维多利亚女王时期的英格兰，人们把蛋糕和糖果挂在树上，以后，又用纸做的水果装饰树枝。现在商店卖的圣诞树装饰品出现在19世纪80年代美国的伍尔沃斯百货商店，而圣诞树上装彩灯则始于1882年。<br>第一批圣诞贺卡是19世纪40年代在英格兰和美国寄出的。赠送礼物可能源于《圣经》，里面写到，耶稣诞生时三个国王带着礼物从东方来访问伯利恒。我们知道圣·尼古拉斯也送礼物。后来发展起来的传统是在圣诞节的12天里，从声称耶稣诞生的12月25日，到耶稣公开受洗礼的1月6日(主显节)，每天都送礼。有一首叫做“圣诞节的12天”的流行歌曲，使每年的这种传统保持下来。<br>我们知道，每年的圣诞节或圣诞老人游行是在19世纪80年代，由纽约市的梅西百货公司引入的。如今，在11月底或12月初，圣诞节游行几乎在欧美的每个城镇举行。<br>圣诞节前的晚上(圣诞节前夕)，孩子们被鼓励说，如果他们希望圣诞老人来的话，就要早些上床睡觉。他们把头放到枕头上时，就在幻想第二天会带来什么东西。在圣诞节前夕，孩子们是看不见圣诞老人的，因为实际上没有人看见过他、他的雪橇以及他的驯鹿。<br>在圣诞节，一家人通常聚在一起吃烤鹅或者烤火鸡，还有土豆泥、肉汤、酸果沙司和作为餐末甜点的馅饼或布丁。大众们会倒上一、两杯葡萄酒或其他烈酒。聚到一起时，家人们公开地交换礼物和表达感谢之情。孩子们，包括堂、表兄弟姐妹，侄儿、侄女，外甥、外甥女，常常跪在树前的地板上，兴奋地寻找上面定有他们名字的礼物。那天每一个人都会受到热情接待，不管是朋友还是陌生人。<br>对于很多商人来说，圣诞节成了一年中生意电繁荣的时节。据估计，全年销售收入的很大一部分，来自在圣诞节前圣诞大采购的一个多月里。实际上，已经争论多年的话题是，圣诞节太商业化了，而其真正意义在逐渐消失。一个日益明显的倾向是每年要买越来越多的贵重礼物。有些人已经私下开始反思这种圣诞节的商业行为了。玩具制造商及其广告业的同伙们，在这个期间大大地赚了一笔。圣诞采购在圣诞节后的一天即节礼日达到高峰，这个时候商店大打折扣，倾销没有卖完的圣诞商品。通常，这是一年中最忙的采购日。<br>圣诞节在全球广泛传播开来。去年，我和妻子住在北京时，在圣诞节期间，我们在百货商店里看到了很多圣诞节装饰品，听到了许多西方圣诞音乐。与加拿大多伦多几乎没什么区别。除了不是和我们的家人在一起，我们就像是在加拿大一样，庆祝了圣诞节。在我们家乡，这个季节是一个特别适合全家一起过的节日。我们对过去的圣诞节还有很深刻的印象，也盼望将来有更多值得回忆的圣诞节。</p><h2 id="8、A-Time-to-Say-Hello-相知相识"><a href="#8、A-Time-to-Say-Hello-相知相识" class="headerlink" title="8、A Time to Say Hello [相知相识]"></a><strong>8、A Time to Say Hello [相知相识]</strong></h2><p>The year began softly. The weather in Southern China was warm and so were the students. The unexpected events of the year to come began to unfold, much too soon to become only an innocent treasured memory. Something precious should be held tight and not let it go. It was to be a year of surprises and a year of love. The Chinese have an expression for it, “Yuan fen”. A westerner would only question why and how. With your permission let us share the experience together.<br>这一年悄然开始了。在中国的南方，气候温暖宜人，学生们热情有加。来年中那些意想不到的事情开始展现出来，很快，又会变成清纯美好的回忆。应当把握真情，不言放弃。那是一年的惊喜，一年的爱意。对此，汉语里有个说法叫做“缘分”。西方人可能只会问为什么，怎么了。要是你愿意的话，那么就请与我一起来分享这段经历吧。<br>He sat at the front of the classroom looking anxious but attentive. In those first few days, his eyes bright with anticipation(期望) sought approval from me, his teacher. He claims now that he understood very little content in the lessons of the first few weeks. However, he successfully managed to give the appropriate illusion(假象,错觉) of understanding well. He made me laugh and his peering was also delighted in his sense of humor. He dressed with attention to detail, and his neat appearance, whether in jeans or current fashion, was distinct, a cool guy! There was always something enchanting(使迷惑) in his smile, he was charming and handsome and he knew it! Moreover, he was a gentleman. His eyes revealed so much when they crinkled(起皱) with laughter, the mask removed, or conversely remained inscrutable(难以理解的,神秘的) like still pools of liquid chocolate, containing only a hint of belief.<br>他坐在教室的前面，看起来有些焦急忧虑，但很专心。最初的那几天，他那明亮的眼睛里，充满了得到我这个老师认同的渴望。现在，他承认，对于头几个星期的课程，他几乎没听懂。然而，他却设法装成了理解得差不多的样子。我禁不住感到好笑，他那很有幽默感的凝视也显露出高兴的样子。他的穿着很注意细节，外表整洁，不管是牛仔裤还是时装都别具一格，简直酷极了。他的微笑总是那么迷人。他英俊潇洒，讨人喜欢，他自己也深知这一点。而且，他也是绅士。他有时眯着眼笑的时候，就抛掉了所有的掩饰，有时又故作神秘，像一杯平静的热巧克力，叫价难以捉摸。不管怎样，他的眼睛都流露出他的绅士风范。<br>他第一次写作业，就表露出他喜欢我，并希望我们成为朋友，“非常好的朋友”。那时，我们都没想到这个预言最终会变成现实。我只在心里笑了笑。那是表露我毫不知情的几次笑声中的第一次。从此，他出现在我的课堂和我的生活里。<br>His first writing assignment revealed the fact that he liked me and that he hoped we could be friends, “very good friends”. At that time neither of us suspected just how true that prophecy(预言) would eventually become. Inwardly, I just laughed. This was the first of several laughs that showed how little I understood. His presence permeated(散布,弥漫) my classroom and my world.<br>About a month later our lives began to intertwine(相互缠绕) and the delicately woven pattern of our lives began to become more intricate(错综复杂) in the coming year. Relationships occur on many levels. Layer upon layer must separate in order for us to speak of inner feelings. It is up to the individual to analyze the variety of feelings at each level.<br>大约一个月后，我们的交往变得密切起来。这种精心培植的生活模式，在新的一年中变得更加微妙。关系涉及到诸多层次，只有把各个层次分开，我们才能说出内心感受。我们必须按各自的观点去分析在每个层次的不同感受。<br>As time passed, we shared our viewpoints and feelings through conversation while chatting(聊天) over tea and coffee, arousing the emotion deep in our hearts.One day flowed smoothly into another. Familiar experience for me proved to be exciting and stimulating for him. Western festival celebrations like Halloween(万圣节前夕), Christmas and Valentine’s Day(情人节) provided an avenue to celebrate together, to share warmth and good times. Traveling to new places introduce me to an enticing(迷人的) new world.<br>随着时间的流逝，我们快乐地在一起交谈，一边品茶、饮咖啡，一边聊天，述说自己的观点和感受，在我们内心深处涌动着热烈的情谊。不知不觉中，日子一天一天地过去了。我所熟悉的那些感觉竟然也使他兴奋、激动。像万圣节前夕、圣诞节和情人节这些西方的喜庆节日，为我们提供了在一起庆祝的机会，共享温馨美好的时光。我们还到一些新的地方旅游，把我带入一个迷人的新世界。<br>Every day there was laughter and underlying cares that carried both of us along to some degree of happiness. We learned together English and learned about life that year. Strangely the gap in our ages did not create any barrier for our friendship, he young and vital, and I was feeling young again. He offered his assistance, whenever I needed it. He offered his company for comfort, when death visited my door. What did he drive from this agenda, but a few paltry(不足取的,无价值的) words in a foreign language? May be it was all worthwhile, maybe it will open a window wide and provide a pass port to a new world for his future.<br>每天的笑声和深情的关怀，使我们总是生活在幸福之中。这一年，我们一起学习英语，也学习如何生活。很奇怪，我们的年龄代沟没有给我们的友谊带来一点障碍。他年轻，充满活力。我也感觉自己年轻了。<br>无论我何时需要，他都能提供帮助。当死神光顾我的时候，他陪伴我，给我安慰。从这些事情中，他得到了什么呢?仅仅为了几个微不足道的外语单词?也许那就足够了，或许会为他的将来打开一扇窗户，为他提供一种通往一个新世界的手段。<br>Time continues to slip by as a rushing river. You no longer inhabit(居住于) my daily world, only my memory. From a distance your voice informs me that you are continuing to learn, you are growing. Some days you are happy, others not quite so much.<br>时间像奔流的江水，不停地逝去。你不再出现在我每天的世界里，只留在了我的记忆中。从你远方传来的声音里，我知道了你在继续学习，不断成长，有时快乐，有时也并不如意。<br>However, here around me, there is nothing, only a ghost-like figure, waving from your window and a familiar waft(飘来) of fragrance(芳香) as I stand alongside your newly occupied desk. There is nothing and yet there is everything. My mind remains idle, with only fragments of images drifting in and out. I can no longer be absolutely certain whether this was only a dream.<br>然而现在，我身边空无一物，只有一个梦幻般的身影从你的窗户里翩然而至，还有那每当我站在你的新课桌旁时那熟悉的气息。一无所有，但又拥有一切。我头脑空空如也，进进出出的都是那些映像的片断。我再也无法肯定这是否只是一场梦幻。<br>We no longer occupy the same space, but I remind myself that we still occupy the same world. When we chance to meet, hands reach out; hearts embrace, and once again confirm the same magic feeling. Such friendships come rarely in a lifetime. Thereby, I feel blessed(幸福的) and lucky.<br>我们不再拥有同一片空间，但我清楚，我们依然拥有同一个世界。倘若还有机会相遇，我们会伸出双手，真心拥抱，再次重温这奇妙的感觉。真诚友谊，终生难求。对此，我觉得很幸福，很幸运。</p><h2 id="9、A-Preface-to-Murder-谋杀端倪"><a href="#9、A-Preface-to-Murder-谋杀端倪" class="headerlink" title="9、A Preface to Murder [谋杀端倪]"></a><strong>9、A Preface to Murder [谋杀端倪]</strong></h2><p>Sometimes truth is stranger than fiction. Sometimes life deals a bad hand. Sometimes it is hard to go on. Sometimes evil triumphs over good.<br>有时，事实比小说还离奇。生活有时候使人无助，有时又让人难以为继。有时，邪恶还战胜了正义。<br>Nancy sighed heavily as she pulled her daughter’s diary from the drawer. She leaned forward to examine the familiar writing. A postcard with a colored sketch fell onto the floor from the book the drawing was a picture of a long curved sandy beach on a tropical island; of course it would be Montserrat. She felt clumsy as she knelt to retrieve(取回,收回) the picture. Under no circumstances could she forgive or forget the criminals who tortured her beautiful Megan. It was difficult not to feel bitter about the events of the preceding year. She had shed so many tears in the past year since her daughter’s murder. Nancy recognized that she was suffering from psychological problems and had really become indifferent to the events in her daily life. She began to shake and then to weep. When would there be an answer to this damn nightmare?<br>南希深深地叹了口气，从抽屉里取出女儿的日记。她身体前倾，仔细地看着那熟悉的笔迹。一张彩色素描明信片从杯子里掉落下来。画面上是一个热带岛屿上一处蜿蜒的沙滩美景。自然，那就是蒙特塞拉特岛。在她屈膝去拣明信片时，她感到手脚有些不听使唤了。她决不会饶恕或忘记那些残害她美丽的梅根的凶手。一想到一年前发生的不幸，南希就禁不住感到痛苦。她抓起一张面巾纸，擦去眼中的泪水。女儿被害后的这一年中，她不知道流了多少眼泪。南希知道自己患上了心理障碍，她确实变得对日常生活中的事情漠不关心了。她身体开始颤抖，接着抽泣起来。这该死的噩梦何时才会一个答案呢?<br>Megan had attended secondary school at a private girls’ school five hundred kilometers from home. In junior school she had been a straight A student. Now in high school she continued to study hard, play sports, join the school orchestra, plus a variety of school clubs. As a joke, her friends labeled her a genius, often just to make her angry. As well as being a high academic achiever she had a great capacity for fun. She thrived on an active social life. Slender, pretty and vivacious(活泼开朗的), she was the apple of her parents’ eye.<br>梅根在离家500公里的一所私立学校上中学。她读小学时就一直是最优秀的学生。现在进了中学，她还是继续努力学习，热爱运动，参加学校的管弦乐队，还加入了学校的各种俱乐部。朋友们在开玩笑时称她为天才，这常常只会使她生气。她不但学习成绩好，也很有情趣。她在丰富的社会活动中茁壮成长。她苗条美丽、活泼大方，是父母的掌上明珠。<br>Every year in accordance with school policy, a student candidate was chosen to travel and live in another commonwealth(联邦) country for six months. As Megan had an interest in a diplomatic career after completing university, she figure she would be considered a prime applicant if she applied for the position. A detailed essay was necessary to provide the committee with a clear idea of her intention. The selection committee would spend a fortnight reviewing the applications in an attempt to identify the ideal student. Megan also needed to undergo a rigorous personal interview, which would validate(验证) her academic background and evaluate her general behavior.<br>The interview preceded well, Megan taking the initiative to underline her strengths. After school some of her friends gathered for coffee in the café near the school. They confessed to Megan that they were rather envious of the opportunity she might have to live in another country. They enquired about the details of the interview. Two weeks later Megan received a phone call notifying her of the successful results of the interview.<br>按照学校的规定，每年要挑选一名学生到另一个英联邦国家去旅行和生活六个月。因为梅根的计划是在读完她上的大学后从事外交工作，她认为如果提出申请，自己将是被考虑的一个主要人选。这需要向委员会提交一篇文章，明确阐明她的意图。选拔委员会要花两个星期对申请人进行评定，以确定人选。梅根还要接受严格的单独面试，以验证她的学业水平并评估她的综合素质。面试进行得很顺利，梅根积极主动地展示了她的实力。放学后，她与一些朋友聚在学校附近的咖啡馆一块喝咖啡。她们对梅根很坦承对她要在另一个国家生活相当嫉妒。她们还询问了面试的细节。两个星期后，梅根接到电话，通知她成功地通过了面试。<br>Her parents were slightly nervous experiencing some negative feelings about Megan leaving the safety of home to live in another country. They knew the experience would broaden her horizons however, her destination, Montserrat, within the past year had a huge volcano erupt(喷发), disrupting(使中断,扰乱) people’s lives. Unstable conditions, loss of homes and fear of more eruptions all tended to breed trouble among the poor of the island. Her parents’ concerns were for Megan’s safety.<br>对于梅根要离开安全的家到另一个国家去生活，她的父母略感不安，有一些不祥的感觉。不过，他们知道，这次经历将会拓宽她的视野。她的目的地蒙特塞拉特，去年发生了一次巨大的火山爆发，使人民的生活陷于混乱之中。局势动荡、无家可归和对火山再次爆发的恐惧都在困扰这个岛国的穷人。她父母担心梅根的安全。<br>Departure day dawned clear and bright. Farewells were made to family and friends and she was off for the adventure of a lifetime. Megan’s arrival on Montserrat was both welcoming and initially uneventful(平静无事的). The island family where she was to live for the next six months, made her feels right at home. As the pace of life on the island was more relaxed that at home, she was very happy. Her new schoolmates included her in their lives and she adapted quickly. Swimming in the warm ocean water, and sitting underneath waving palm trees in a mild climate, was a pleasant change from the cold northern winters.<br>出发的那天清早，天气晴朗。在与家人和朋友们告别后，她踏上了她的冒险旅途。梅根到蒙特塞拉特后受到欢迎，最初也平安无事。她要在岛上住六个月的那个家庭，让她觉得就像在自己家一样。岛上的生活节奏比在家里更轻松，她感到很高兴。她的新同学们接纳了她，把她当作他们当中的一员，她很快便适应了。能够在温暖的海水里畅游，在生长于温和气候带、摇曳的棕榈树下闲坐，与寒冷的北方冬天相比，这种改变令人心旷神怡。<br>One Saturday evening a gang of kids piled into a taxi, heading off for a barbecue(户外烤肉餐) on the beach. Some of the girls decided to walk along the beach. Megan joined them, lagging slightly behind. She knew she ought to hurry to catch up but the moist sand felt good under her feet. Water lapped at her toes; the tide was coming in. the violet light of dusk began to darken the sky.<br>一个星期六的晚上，一帮孩子们挤进一辆出租车，前往海滩吃烧烤野餐。几个女孩子决定沿海滩漫步。梅根也加入进来，跟在后面慢慢地走着。她知道她应该快一点赶上她们，但脚下湿润的沙子让她觉得很舒适。潮水涌来，海水拍打着她的脚趾。紫罗兰色的黄昏降临，天空开始暗下来。<br>In the growing darkness a van pulled alongside her, stopping with a squeal(尖锐的声音) of brakes. Before she knew what was happening two masked men leapt out of the car and began to chase her, grabbing her and finally throwing her to the ground. The gross attack that followed was brutal and unexplainable. Initially Megan tried to fight off her attackers by clawing at their faces with her nails. Using a coil of rope to bind her hands, the men were free to proceed. First a fist broke her upper jaw leaving her unconscious. Then the hoodlums(无赖,流氓) used a metal rod to crush Megan’s skull(头颅) and finally a knife blade penetrated her neck piercing an artery(动脉). After the crude act was completed her body was bundled into the back of a cab and discarded in a ditch in an isolated district far from the beach.<br>在越来越暗的夜色里，一辆货车向她身边驶来，在尖锐的刹车声中突然停下。没等她明白过来是怎么回事，两个戴面罩的男人从车上跳出来追上她，抓住她，最后把她摔倒在地。接下来就是不分青红皂白的粗暴殴打。起初，梅根设法反抗袭击者，用指甲抓他们的脸。可他们用一卷绳子绑住她的双手后，他们开始为所欲为。他们先是一拳打破她的上颌，使她昏了过去。然后，这帮流氓用一根金属棒敲碎了梅根的颅骨，最后用刀片扎进她的脖子，刺穿了动脉。暴行结束后，他们把她的尸体捆起来，放到车子后面，再丢弃在远离沙滩的一个偏僻小区的沟里。<br>Realizing that Megan had disappeared, her friends dialed an emergency number, notifying the authorities of the situation. Once Megan’s body was discovered, a warrant(通缉令) was issued for the immediate arrest of the two wanted men. Megan’s parents were notified by the embassy. They in turn retained legal counsel and an intense inquiry began into the case. Those officials with an intimate knowledge of the island felt that the mugging was a case of mistaken identification and a complete misunderstanding(误解), a misguided outlet for mounting frustrations on the island.<br>Megan’s parents, Nancy and Don, cancelled all their immediate plans and flew to the island. Rather than wait for the small island ship to transport them to the island they were flown in by helicopter. After hiring a lawyer as an advocate for their cause(案件程序), they began to work with the local police tracking down any angle of the case that would bring these creeps first to court and then to trial before a jury, who in turn would convict them to lengthy jail sentences. As the days slipped by without any answers, they experienced severe emotional fatigue and life became a living hell.<br>得知梅根失踪后，她的朋友们拨打了紧急电话，把情况报告给当局。梅根的尸体被发现后，马上发出了立即捉拿那两名凶犯的通缉令。大使馆通知了梅根的父母。他们聘请了法律顾问，并开始紧张地调查此案。非常熟悉这个岛屿的那些官员们认为，这次行凶是一起认错对象的事件，完全是一个误会，罪犯被带错路后错误地登上了这个岛。梅根的父母，南希和唐，取消了他们当时所有的计划，飞往该岛。他们来不及乘坐送他们到岛上去的岛内小船，改乘直升机飞过去。在请了一名律师作为该诉讼案的辩护律师后，他们开始与当地的警察一起工作，收集与此案有关的各种证据，要把那些家伙送上法庭，交陪审团进行审判，判定他们有罪并予以长期监禁。但时间一天天过去，没有任何结果。他们感到身心憔悴，仿佛生活在人间地狱。<br>The investigation seemed to lag at first, but they were reluctant to interfere. The initial reports from this mess were inconclusive; many of the details not being addressed. As paying clients they lodged a complaint with the Governor of the island. After several months passed, the authorities had a frank discussion with Megan’s parents stating that as each day passed they were less and less liable to solve the murder. They cited other examples of unsolved cases and encouraged Nancy and Don to return home. Feeling both annoyed and frustrated, they decided they had done all they could here for the moment.<br>调查工作一开始就有些拖沓，但他们不愿意去干预。在这种混乱状况下，最初的报告没有什么结论，很多细节都没有提到。作为付过费用的委托人，他们向该岛总督提出申述。几个月过去后，当局在与梅根父母的一次坦率谈话中明确表示，随着时间一天天过去，查明这宗凶案的希望越来越小。他们还举出其他没有解决的案例作为佐证，劝南希和唐回家。在气恼和失望之余，南希和唐明白目前在这里他们已经无能为力了。<br>Once at home again, Nancy withdrew from community life choosing to spend her time alone. These days, if you went looking, you could often find Don in a local pub having a pint or two of beer. He, too, is unable to come to terms with the sequence of events that tore his family apart this year. Just thinking about Megan brings a lump to his throat and makes his head spin.<br>回到家中后，南希不再参加社交活动，而是独自一人消磨时光。这些天，要是你出去走走，经常会看到唐正在当地的一个酒吧喝着一、两杯啤酒。一年下来，他也忍受不了使家庭支离破碎的这一系列不幸事件的折磨。只要一想起梅根，他就喉咙哽咽，天旋地转。<br>As time passed, it was becoming more and more evident that the stack of paperwork pertaining(与…有关系的) to his daughter’s case was not going to provide any answers immediately, if ever. Tips provided by the public proved to lead nowhere. The records will remain open until the case is solved, however for the moment the natural rhythm of life has been destroyed. Can a family withstand such a tragedy? Only time will tell.<br>随着时间的过去，越来越清楚地表明，有关她女儿案件的那堆文件不会马上给出什么答案，也许永远也不会了。公众提供的线索也得不出什么结果。诉状还会保留，直到破案为止。然而，现在正常的生活节奏被破坏了。一个家庭能够承受得了这样的悲剧吗?只有时间才能回答。</p><h2 id="10、Canada-Becomes-a-Nation-加拿大建国"><a href="#10、Canada-Becomes-a-Nation-加拿大建国" class="headerlink" title="10、Canada Becomes a Nation [加拿大建国]"></a><strong>10、Canada Becomes a Nation [加拿大建国]</strong></h2><p>Before Canada became a nation in 1867, the area of North America that now composes Canada was a large expanse of widely scattered communities of British and French origins. It was an area with diverse landscapes that physically divided them from the north of the United States. There was little connection among communities politically or economically. These colonies of British North America traditionally traded with Britain and with the United States, very little among themselves. These colonies even had customs duties that, to some extent, restricted such trade. In the mid 1800s, important events and changes took place.<br>在1867年加拿大成为一个国家之前，组成现在的加拿大的北美地区，辽阔宽广，到处是分散的英国人和法国人的移民社区。这片土地景色多变，很自然观地将其与美国的北方分辨开来。这些社区之间很少有政治或经济上的联系。传统上，这些英属的北美殖民地与英国和美国进行贸易，而相互之间却少有往来。这些殖民地甚至还没有关税，在一定程度上限制贸易往来。19世纪中期发生的几件重大事件，使情况有了变化。<br>Britain repealed(废除,撤销) the Corn Laws and Navigations Acts, which had been economically beneficial to the colonies at the same rate it applied to all other trading countries, a situation to which the colonies had never been accustomed.<br>英国撕毁了给好几代殖民地人带来经济利益的谷物法和航行法案，并开始对殖民地课以与其他所有贸易国家同样高的税率，这是殖民地从未遇到过的情况。<br>From 1861to 1864, Americans were involved in a major civil war. Britain had traditional economic ties with the southern part of the United States that provided cotton to British markets. In the meantime, since the war was essentially between the North and the South, the North resented Britain’s connection with the South. In addition, during the last year (1864) of the American Civil War, the American Government of the dominant and ultimately victorious North, refused to renew a ten-year free trade agreement with United Canada, the large British colony in the central part of British North America. These arbitrary events brought concern and even fear to these colonies. With the loss of traditional trading arrangements and the end of the civil war, the North being victorious, the colonists feared that the Americans might turn on the British colonies in retaliation(报复,报仇) for Britain’s moral support for the South.<br>1861到1864年，美国陷入全面内战。过去是美国南方为英国市场提供棉花，英国与之有着紧密的传统经济联系。在此期间，由于这实际上是一场南北方之间的战争，北方当然不满英国与南方之间的这种传统关系。此外，在美国内战的最后一年(1864年)，占据优势并最终获胜的北方的美国政府，拒绝延续与联合加拿大——英属北美中部最大的英国殖民地——签订的十年自由贸易协议。这些独断专横的事件带给这些殖民地的是担忧甚至是恐惧。传统贸易协议的废除和以北方作为胜利者的内战的结束，使殖民者们害怕美国人可能会转而对付英属殖民地，以报复英国对南方的道义支持。<br>The need for new markets, and a solid defense system from potential invasion by the United States, brought an acute awareness to these diverse colonies that they should look to each other for resolutions to these problems. They felt uneasy trying to cope against these adversities(逆境,苦难) on their own. Sir John A. Macdonald from United Canada, the dominant personality at this time, also saw the acceleration of American settlers moving north and spreading throughout the flat prairie (大草原) lands to the west. This would potentially(潜在的) put a wall between the colonies in the East and the lonely western British colony in what is today part of British Columbia on the west coast of North America. Macdonald felt that the situation was urgent.<br>对新市场的需求，以及为了建立对付美国潜在入侵的可靠防御系统，使这些松散的殖民地清醒地认识到，它们应该共同寻求解决这些问题的办法。它们急于设法处理这些难题。联合加拿大的约翰?A?麦克唐纳先生，这个时期的关键人物，也看到美国人加快了向北方移民的速度，从大草原到西部到处都是。这很可能会将东部的殖民地与孤立的西部英属殖民地——北美西岸的现在的英属哥伦比亚的一部分——分隔开来。麦克唐纳感到情况紧急。<br>In the summer of 1864, the maritime colonies of Nova Scotia, Prince Edward Island, and New found land scheduled a meeting to discuss the possibility of a customs union or free trade area to compensate for the latest setbacks(挫折,失败) in trade relations with Britain and the United States. Macdonald managed to get permission for some delegates from United Canada to attend as observers. For a number of years, United Canada was experiencing problems of political deadlock (僵局). Canada West was predominantly(主要地) English-speaking Canada East was predominantly French-speaking. A central government, set up in 1841, required a majority from both Canada West and Canada East for all legislation to become law. It was very difficult to pass significant legislation when two opposing views were constantly being debated and legislative bills were constantly being defeated. The Canadians saw a new, wider union, a potential new national institution or central government, as a possible solution for breaking out of this constant political disorder.<br>1864年夏，新斯科舍的沿海殖民地，爱德华太子岛和纽芬兰计划召开会议讨论建立关税联盟或自由贸易区的可能性，以弥补最近在与英国和美国贸易关系上遭到的损失。麦克唐纳设法得到许可让联合加拿大的一些代表作为观察员出席。多年来，联合加拿大都面临着政治僵局的难题。加拿大西部以说英语为主，而东部则以说法语为主。1841年成立的中央政府，则要求一切法案成为法律之前，要得到加拿大西部和加拿大东部的多数同意。在两种对立观点争论不休，法律草案一再被否决的情况下，要通过重要的法案非常困难。加拿大人认识到一个更为广泛的新型的联盟，一种可能的新型国家制度或中央政府，可以作为避免这种时常发生的政治混乱的一个可行的解决办法。<br>The Canadian delegates sailed on board a cruise ship down the St. Lawrence River, into the Gulf of St. Lawrence, to Charlottetown on Prince Edward Island. This convention expanded to discussions of the possibility of all the British colonies uniting into one nation.<br>加拿大的代表们乘坐一艘游船沿劳伦斯河航行到劳伦斯湾，抵达爱德华太子岛的夏洛特敦。在那里，大会广泛讨论了联合所有英属殖民地建立一个国家的可能性。<br>After much complicated debate at another convention in Quebec City that same year, the delegate submitted a draft of an agreement for the formation of the dominion of Canada. The bulk of the work had been done by a group of men of seemingly high virtue, who became know in history as “the Fathers of Confederation(联邦)”. United Canada was divided into the provinces of Ontario and Quebec. Some allowances were given to Quebec because it was a predominantly French-speaking Catholic province and had special needs, unlike other provinces. The colony of Nova Scotia was divided into Nova Scotia and New Brunswick. These four provinces formed the original new nation. A flexible approach, in later years, persuaded other colonies to join.<br>同年，在魁北克城的另一次会议上，经过错综复杂的讨论后，代表们提交了一份建立加拿大国家的协议草案。大部分工作是由一些那时德高望重的人完成的，他们成为历史上有名的“联邦国父”。联合加拿大被划分为安大略省和魁北克省。一些特权给了魁北克，因为它与其他省不同，是一个以说法语为主的天主教省，有其特殊需要。新斯科舍和新布伦斯威克。这四个省形成了新国家的雏形。在以后的岁月里，他们以灵活的方式说服了其他殖民地加入了这个国家。<br>A federal system, with powers distributed between the central and provincial governments, was created. The provinces were assigned powers to have their own governments to deal with more local or provincial issues, the federal system would promote harmony among provinces, with different perspectives on nationhood. This was a compromise, so that the bigger provinces of Ontario and Quebec wouldn’t completely dominate the smaller provinces. The country was to be called the Dominion of Canada, but would still remain loyal to Britain as a member of the British Empire.<br>一种在中央和省政府之间分享权力的联邦体制创建起来了。各省被赋予权力，拥有自己的政府以处理更多的地方事务。这种联邦体制可望促进各省之间彼此协调，尽管它们站在本民族立场上有不同的观点。这是一种折衷的办法，致使较大的安大略省和魁北克省不能完全支配较小的省。这个国家被称为加拿大自治领，但仍然是大英帝国的一个成员，效忠英国。<br>The new legislation that created Canada was a British act of Parliament called “The British North America Acts of 1867”. Canada officially became a nation on July 1st, 1867. This would be the anniversary occasion each year, for joyous celebration of a national holiday commemoration(纪念,庆祝) the birth of Canada.<br>使加拿大成为一个国家的新法案是一项叫做“1867年英属北美法案”的英国国会法案。1867年7月1日，加拿大正式成为一个国家。每年的7月1日为周年纪念日，在这个法定假日里举行庆典活动，纪念加拿大的诞生。<br>The development of the country, as we know it today, was an evolutionary(进化的,演变的) process over more than eight decades. Manitoba became a province after some controversial events involving the federal government and the Metis, French-speaking descendants of French fur traders who married American Indian girls. This ethnic(人种的,种族的) group settled near Fort Gary, the city of Winnipeg, Manitoba what is called today.<br>正如我们今天所知道的那样，这个国家在80多年里不断发展演进。在几次涉及联邦政府和梅蒂斯人的有争议的事件之后，马尼托巴成为加拿大的一个省。梅蒂斯人是美洲印第安女孩与法国毛皮贸易商的后裔，讲法语。这个族群定居在加里要塞附近的温尼伯城，即今马尼托巴。<br>John A. Macdonald, the new and first Prime Minister of the new nation, made a deal with the western-most colony in Vancouver guaranteeing on the building of a railroad from the east to the west if that colony would join Canadian Confederation. The property of the Metis, to which the letter felt legally entitled, was in the path of the new railway. The federal government essentially took the land. The Metis were compelled to move further west, but not without a fight. (The Metis and the federal government were on an inevitable(无法避免的) collision course. Twice, Metis revolts rested the might(权力,威力) of the federal government and relationship between French-and English-speaking in Canada). The federal government was able to defeat the Metis in both clashes. Louis Riel, the leader of the Metis was hanged for treason(叛国,谋反) in 1885 for his leading role in resisting the federal government. He became a martyr to French-Canadians. His death only added fuel to the growing discontent(不满意) between French and English Canada.<br>约翰·麦克唐纳，这个新兴国家的第一任总理，与温哥华的最西边的殖民地达成协议，保证说如果该殖民地加入加拿大联邦，他将建一条从西到东的铁路。梅蒂斯人的地产——他们认为是合法拥有的——正好在这条新铁路线上。联邦政府完全剥夺了他们的土地。梅蒂斯人被迫向西，但并非没有抵抗。(梅蒂斯人不可避免地要与联邦政府进行抗争。他们的对联邦政府的两次反叛考验了联邦政府的权威和说法语与说英语的加拿大之间的关系。)在两次冲突中，联邦政府都成功以失败了梅蒂斯人。1885年，梅蒂斯人的领袖路易斯·瑞尔，因带头试图反抗联邦政府以叛国的罪名被绞死。他成为说法语的加拿大人的死难者。他的遇难对说法语和说英语的加拿大之间日益激化的纠纷无疑是火上浇油。<br>Throughout this whole period, 1869 to 1885, the federal (or central) government ignored the appeals of the Metis. It appeared that, according to Macdonald and his followers, the creation of the new nation was more important than relieving the plight(困境) of a relatively small minority group. The Metis probably deserved much better of the federal government. Different versions of these events are still debated in Canadian classrooms today.<br>在整个1869年至1885年期间，联邦政府都没有理睬梅蒂斯人的诉求。很显然，在麦克唐纳和他的继任者们看来，建立一个新国家比解除一个相对弱小的少数民族的困境更重要。也许，梅蒂斯人可以享受到联邦政府更好的待遇。今天，在加拿大的教室里，对这些事件的不同看法不在争论不休。<br>Macdonald was also criticized for concealing the fact that he took some money illegally to complete the railway. In 1873 as “The Pacific Scandal” became known, the construction of the railway suspended temporarily. The determined Macdonald and his government, obsessed(担心,困扰) by the possibility of the Americans moving in and taking over the west, boldly pushed railway construction to completion.<br>麦克唐纳还被指责隐瞒事实，非法挪用资金完成铁路建设。那次有名的1873年的“太平洋丑闻”曾使铁路建设一度停了下来。后来麦克唐纳和他的政府，由于担心美国人入侵并接管西部，坚定果断地推动完成铁路建设。<br>Manitoba became a province in 1870, British Columbia in 1871, Prince Edward Island in 1873, Alberta and Saskatchewan in 1905. The admission of Newfoundland into Confederation in 1948 completed the Canadian Confederation of ten provinces from sea to sea, as they exist today. The railway, the Canadian Pacific Railway (CPR) was completed before the agreed deadline.<br>1870年马尼托巴成为一个省，1871年英属哥伦比亚加入，1873年爱德华太子岛加入，1905年艾伯塔和萨斯喀彻温加入。1949年，纽芬兰岛获准加入联邦，使拥有10个省的东岸到西岸的加拿大联邦完整起来，也就是今天的加拿大。那条铁路，即加拿大太平洋铁路在预定完工日期之前也已建成。<br>Canada’s becoming a nation was not an easy road. Canada’s remaining a nation has perhaps been an even harder road. There were many challenges facing it over the first one hundred or more years. The most serious challenge has been, and still is, staying together as a country. Relations between French-speaking and English-speaking Canada have been difficult to improve. This persistent(持续存在的) theme in Canadian history began with the defeat of New France by Britain during the Seven Years War from 1756to 1763 (or the French-Indian War, as it was known in North America). In the last twenty years, referenda(普通投票) held in Quebec for possible separation from Canada, were narrowly defeated. This challenge still lies ahead.<br>加拿大的立国之路崎岖不平，继续保持下去更是充满艰辛。在开始的100多年里，她面临许多挑战一直是并且现在仍然是保持国家的统一。说法语与说英语的加拿大之间的关系是最难处理的。这个加拿大历史上的房屋主题，始于1756年至1763年的七年战争(或者在北美，通常叫做法印战争)期间英国打败新法兰西的时候。近20年里，魁北克举行的旨在使该省脱离加拿大的公民投票，在那里勉强被失败。这个挑战在今后的日子里还会依然存在。<br>So far, the country has remained strong, and has traditionally played a significant role in international affairs. Canada has much promise for the 21st century. It will need to find creative diplomatic strategies to keep the internal rumblings(摩擦声,隆隆声) beneath the surface from exploding into self-destruction. It will need to find a way to fulfill the dreams of “the Fathers of Confederation” of so many years ago. A good guess is that the odds are in favor of Canada achieving those dreams and truly becoming the nation that was originally intended.<br>加拿大对21世纪寄以厚望。好需要具有创造性的外交策略，避免隐藏在外表下的内部摩擦导致自我毁灭。她需要找到一条道路，实现多年以前“联邦国父”的梦想。一个美好的期待是，机遇关照加拿大去实现这些梦想，真正成为最初所设想的那样一个国家。</p><h2 id="11、Sky-Watch-天空观察"><a href="#11、Sky-Watch-天空观察" class="headerlink" title="11、Sky Watch [天空观察]"></a><strong>11、Sky Watch [天空观察]</strong></h2><p>Today the wind and rain drove fiercely against my apartment window. It was the tail end of a typhoon(台风). Every year, as the calendar indicates the approach of autumn, these destructive tropical(热带的) storms account for both death and destruction along Asia’s coasts. On an average there may be fifteen such storms every year. Although many civilians adopt a casual attitude towards these events, awareness is advisable.<br>今天暴风雨不在击打着我的寓所窗户，不过台风就要结束了。每年当日历提示秋天来临时，这些破坏性极强的热带风暴就会给亚洲沿海地区，带来人员伤亡和财产损失。平均每年可能有15次这样的暴风雨。面对这些灾难，很多居民抱着漫不经心的态度，但提高防范意识才是明智的。<br>As the water dripped from my balcony and accumulated into free-flowing rivers on the road beneath, I was reminded of the extreme weather that affected the residents of North America. Hurricanes(飓风), tornadoes(龙卷风), snowstorms, ice storms and electrical storms are all examples of extreme weather that may challenge an entire community. Each storm is unique in character, contributing its own particular fascination(魔力) and fear.<br>雨水从阳台上滴落下来，在下面的道路上汇聚成肆意流淌的水流。这使我联想到侵扰北美居民的那些极端恶劣的气候。飓风、龙卷风、雪暴、冰暴和雷暴，都是可能威胁到整个社会的极端的气候现象。每次风暴都有其独特的特点，展现出特有的魔力和恐怖景象。<br>Every fall hurricanes slam the United States coast. They upset boats, fell mature trees, wash away sections of public beaches and often cause death. Fortunately with the advantage of modern prior warning systems authorities are able to keep the chaos to a minimum. Regardless, some sectors of the population still ignore the warnings. The burden of rescuing these irresponsible(不负责的) adults falls on the authorities. Mean while government budgets are strained. To assemble enough aid to assure assistance for all regions in a country stretches finances.<br>每年秋天，飓风都要猛烈攻击美国海岸。它们打翻船只，刮倒大树，冲毁成片的公共海滩，还常常造成人员伤亡。所幸的是，由于有了先进的预警系统，当局能够将这种混乱不堪的状况降到最低限度。但不管怎样，还是有一部分人忽视这些警告。营救这些不负责任的成年人的重任就落在了当局身上。这时，政府预算就显得很勉强。要调集足够的物资，保证为一个国家的所有地区提供帮助，使得财政吃紧。<br>Hurricanes seldom reach Ontario, Canada, but in 1954 Hurricane Hazel exposed the residents of Toronto to an awful night of flooding and terror. Responding to the disaster required the supreme effort of all the rescue departments.<br>飓风很少影响到加拿大的安大略省。但在1954年，黑兹尔飓风却使多伦多的居民遭遇了一个充满灌水和恐惧的可怕夜晚。为了应付那次灾难，所有救援机构都尽了最大的努力。<br>In Ontario where a brush(严酷的) winter extends from November until April, snowstorms are regular occurrence. People adjust their travel plans, sports activities and especially their mode of dress when the weather forecasters predict a severe snowstorm. Automobile drivers must be more cautious under these circumstances. Snow removal becomes a major expense for northern cities. Families adjust their weekend plans and stay together at home, sitting safely in front of a blazing(炽烧的) fire, and viewing a video, the beauty of fluffy(蓬松的) white snow can be appreciated when it blankets(覆盖) stately evergreens(常青树) standing against a deep blue sky.<br>在安大略，严酷的冬天从十一月一直延续到四月，常常有暴风雪。当气象预报员预报说有恶劣的暴风雪时，人们就得调整他们的旅游和体育运动计划，特别是调整他们的衣着。汽车驾驶员在这样的环境里必须更加小心。除雪成了北方城市的主要开支之一。家庭调整了他们的周末休假计划，一起呆在家里，安全地坐在炽热的炉火前观看录像。当挺拔的常青树上挂满蓬松的白雪时，人们就可以欣赏在深蓝色天空衬托下的美丽雪景了。<br>In 1998, Ontario residents were crippled by a severe ice storm. People’s lives came to a grinding halt when power lines crumpled(瘫痪) under the weight of the ice. People lived without electricity for weeks. Remote parts of the province resumed normal living conditions after several months. Rocks, trees and lakes abound(大量的) in the Canadian Shield(地盾) area of Ontario. Electrical storms provide spectacular entertainment for summer evenings. Zigzag(锯齿形的) bolts of lightening flash across the sky the clap of thunder echoes across the water. Each storm provides a remarkable drama, one without parallel in nature.<br>1998年，安大略的居民又遭受了一场残酷的冰暴的蹂躏。电力线路在冰冻的重压下瘫痪了，人们的生命受到严重威胁。好几个星期，人们的生活中没有电。该省的偏远地区几个月后生活才恢复正常。安大略的加拿大地盾区有大量的岩石、树木和湖泊。夏天夜晚，雷暴会上演蔚为壮观的好戏。锯齿形的道道闪电相继划破长空，声声雷鸣在水面上回响。每次暴风雨都是一次大自然的绝无仅有的精彩演出。<br>When individuals encounter the impressive forces of nature we are reminded that we are indeed weak and insignificant(无意义的,无关紧要的)!<br>当遭遇到令人难忘的大自然的暴力时，人们就会想到人类的确是柔弱无力而又微不足道的。</p><h2 id="12、The-Duet-Tape-管道胶带"><a href="#12、The-Duet-Tape-管道胶带" class="headerlink" title="12、The Duet Tape [管道胶带]"></a><strong>12、The Duet Tape [管道胶带]</strong></h2><p>Among the contents of the toolboxes of most people in the western world you would expect to find a hammer and nails, a drill, screwdrivers(螺丝起子) and some screws. But if you were to ask people from North America what the most useful item in their toolboxes was, the majority of people would undoubtedly tell you that it was duct(输送管) tape. Indeed, it has become an indispensable addition to every person’s perception of what constitutes necessity.<br>在西方，多数人的工具箱中，你可望找到一把锤子和一些钉子，一把钻子，几把螺丝刀和一些螺丝钉。不过，你要是问北美人什么是他们工具栏里最有用的东西，多数人会肯定地告诉你那是管道胶带。的确，在每个人认为必备的东西中，管道胶带已经是必不可少的物品了。<br>Maybe you have never heard of duct tape. It is the brand name of a tape. Not only is it a tape, but also it is a special kind of tape.The name of the tape comes from the fact that it was designed as an insulating(绝缘的) tape that can be used in duct work (channels or conduits[导管] that are used for heat to travel through to get to different areas of a building). Incredible though it seems, someone actually put a picture of a duck on the packaging of the tape from one manufacturer perhaps just as a joke or maybe because the design artist did not understand the origin of the name. Neither the word duck nor duct was on the label. Presumably, it was assumed that everyone could identify the product.<br>也许你还没有听说过管道胶带。它是一种带子的商标名称。它不仅是带子，而且是一种很特殊的带子。<br>这种带子原是用于管道工程(用于将热能传送到大楼各个部分的管道或导管)的一种绝缘密封带子，并由此而得名。尽管看来不可思议，但确实有人将一幅鸭子的照片放在了一家生产这种带子的产品包装上。这也许只是一个玩笑，抑或是包装设计师不懂这个名称的由来。标签上既没有鸭子也没有管道字样。大概每个人都是能认得这种产品。<br>You can recognize the genuine tape because of its silver grey color. The color was likely chosen because it closely resembles the color of the pipes the color of the pipes it would be used on. That was the primary intended use of the tape. It was unlikely that the inventor realized how many other uses could be found for this product.Ingenious(善于创造发明的) people have found many alternative uses for this tape. The binder(粘合剂) on the tape is of good quality and it will stick to most surfaces. The tape is of great strength. It is impossible to tear the tape. It must be cut. The durable nature of the tape is one of its main assets(益处,优点).It comes in a variety of widths and the length of the tape on the roll will vary as well. The number of centimeters wide and the number of meters long will determine the price of the roll.<br>你可以认出这种真正的带子，它是银灰色的。之所以选择这种颜色，很可能是因为它与管道的颜色相似。那才是为这种带子设计的主要用途。发明人未必想到人们可能会为它找到许多其他用途。聪明的人们发现了这种带子的许多其他用途。这种带子上的粘合剂质量很好，能够粘着在大多数物体的表面。带子的强度很大，不可能被撕破，所以必须用刀切割。耐久性是这种带子的最可贵之处。它被制成多种宽度，一卷带子的长度也可以变化。一卷带子有几厘米宽和几米长决定了它的价格。<br>The duct tape is acquiring fame as the number of its uses for it exceeds the thoughts possible. The number of uses for this tape will amaze you. One internet Website(环球网的站点) started out trying to identify 101 uses for the duct tape and the list has well over 200 uses on it now. Maybe there are an infinite number of uses. Some of the items it lists involve an imagination but others are quite genuine. Not even a kindergarten student requires instruction on how to use it. One idea seems to generate(产生,引起) another, inspired by the unique way someone else has decided to make use of the tape. However, some of the uses are not feasible to execute. For instance, the use of the tape as a bandage is not recommended. It could cause injury when it is removed. You must evaluate the list with a sense of humor as some of the uses could embarrass a person. The commercial value of the tape is undoubtedly tremendous with huge profits resulting from the sales. The product practically promotes itself without much need for publicity.<br>管道胶带之所以有名，在于它的用途超出人们的想象，多得让人吃惊。一个互联网站最开始为这种带子列举了101种用途，而现在这个清单上已经超过200种了。可能有数不完的用途。在这个清单上有的用途可能只是一种想象，但其他一些用途确实是相当实在的。甚至幼儿园的学童不用教就可以学会怎样使用。别人以独特的方式使用带子的富有灵感的一个念头似乎会引发另外的想法。不过，有些用途是不可行的。例如，将这种带子作为绷带就不值得推荐。去掉它时会造成伤害。你必须带着幽默感去评价这份清单，因为有些用途会给人带来麻烦。这咱带子的商业价值毫无疑问是巨大的，能带来丰厚的销售利润。实际上，这种产品不需要广泛宣传，本身就可以促销。<br>Sometimes you see people, usually male rather than female, wearing shirts that have a slogan(标语) written on them that says, “I can fix anything”——and then there is a picture of a duct tape below the saying. The implication presumably is that the duct tape replaces skill.Another good marketing strategy(策略,战略) that people enjoy is the use of a calendar. There is one page on the calendar for every day of the year and each page shows and describes a new use of the duct tape.<br>有时候你看到人们，通常是男性而非女性，穿的衬衫上写着：“我能维修一切”的字样，下面有张管道胶带的图片。其含义当然是这种管道胶带能取代技能。另一个人们惯用的有效营销策略是利用日历。有种日历上一年中的每一天都有单独一页，每页上都展示和说明管道胶带的一种新用途。<br>One of the typical uses of the duct tape is to repair a leak in a faucet(龙头) or water tap. If the hose(水龙软管) of a vacuum cleaner has a hole in it, the duct tape will come to rescue(援救,救助). Almost every household in North America has at least one roll of duct tape. People keep it handy and use it to repair almost everything. No one would think it necessary to justify the purchase of extra rolls of tape, so the sales continue to increase.<br>管道胶带的一个典型的用途是修理水龙头。如果真空吸尘器上面的软管有个洞，管道胶带就派上用场了。几乎北美的每个家庭都至少有一卷管道胶带。人们身边有了它，可以修理几乎所有东西。人人都认为购买额外的带子是必要的，所以销量在继续攀升。<br>Many people like to boast about how often they use the tape. They say that the usage of duct tape has allowed them to simplify their life and to decrease the cost of repairs.<br>It can be used indoors in the interior of a house but there are abundant uses outside the house as well. If there is a chip out of a glass object, the duct tape can be used to protect the user from being injured. Repairing or reinforcing a joint on an aluminum ladder that a person is using would be a valuable use of the tape.<br>许多人喜欢夸耀他们是如何经常地使用这种带子。他们说使用管道胶带简化了他们的生活，并且减少了修理费用。它不仅可用于室内，在室外也有广泛的用途。比如玻璃制品破裂后产生碎片，管道胶带可用于保护使用者不受伤害。修理或加固一个人正在使用的铝制梯子的接头时，可以利用这种带子。<br>The tape has proved to be bargain. Even if the manufacturers charged twice as much for the tape, it would still be a best seller in the western world. The retail price is very reasonable. In addition it is convenient to store, and despite the number of apparent uses, people are always finding more ways to utilize it. It has become a vital item for every household.<br>这种带子的确是廉价品。即使厂家把售价提高一倍，它在西方仍然是畅销货。它的零售价非常合理。此外，它容易储存，虽然有许多明显的用途，人们仍然可以发现更多新的使用方法。它已经成为每个家庭必备的物品。<br>The glue on the tape is a wonderful adhesive(粘着的) agent and will bond well to anything from a piece of crystal to the handle of a broom. There have been reports of people using the tape to trap insects. Crickets(蟋蟀), for example, were found stuck to the tape by one person. Maybe the glue was able to attract them or maybe they just were in the wrong place. Criminals have been known to use the tape on their victims. During a robbery, a robber used the duct tape on the witnesses to keep them from reporting the crime until he had escaped. It was apparent that the robber came armed with the duct tape, anticipating the need for its use.<br>这种带子的粘胶是一种极好的粘合剂，它能牢固地粘接到任何东西上，不论是一块水晶还是一个扫帚把。据报道，有人用这种带子诱捕昆虫。例如有人曾用带子粘住蟋蟀。也许是这种粘胶对昆虫有吸引力，也可能只是认错了地方。罪犯们也知道将这种带子用于受害者。在一次抢劫中，一个劫犯用管道胶带将目击者粘住，使他们不能去报案，直到罪犯逃之夭夭。显然，那个劫犯是带着管道胶带来的，事先考虑到它的用途。<br>One evening a sea breeze was causing a window on a campus dormitory to crash repeatedly as the clasp(钩子) on it had been broken. The Duct tape put a swift end to the nuisance of the constant banging. Although it was obvious it was not a permanent solution of the problem, nevertheless, the temporary use of the duct tape was appreciated until the window could be replaced or someone could install a better latch.<br>一天晚上，一阵海风使校园宿舍的一扇窗子碰来碰去，响个不停，因为上面的钩子坏了。管道胶带很快就止住宅楼了那讨厌的持续不断的碰撞声。尽管那显然不是解决问题的长远之计，但在换掉那扇窗子或有人为它安装一个好插销之前，仍不失为一种值得赞许的临时办法。<br>You can even accomplish repairs on vehicles, which sometimes means the difference between being stopped in traffic or being able to continue your journey. Many motorists(汽车司机) have had to resort to the use of the duct tape in an emergency situation. Drivers often keep a roll of duct tape in the trunk of their car for that reason. It is a tremendous relief when you are able to wrap a piece of duct tape around a leaking hose that you discover at a time when it is not convenient to replace it. Thanks to the duct tape, the driver can become mobile again. The fear of being stranded(束手无策的) on a lonely stretch of highway is lessened when you carry a duct tape.<br>你甚至可以成功地修理交通工具，有时候这就决定了你是停止前进还是继续你的行程。许多机动车驾驶员在紧急情况下不得不求助于管道胶带。为此，驾驶员们常常在他们的车厢里放上一卷管道胶带。当你发现管子漏了，又不便于更换，而你却能够用一段管道胶带包缠好时，该是多么的惬意啊。用了管道胶带，驾驶员又可以上路了。只要你备有管道胶带，对在公路的偏僻路段上束手无策的担心就会少多了。<br>Other forms of transportation make good use of the tape as well. Usage for it can be found on boats, and also on airplanes. For instance, a sky driver once reported that jumping out of a small airplane did not scare her as much as riding in a small plane that appeared to have lots of duct tape.<br>在其他的交通方式上管道胶带也有它的用途。在船上有它的用途，在飞机上也有。比如，一个跳伞运动员曾说，如果所乘的小飞机上同时还载有很多管道胶带的话，从小飞机上跳出来比乘坐小飞机还安全。<br>Sports and recreational activities make good use of this tape as well. If you’re audio cassette player will not stay closed, use a piece of duct tape to position the tape holder. It might look odd but it will serve the purpose. If a hockey stick needs to be taped, use duct tape!<br>运动和娱乐活动也是这种带子的用武之地。如果你的盒式磁带放音机不紧，就用一节管道胶带固定磁带卡吧。看起来有点怪怪的，却很管用。如果曲棍球棍需要用带子包缠，那就用管道胶带吧!运动员们，不管是职业的还是业余的，都喜欢用它。<br>It can be used to compress a package, making more cargo fit in a carrier. You can use it repair a leaky toilet, or to fix a crack on a toilet seat. If you wrap duct tape around a newspaper, it can be used to make a dog’s chew toy. If you get an opportunity to use this product, you will also discover many uses for it and you will agree that it is one of the world’s best inventions.<br>它可以用来压紧包裹，使得一件行李中装进更多的东西。可以用它修补漏水的马桶，修理马桶座圈的裂缝。如果用管道胶带缠卷一张报纸，就可以用做狗嚼棒。你要是有机会使用这种产品，并发现它的许多用途，你就会同意说它是世界上最好的发明之一。</p><h2 id="13、Norman-Bethune-a-Canadian-Hero-in-China-诺尔曼·白求恩：一个在中国的加拿大英雄"><a href="#13、Norman-Bethune-a-Canadian-Hero-in-China-诺尔曼·白求恩：一个在中国的加拿大英雄" class="headerlink" title="13、Norman Bethune: a Canadian Hero in China [诺尔曼·白求恩：一个在中国的加拿大英雄]"></a><strong>13、Norman Bethune: a Canadian Hero in China [诺尔曼·白求恩：一个在中国的加拿大英雄]</strong></h2><p>Norman Bethune was born in Graven Hurst, Ontario, Canada in 1890. His family had a long history of human service, a fact that undoubtedly shaped his life in later years. From the outset, as a young university student, he developed a mission, or goal in life, of compassion(怜悯) and commitment to helping the less fortunate to find freedom from the chains of poverty. In earnest, he developed a selflessness(无私) that dominated his whole life, but not without personal sacrifice. He was in a troubled marriage that consequently ended in divorce. Progressive medicine and humanitarian(人道主义的) deeds became the sole purposes of his life. Understandably, his much younger wife, Frances, could not tolerate this situation.<br>诺尔曼·白求恩于1890年出生在加拿大安大略省的格雷文赫斯特。他的家族有从事公共事业的悠久历史，这毫无疑问地影响了他以后的发展。从一开始，他还是一个青年大学生的时候，他就立下志向，他的丛生目标就是要有一颗怜悯之心，承担起社会责任，帮助不幸的人们摆脱贫困的桎梏，获得自由。他坚定不移地培养了一种无私的精神，这种精神贯穿他的一生，从不考虑个人的得失。他有一次不成功的婚姻，最终以离婚收场。他生活中的唯一目的是让医术精益求精和积极从事人道主义活动。在这种情况下，可想而知，比他年轻得多的妻子弗朗西斯是难以接受的。<br>From 1911to 1912, Bethune worked as a lumberjack and teacher in a remote area of Ontario. He taught at “Frontier College”, a unique school that provided basic education to adult workers at the lumber camps. During the First World War, he became a stretcher(担架)-bearer (helping to carry the wounded from the battlefields). He, himself, was wounded by shrapnel(流弹) (fragments of exploding shells). He was confined, as a patient, to hospitals for months, receiving therapy and recuperating(复原) from his injuries. After the war, he completed his internship(实习医师期) at the hospital for sick children in London, England, leading to a certificate as “A Fellow of the Royal College of Surgeons(外科医生)”.<br>1911年到1912年，白求恩在安大略的一个偏远地区做一名伐木工和教师。他在“边疆学院”教书。那是一所专门为伐木营地的成年工人提供基础教育的学校。第一次大战期间，他成了一名担架手(帮助从战场上运送伤员)。他自己也被流弹(爆炸后弹壳的碎片)所伤。作为一个病人，他不得不在医院住了几个月，接受治疗，等待伤口康复。战后，他在英国伦敦的儿童医院完成了实习医师期，领到了“皇家外科医学院会员”的资格证书。<br>Later, in the United States, Bethune came in contact with poverty and deprivation(落后), but his skills as a doctor also attracted wealthy patients who were willing to pay for services usually denied to the poor. He began to appreciate how money was corrupting(腐蚀,使堕落) the medical system. He developed an acute concern for the unattended(未被注意的) medical needs and suffering among the poor. His mission was to relieve, as much as he could, the plight(困境) of the less fortunate. He was appalled(使震惊) at the indifference shown by governments to these conditions. It was at his time that his own health suffered a setback([疾病的]复发). He had developed tuberculosis(肺结核) of the left lung and had to undergo a successful but dangerous operation. This episode with his health had a tremendous impact on his life. It stimulated an interest in thoracic(胸的) medicine, especially the surgical(外科的) aspects in this field and for a couple of years he worked at a tuberculosis hospital in the United States.<br>之后，在美国，白求恩就与贫穷和落后联系在一起了。但他的医术也吸引了富有的病人，他们可以付钱来得到那些通常拒绝对穷人进行的治疗。他认识到金钱是如何腐蚀医疗系统的，并开始急切地关注被人忽视的穷人中的医疗需求和苦难。他的使命就是尽其所能地使不幸的人们摆脱困境。他对政府漠视这些情况感到震惊。也就在这时，他自己的健康开始恶化。他的左肺染上了肺结核，于是他进行了一次成功但很危险的手术。健康上出现的这一段插曲，对他的一生产生了极大的影响。这激发了他对心胸科医学，特别是该领域的外科方面的兴趣，促使他在美国的一家肺病医院工作了几年。<br>Following this interval in the United States, in 1929, he began to specialize in thoracic medicine at the Royal Victoria Hospital in Montreal. He also began to write in medical journals, outlining new surgical techniques. Later, he invented developed and refined surgical instruments.<br>In 1935, he journeyed to the Soviet Union to attend the International Physiological Congress. The Communist Parties of Canada and the United States had made arrangements for him to go. By this time, Bethune had become a member of the Communist Party of Canada. Returning to Canada, he was convinced, more than ever, that democratic societies needed to develop publicly financed health care for all of their citizens. Bethune had earlier set up a free medical clinic in Montreal. His conscience dictated that he should work for this goal.<br>在美国工作的这段时间之后，1929年，他开始成为蒙特利尔的皇家维多利亚医院胸科医学专家。他开始在医学杂志上撰写文章介绍新的外科技术。后来，他发明、研究并改进了外科仪器。1935年，他到苏联访问，出席国际生理学大会，是加拿大共产党和美国共产党安排他去的。那时，白求恩已经是一名加拿大共产党员。回到加拿大后，他更加深信民主国家需要建立针对所有公民的公共健康保障体系。早些时候白求恩在蒙特利尔建了一所免费诊所。他的良心支配着他为这些目标而工作。<br>The Struggle of the Spanish Republic against Fascist(法西斯主义着) aggression took him to Spain for a medical adventure and challenge. In Madrid, he pioneered a mobile blood transfusion(输血) unit in the field. He collected blood, which was then transported to where it was needed for the wounded along the 600-mile battlefront. These efforts were reported to have reduced deaths from war by up to 75%. Thousands of people owed their lives to Dr. Bethune. His bedside manner became legendary, and it was another measure of this man.<br>后来，西班牙共和国反抗法西斯侵略的斗争使他来到西班牙进行一次医学上的冒险和挑战。在马德里，他首创了一家战地流动血站。他收集血液，然后沿600英里的前线送到伤员需要的地方。据所道，这些努力将战争中的死亡率减少到75%。成千上万的人感谢白求恩大夫挽救了他们的生命。他对待病人的态度也享有盛名，它也是这个人物的另一个侧面。<br>He returned to Canada to go on a speaking tour to raise money for humanitarian efforts among the Spanish people. During this circuit of speaking engagements, Bethune elaborated eloquently(口才流利的) on the desperate needs of these people. His ability to communicate effectively made this tour a success. His undisputed(无可置辩的) talents were attracting widespread attention. Dr. Bethune became the ultimate international volunteer to help less fortunate people whatever he could. In the meantime, Japan was resuming its aggression against China. The decade of the 1930’s was the era of Fascist aggression throughout the world. Bethune’s knowledge of the long history of western aggression and exploitation in China made him conclude that his services were needed there.<br>他回到加拿大继续巡回演讲，为西班牙人民的人道主义需要筹集资金。在这次巡回演讲期间，白求恩竭尽所能，详细描述了那里的人民的迫切需要。他那卓越的交际能力使得这次巡回演讲获得成功。他的勿庸置疑的才能引起了广泛注意，白求恩大夫成了杰出的国际志愿者，竭尽所能帮助不幸的人民。与此同时，日本开始入侵中国。19世纪30年代是法西斯肆虐全世界的时期。白求恩知道西方对中国长期进行侵略和剥削的历史，这让他认定那里需要他的服务。<br>In January 1938, he sailed to Mainland China. He stated that he refused to condone(宽恕) (or support) wars which greedy men make against others. He went on to say that Spain and China respectively were parts of the same battle (against Fascism). The Japanese had chased the Chinese into the northwest part of the latter’s country. Mao Tsedung met Bethune only once, but they remained acquaintances by correspondence.<br>1938年1月，他乘船来到中国大陆。他说，他无法容忍贪婪的人所发动的侵害另一部分人的战争。他继续宣讲西班牙和中国都是同一场战争(反对法西斯主义)的组成部分。日本人已经把中国人逼近到了中国的西北部。毛泽东只与白求恩见过一面，但他们通过书信保持联系。<br>Bethune almost immediately set out for the hazardous(复杂危险的) surroundings of the mountain ranges of Yen an. In the company of the Eighth Route Army, Bethune practiced his profession as best as he could. There were no mobile units and there was a desperate need to recruit medical trainees and convey his knowledge and skills to meet the needs of the soldiers. Consequently, there was an urgent requirement for illustrated medical manuals.<br>白求恩立即投身到延安山区复杂危险的环境中。在八路军的协助下，白求恩尽其所能地发挥他的专业特长。没有移动的设备，急需征召实习医生，将他的知识和技能传授给他们，以满足部队的需要。相应的，还急需带图解的医疗手册。<br>Both soldiers and peasants required a good deal of medical attention. Again, under very trying(难受的,费劲的) conditions, and with a lot of nerve, determination and courage, Bethune and his crew of Chinese assistants were eventually able to establish and coordinate over twenty medical and nursing teaching hospitals. Because of shortages of personnel and other difficulties, Bethune himself routinely operated for days without reasonable breaks. In one period, he worked continually for sixty-nine hours on a total of one hundred and fifteen patients. His ability to endure such hard conditions and retain his sanity(头脑清醒) was little short of a miracle(奇迹). It was under these conditions that his life became abruptly(突然的) doomed(注定). In October of 1939, possible suffering from extreme fatigue, he accidentally cut his left hand with the blade of his scalpel(解剖刀). Without proper medical supplies and with germs everywhere, his hand became infected and blood poisoning (a disease called septicemia) spread. He died on November 12, 1939.<br>Dr. Norman Bethune’s stature ([思想的] 境界, 高度) became even greater in death. The affection of the Chinese people for him swelled Emotions ran high upon the news of his death. His capacity to move people, and his insight into humanity was never so evident as during this period. The Chinese people were extremely grateful that such a man had crossed their paths.<br>士兵和农民们都需要医疗。为此，在极端困难的情况下，凭着胆识、决心和勇气，白求恩和他的中国助手们终于建立和配备了20多所医疗和护理教学医院。由于人员短缺和其他困难，白求恩自己整天还要照例进行手术，休息不足。有段时间，他为115个病人连续工作了69个小时。他忍受这种艰苦条件和保持头脑清醒的能力真是一个奇迹。这样的条件注定了他突如其来的命运。1939年，也许是极度疲劳的缘故，他意外地被他的解剖刀片割破了左手。没有必需的药品，到处是细菌，他手上的伤口因而受到感染，血液中毒(一种叫做败血病的疾病)扩散开来。他于1939年11月12日去世。诺尔曼·白求恩大夫的崇高精神在他去世后影响更加深远。中国人民更加热爱他。他去世的消息使人们非常悲痛。他激励人们的这种能力和他对人道主义的洞察力从来都不像这时如此的明显。中国人民非常感谢这位把足迹留在他们土地上的人。<br>During this solemn time, tributes to Bethune came from many parts of the world. He was described as an activist, a writer, a teacher, an administrator, and above all, a great doctor. Mao said of him, “… We must all learn the spirit of absolute selflessness from him.”<br>在这个庄严的时刻，对白求恩的悼念来自全世界。他被称为活动家、作家、教师、管理者，还有最主要的，是一个伟大的医生。毛泽东说“……我们必须学习他毫不利已的精神”。<br>After a very simple funeral, as he, had requested, Dr. Norman Bethune was buried in the Mausoleum (陵墓) of the Martyrs in Shih Chia Chuang, southeast of Beijing. The Chinese named a medical school and a hospital in his memory. Many other memorials have been erected in his memory over the years.One ironic(具有讽刺意味的) tragedy of all of this was that, up until 1973, Dr. Bethune had never received much recognition from his native country of Canada. Furthermore, he was not even acknowledged for his accomplishments, presumably because of his communist connection. In 1973, Prime Minister Pierre Trudeau, another Canadian who had spent a good deal of time in China in his earlier years, convinced his Government to purchase the Bethune house in Graven Hurst, Ontario, and dedicated(把…用于) it as “Bethune Memorial House”.<br>在一个按他本人生前要求的非常简单的葬礼之后，诺尔曼白求恩大夫埋葬在北京东南的石家庄的烈士陵墓。中国人以他的名字命名了一所医学院和一所医院。多年来，各地建了许多怀念他的纪念碑和纪念馆。<br>与此相反，具有讽刺意味的是，直到1973年，白求恩大夫还没有在他的祖国加拿大得到应有的承认。甚至于连他的造诣都不被认可(可能是因为他是共产主义者的关系)。1975年，皮尔·特鲁多总理，早年在中国度过很长时间的另一位加拿大人，说服了他的政府，买下了安大略省格雷文赫斯特的白求恩的房子，用作“白求恩纪念馆”。<br>Dr. Bethune’s impact on medicine was not singular. His career was very comprehensive, as noted above, as he attained an extraordinary list of accomplishments of highest merit. Among his many goals, was one goal that was not fulfilled until after his death? In 1938, while in china, he recommended a universal health system for Canada. Ironically, Donald Sutherland, the Canadian actor who played Bethune in the movie about the latter’s life, called “Bethune: the Making of a Hero”, had been married to the daughter of Douglas. Douglas, when he was the Socialist Premier of Saskatchewan, a western province in Canada, set up a social medicine scheme in his province. Later, in the 1960’s, as a Member of Parliament in the national government, Douglas Played a significant role in establishing a national health system. He later became known as the father of Canada’s Medicare system, as it was eventually called.<br>白求恩大夫在医学上的影响是多方面的。如上所述，他的职业生活涉及面十分广泛，他取得了一系列卓越成就。在他的许多目标中，有一个直到他去世之后才完成。1938年，还在中国的时候，他建议在加拿大建立全民保健制度。巧合得很，在一部关于白求恩生平的电影“英雄白求恩”中扮演白求恩的加拿大演员，唐纳德萨瑟兰，娶了道格拉斯的女儿。道格拉斯在担任萨斯喀彻温省(加拿大西部的一个省份)社会党总理时，在该省建立了社会医疗制度。后来，在20世纪60年代，作为中央政府的一名国会议员，道格拉斯在建立全国卫生保健制度的过程中扮演了一个很重要的角色。他最后成为著名的加拿大医疗保险制度的创始人。<br>Bethune is probably best known for his introduction of the mobile blood bank to the battlefield, and giving blood transfusions(输血) in the midst of heavy fighting. China worships him almost as a saint. Upon his death, the Chinese gave him a fond farewell. The charity of his soul still lives on among many Chinese. As Canadian teachers in China, we are often greeted by Chinese people, who make references of praise to this Great Canadian Doctor and humanitarian. Unfortunately, many Canadians know little about the incredible work for humanity undertaken by this remarkable man. This decent, in many ways, simple man was, indeed, one of the great world ambassadors who fought for the poor and less fortunate.<br>或许，白求恩因为他首次把流动血站引进战场并在激烈战斗当中进行输血治疗而声名远播。中国视他为英雄。对于他的去世，中国人表示了深切地悼念。他的博爱精神仍然活在许多中国人的心中。作为在中国的加拿大教师，我们常常受到中国人的礼遇，他们经常提到并赞扬这位伟大的加拿大医生和人道主义者。不幸的是，许多加拿大人对这位非凡的人所从事过的难以置信的人道主义工作知之甚少。这位正派朴素的人，的确是一位与贫穷和不幸做斗争的伟大的国际大使。</p><h2 id="14、Future-or-Fantasy-远景还是幻想"><a href="#14、Future-or-Fantasy-远景还是幻想" class="headerlink" title="14、Future or Fantasy? [远景还是幻想?]"></a><strong>14、Future or Fantasy? [远景还是幻想?]</strong></h2><p>What will our world be like in the future? Can we look ahead twenty five years and dream about the transformations that will take place? The scholars who make it their business to try to predict the future are not all in agreement about what the future holds. If you visit displays at places like Disney world, you can get a glimpse of what some of the predictions are for our lives. As we fantasize(幻想) about what our life might be like a few decades from now, we can speculate about different aspects of our lives.<br>我们的世界未来会是什么样?我们能预测未来的25年并设想将会发生什么变化吗?未来到底有些什么特征，以预测未来为职业的学者们意见也并非一致。如果你到像迪斯尼世界这样的地方去观赏一下，就会得到一些关于对我们生活的一种大体的预测。当我们幻想从现在开始几十年后我们的生活会是什么样子时，我们会推断出我们生活的各个方面。<br>Personal [个人生活]<br>Clothing styles change from year to year and also from culture to culture. Do you think that we will have sleeves in our shirts and blouses? Will we wear socks to protect our feet? Will plastic gloves be used routinely as part of everyday life to avoid transmission of germs(细菌)? Will we still use buttons to fasten our clothing? Will we all wear the same kind of jeans or pants (like a uniform) or will each culture be different? What textiles will be used in manufacturing our clothing? Will a type of nylon fabric be used in an effort to make our clothing more durable? Synthetic fibers which will not fade can be produced in bright colors such as pink and purple in addition to all the other colors of the rainbow.<br>服装式样年年在变，一种文化习俗与另一种文化习俗之间也各不相同。你认为我们的衬衣和上衣还会有袖子吗?我们还会穿袜子保护我们的脚吗?在日常生活中我们会使用塑胶手套来避免细菌的传播吗?我们还会用扣子来固定我们的衣服吗?我们都穿同样的牛仔裤或短裤(像制服一样)，还是有各种不同的文化品位?什么样的纺织品会用来做我们的服装?是否会有一种更耐用的尼龙布?不褪色的合成纤维会以粉红色和紫色等各种鲜艳的色彩制造出来，而且是和彩虹的各种颜色一起吧。<br>When it comes to matters of personal cleanliness, will we soak in a bath? Will we spray ourselves with water or some other substance in a shower? Will we have a choice of which to use? Will we go to visit a barber for a haircut or will we be able to control the growth of our hair? If growth of a beard could be slowed, the daily ritual(老规矩) of shaving would be unnecessary for men.<br>在涉及到个人卫生方面，我们还会泡在浴缸里吗?我们会在淋浴时喷水还是一些其他物质?我们有使用的选择吗?我们还会去理发店理发或者我们能控制头发的生长?如果胡须的生长速度可以减慢，那男人就无须按老规矩天天刮胡子了。<br>Health [保健]<br>In the western world the number of people who smoke cigars or cigarettes has diminished(减少,递减) substantially in the last several years. Maybe the use of tobacco will be eliminated completely. Will we be able to heal illnesses and diseases as soon as the symptoms are identified?<br>在西方近几年抽雪茄和香烟的人数已明显下降。也许，烟草的消费会完全消亡。我们能够一发现症状就治愈这一疾病、解除疾病吗?<br>A cure for cancer would be considered a miracle. Could the disease be conquered with adequate commitment of federal funds to furnish financial resources? Accomplishment of this project would be a triumph of enormous proportions. It would be equivalent to sending several rockets to Mars simultaneously(同时). It would improve the welfare of all humanity(人类). Instead of using a thermometer to take our temperature, maybe we will have sensors(传感器) implanted in our bodies that will be read by a personal health care monitor. The machine could tell us if we are in need of more oxygen in our blood or if the food we just ate in difficult to digest because of too much acid in our stomachs. Will an appointment with a doctor be automatic if we are in need of treatment or will that profession become obsolete(消亡的)?<br>治愈癌症被认为是一个奇迹。在有专项联邦基金保证财力的情况下，能够战胜这种疾病吗?这项工程的完成将是一个巨大的成功，这相当于同时向火星发射几枚火箭。这将造福于全人类。我们也许会带有植入体内的传感器，可以由个人健康检测器据此读出数据，无需用体温计来测量我们的体温。仪器会告诉我们是否需要在血液里增加氧气，是否由于胃酸过多而使我们刚吃的食物难于消化。如果我们需要治疗就会自动找医生，还是医生这个职业会消失?<br>The monitor might also have the ability to prescribe a lifestyle program for us. A woman might be able to determine if she is pregnant from the use of this machine. A remedy for a sore limb might be verified if the person is uncertain how to treat it. A sore throat, a cough or a stiff neck might also be diagnosed and treatment prescribed. Tension in parts of our body can be caused by stress and precautions and preventative(预防性的) steps could be recommended.<br>检测器可能有能力为我们设计生命程序。女人或许能够使用这种仪器确定是否怀孕。如果一个人不知道如何治疗肢体疼痛，通过仪器可找到对它的治疗方法。喉咙痛、咳嗽或斜颈也可能诊断出来并指出治疗方法。由于压力导致身体某部分紧张，其预防步骤也可以推荐给你。<br>A machine might be used for the administration of medicine as well. Could you adjust to the idea of having an injection given to you by a robot using a needle? In fact, the precise dosage might be easier to attain using this method. It seems logical to make use of equipment that evaluate symptoms and interpret data if the performance proves reliable.<br>机器可能会用于药品管理上。你能够接受一个机器人用针管对你进行注射吗?事实上使用这种方法更容易获得精确的剂量。如果证明性能可靠，使用仪器来评价症状、解读数据，看来是可行的。<br>Critical illnesses could be diagnosed earlier and we could be confident that even the diagnosis of a complex disease could be clarified and the disease could be treated before it becomes fatal. Supposing a life-threatening virus could be controlled, by inference viruses would no longer constitute a threat to our well-being.<br>危险病症能够较早地诊断出来。我们相信即使对一个复杂病症的诊断也能够做到清楚明了，准确无误，并在它变得致使以前对其进行治疗。<br>The concept or idea of people living to an extremely old age has been suggested. Will the consequence of that possibility be that people could also maintain their intellect as they age?<br>Will people be able to make arrangements to have their body or its parts used after they die? The donation would help others to have some of their body parts replaced. Will people still have funerals and be buried in a grave as is the current custom or will cremation(火葬) be the common practice?<br>假如一种致使的病毒能够得到控制，可以推测，病毒将不再对我们的健康产生威胁。人们会活得很长的概念或观点已经被提出来了。这种可能性能够表明人上了年纪后，智力依然保持吗?人们能够达成协议，在他们死后使用他们的身体或身体的某一部分吗?这些捐献将帮助他人移植身体的某些器官。人们还会像现在的传统那样举行葬礼，埋进坟墓里，或者火葬会更普遍吗?<br>If we wear corrective lenses now, perhaps our vision could be improved or restored through laser surgery. We would no longer need to wear glasses. The tragedy of a stroke and the resulting mental disability(伤残,残疾) could be prevented if a monitor could analyze the person’s condition and recommend changes in lifestyle or treatment that could avert(预防) a stroke or a heart attack.<br>如果我们现在带上矫正镜，或通过激光手术我们的视力就会改善或恢复。我们将不再需要带眼镜了。如果监控器能够分析出人的健康状况，并且建议改变可能导致中风或心脏病发作的生活方式，提出避免中风和心脏病发作的治疗方法，中风这样的不幸及其引发的智力障碍就可以预防。<br>An ambulance equipped with sophisticated portable medical diagnostic equipment could have the ability to assess multiple injuries of the victim of an accident. Recovery would be assisted by the provision of prompt treatment.<br>一辆配备有精密便携式医疗诊断设备的救护车能诊断出事故受害者的多种伤势。而及时进行的处理有助于伤者的康复。<br>The prospect of a joint that swells, being treated by a restraint that causes lack of motion, is not a new idea, but will a synthetic joint be used to replace the joint instead of being treated in the current familiar way? Will replacement of a hip joint become more commonplace? Could a doctor operate on one of our organs without having to invade our bodies? Could surgery be performed with the aid of a small that it would be measured in millimeters? The opening required to insert the camera into our body would be tiny.<br>治疗关节肿痛的前景不是一个什么新的观念，用抑制病痛的办法治疗会导致暂时无法活动，那么会使用合成关节取代我们现在流行的处理方法吗?更换髋关节会变得很平常吗?医生能够不触及人体就能对某个器官动手术吗?手术能够借助小型照相机进行吗?照相机镜头的直径可能小到毫米以下吗?那样，需要将照相机送入人体体内的武器将会非常小。<br>Could a microscope be used in the study of biology to watch the development of a specimen of synthetic bacteria and then the specimen is used to create a treatment for the disease being studied?<br>显微镜会用于生物学研究来观察合成细菌标本的培育，然后将标本用于制造出一种与所研究的疾病有关的治疗方法吗?<br>Food [食物]<br>Our diet might contain come of the same foods that we eat now. Will we still use flour to make a loaf of bread? Maybe there will be ways to preserve our food so that bread never goes stale. Will we still eat common food combinations such as liver and onions? Will our favorite meal be roast beef or sausage and be cooked with cabbage? Will a typical breakfast menu include toast and jam? Maybe we will have a substitute for butter which tastes good.<br>我们的食谱可能包括我们今天正在吃的某些食物。我们还会用面粉做面包吗?也许，会有防止我们的食物变质的办法来使面包保持原味。我们还会吃像肝和洋葱这样的普通混合食物吗?我们最喜欢的饭会是烤牛肉或香肠和卷心菜一起煮吗?典型的早餐会包括土司和果酱吗?也许我们会有替代黄油的美味食品。<br>Food might not be purchased from a grocer or from a supermarket. Instead, as customers, we might order our food, using the internet and have it delivered to our residences. Maybe an automatic recorder would be placed when food is removed from a refrigerator. Preparation of food might be eliminated but because people enjoy eating, maybe there will be the option of nourishing our bodies through food or using some other means. Perhaps a series of pills will provide adequate nourishment. Fruits such as grapes, peaches or pears might still be available in several forms such as frozen or dried for our consumption. Candy would be difficult to give up for anyone who enjoys eating sweets. Pie for dessert is a favorite with some people and maybe a way will be found to produce a pie that tastes good and yet will be a healthy food for us to eat. A hot bowl of soup not only nourishes but also comforts people and we would not want to relinquish(放弃) that. Protein sources that have not been used before will become evident.<br>食品不需要从杂货店或超级商场购买。取而代之的是，作为顾客，我们可以使用互联网定购食物并把它送到我们的住处。也许，当食品从冰箱里取出时可以自动记录下来。备制食品可能会没有必要了，但因为人们喜欢吃，也许可以通过选择食品或者其他方式为我们的身体提供营养。也许，一系列药丸就可以提供足够的营养。我们仍然可能吃像葡萄、桃子或梨这样的水果，以冰冻或干缩等几种形式进行消费。要放弃糖果对喜欢吃甜食的人来说是很难的。作为饭后甜点的馅饼是一些人喜欢的东西，可能会找到一种方法来生产一种馅饼，味道很好同时还是一种我们食用的保健食品。一碗热汤不仅有营养而且使人舒心，我们是不会舍弃的。从前没见过的蛋白质资源将随处可见。<br>Provision of a ham and cheese sandwich for lunch might be available through a special appliance that takes our food order and prepares the food and delivers it to us. Ice-cream could be made, with the option of using either artificial sweetener or sugar. Will we fry foods like bacon and steak or will we be able to cook them by other means? We could combine foods such as peas and carrots with garlic to gain an abundant supply of vitamins from one dish.<br>一种特殊的设备，能接受我们的食品定单、制作食物并把它送到我们面前，我们就可以在午餐时吃到火腿和乳酪三明治。冰淇淋可以选用人造甜料或糖来制造。我们会油炸像咸肉和牛排这样的食物，还是用其他方法来烹调它们?我们可以把像豌豆、胡萝卜和大蒜这样的食品结合在一起，一道菜就可以提供足够的维生素。<br>Household [家庭]<br>What kind of accommodations will we enjoy? We are used to having more than adequate housing so we would not enjoy having to convert to a smaller residence. The access to our homes might be controlled for security reasons. Our entry might be gained by having a computer read our fingerprint(指纹) to see if it will correspond to detect if the right person is trying to enter the residence. Some suggestions are that it would be better to use the print of a thumb so the thumbprint would be used instead of a fingerprint. Both are a possibility.<br>我们会喜欢什么样的住宅?我们习惯于拥有较大的住宅，不喜欢换到较小的地方住。为了安全，进入我们的家时应该受到监控。要进去，需要由电脑读出我们的指纹，看你是否与记录相符合，以察明想要进入住宅的人是否适当。有人建议，最好使用指纹，因此拇指指纹将会代替指纹。两者都是可能的选择。<br>Our garbage will be put in a garbage disposal unit that will eliminate the need for trash collection. Light bulbs will seldom need to be replaced, as they will be made to last a minimum of five and a maximum of ten years. To decorate our homes, we might just give a description of what we want and have it completed by an interior decorator(装修工) with little interaction required from us. We could have our choice of background music played throughout the house, or varied from room to room. We might hear a symphony(交响乐) orchestra in one room and jazz in another. Will we have the luxury of having a maid do our cleaning or will that be unnecessary, as our home will become self-cleaning? Will we use soap and water to do our laundry or will another method that is friendly to the environment be developed? Will we use a furnace to heat our home or will we control the micro climate indoors by the use of solar power?<br>我们的垃圾将放进垃圾处理器，不再需要收集垃圾。几乎不需要更换灯泡，因为制造出的灯泡至少可以使用5-10年。想装修我们的家，只需要提供我们所想要的样子，就可以全部让室内设计师完成，不用我们操心。我们可以在一个房间听交响乐，在另一个房间听爵士乐。我们还有必要雇一个女仆为我们清理房间呢，或者根本就不需要，因为我们的家已变成自我清洁式的?我们会使用肥皂或水洗衣服，还是会开发出一种对环境有利的新方法?我们会使用炉子为房间供暖，还是使用太阳能来控制室内的小气候?<br>For people who live in a home in the suburbs will the tedious chore(家庭杂务) of mowing(割草) the lawn be accomplished in an efficient way by a robotic mower? Will weeds in our grass merely vanish as the mower emits a time release chemical to destroy them?<br>对于家住在市郊的人，除草这种单调乏味的杂务会由机器人除草器这种有效的方法完成吗?在除草机定时释放一种化学药品时，我们草地上的杂草是否会被杀死?<br>Transportation [交通]<br>Will we float over highways or drive on the road surface as we do now? Will the cost of a gallon of fuel still be our concern? What will our vehicles look like? Will the profile of our automobiles look like the shape of space age aircraft? Will the notion of using paint to protect the car’s exterior be obsolete? Perhaps the coating on the car will give a durable shine and we will never to wax or polish it. What kind of battery will we use to power our car? Will we still have a mechanic repair our car at a service garage or will robots that are computerized(用计算机处理) do it? Will the motor be powered by a new kind of petroleum product or by hydrogen? Will the cars still be equipped with horns as a warning signal or will a new device be available? Will there be a gauge(测量仪表) to warn us if our speed is too fast or will radar be used to guide the car so that driver error is no longer a concern?<br>我们会漂浮在公路上，还是像现在一样在路面上驾驶?燃油的价格还是我们所要关心的吗?我们的交通工具会是什么样?我们汽车的外形看起来像太空时代的飞行器吗?使用油漆保护车子外表的观点会过时吗?也许，车的涂层会保持持久的光泽，永远不需要为车上蜡或进行擦拭。我们会使用什么样的电池作为汽车的动力?我们会在维修车库请机械师修理汽车，还是让电脑控制的机器人来做?发动机是用一种新的石油产品还是用氢气来驱动?汽车仍然配备喇叭作为警告信号还是使用一种新的装置?如果车速太快，会有一种装置警示我们，还是使用雷达引导汽车使得驾驶失误不再是一个问题?<br>Electronics [电子器件]<br>Will we be able to play any musical instrument such as a guitar easily with a process the machine teaches us? Will other media, such as movies, be interactive? Will we have access to optical discs that can be played by laser? Digital images will more closely imitate reality. They will be so realistic that it will be virtually impossible to tell them from the real thing. Our enjoyment of watching a video will be enhanced by the quality of the images. Will we have equipment capable of manipulating ideas, eliminating the need for journalists to write and edit the news? Will computer software be available to modify what we type so that our errors are corrected automatically? Will computer hardware include massive amounts of memory that will allow us to file an enormous amount of material?<br>我们可能借用机器教学程序使学习吉他等乐器更为容易吗?其他媒体，比如电影，可以是互动的吗?我们可以拥有由激光播放的光盘吗?数字影像会更真实地模拟现实。事实上，他们是如此逼真，你不可能将他们从真实的东西中区分出来。图像质量高会增加我们观看视频的乐趣。我们会有能够处理思想而不再需要记者去编写新闻的设备吗?电脑软件能够对我们的输入进行优化从而自动改正我们的错误吗?电脑硬件是否会有更大的存储量，使我们能处理非常多的资料?<br>Will we be in the habit of carrying a small device with us that can be used as a cell phone, a fax, a microphone and an internet connection?<br>我们会习惯于随身携带一件小装置，能够用作移动电话、传真、麦克风和上网吗?<br>Summary [总结]<br>Look at the world around you and consider some of the concepts discussed in this document. Careful observation will lead you to the conclusion that many of these things have already happened. I urge you to reread each paragraph of this article to see if perhaps they are all things that are available somewhere in the world currently. If that is the case, then you will agree that the future is now!<br>看看你周围的世界，考虑一下本文中讨论的某些概念。仔细观察，你就会得出结论，上述的很多理想已经实现了。我劝你把本文中的每一段再读一遍，看看是否都能在世界上的某个地方遇到。如果事实的确如此，那么你就会同意未来就是现在!</p><h2 id="15、The-Ancient-Olympics-古代奥运会"><a href="#15、The-Ancient-Olympics-古代奥运会" class="headerlink" title="15、The Ancient Olympics [古代奥运会]"></a><strong>15、The Ancient Olympics [古代奥运会]</strong></h2><p>The origins of the ancient Olympic Games tend to be submerged in sea of Greek myths. One popular myth suggests that Pelops, a prince from Lydia, in Asia Minor (nowadays Turkey), won the hand of a princess by unfairly defeating a competing suitor in a chariot race. The loser was to be condemned to beheading. The prince rigged his opponent’s chariot to crash during the race. Later, the chariot did crash, killing the driver. The princess became Pelop’s bride, and he instituted the Olympic Games to celebrate his victory. However, others claimed that the first Olympic event was a funeral festival to honor his dead competitor.<br>古代奥运会的起源很容易就被淹没在浩瀚的希腊神话中。一个广为流传的神话说，珀罗普斯，小亚细亚(现在的土耳其)的吕底亚的一个王子，在一次战车比赛中用欺骗手段击败了求婚对手，赢得了一位公主的婚约。当时失败者会被判斩首，而对手的战车被王子做了手脚使其在比赛中被撞毁。后来，车毁人亡。那位公主成了珀罗普斯的新娘，他创立了奥林匹克运动会庆祝他的胜利。不过，另外一些人则声称第一次奥运会是为纪念他死去的对手而举行的葬礼。<br>Another myth involved Hercules, the mythical strong man. Hercules was the son of Zeus, the Greek god, and one of the god’s mistresses. Hera, Zeus’ wife, and also his sister, was very upset. She attempted in many ways, to kill Hercules as a baby. Hercules survived. Later, after he had married, Hera successfully put a spell on him, demanding that he kill his wife. Because he was the son of the god, Zeus, Hercules was destined to become a god himself. In order to accomplish this, Hercules had to be cleansed of his wife’s murder. To do this, he was directed to perform twelve difficult labors. If he successfully completed these, he would become an immortal god, like his father.<br>另一个神话是有关赫尔克里斯的，一个神话中的大力士。他是希腊主神宙斯和他的一个情妇的儿子。赫拉，宙斯的妻子，也是他的姐姐，非常气愤。在赫尔克里斯还是个婴儿时，赫拉就使用了很多方法要杀死他。但赫尔克里斯幸存下来。后来，在他结婚后，赫拉成功地对他施以诅咒，让他杀死他的妻子。因为他是宙斯的儿子，赫尔克里斯自己注定也会成为一个神。为了做到这一点，他必须洗清他谋杀妻子的罪名。为此，他被要求要完成十二件艰巨的大事。如果他成功地完成了这些任务，他就会像他父亲一样，成为不朽的神。<br>One of the majestic labors was to clean the stables of the King of Elis, in the impossibly brief period of one day. The king had huge stables with very large herds of cattle. Hercules asked the king to give him one tenth of his cattle, if he completed the task in one day. The king, perhaps humoring Hercules, or perhaps believing that this task couldn’t possibly be done in one day, agreed. In one day, Hercules diverted two rivers through the barns, cleaning them, but he did not receive the cattle that were promised in the deal. Hercules waged a successful war on the King, sacking Elis. He introduced the Olympic Games to celebrate this victory and to honor his father, Zeus, who lived on nearby Mount Olympus. The myth also suggests that Hercules measured out the stade, a footrace event of about 200 meters (or the length of the stadium).<br>其中一项任务是，在短短的一天之内清洁好艾丽斯国王的马厩，这几乎是不可能的事。艾丽斯国王的马群非常大，所以他有一个巨大的马厩。赫尔克里斯提出，如果他在一天之内完成了任务，国王就给他十分之一的马群。也许是觉得赫尔克里斯有点可笑，认为他根本不可能在一天内完成任务，国王就答应了。在这一天里，赫尔克里斯把两条小河引过来，将马厩冲洗干净，但没有得到承诺的马群。赫尔克里斯于是发动了一场战争，洗劫了艾丽斯。他举行了奥林匹克运动会来庆祝这次胜利和表示对父亲宙斯的敬仰。他的父亲宙斯就住在附近的奥林匹斯山上。这个神话还说，赫尔克里斯测量了运动场的长度，一个两百米长的跑道(或一个露天运动场的长度)。<br>As today, athletes in the ancient world were popular and had tremendous impact on the society of their day. The goal of the well-disciplined, physically trim athletes was to be the best. The champion athlete assumed a position of honor and privilege in Greek society. The status of a triumphant athlete also enhanced the reputation of his home city-state. Every young Greek boy who pursued the dream of being an Olympic champion some day envied the athletes. An important part of a Greek school boy’s curriculum was vigorous physical training in gymnasium.<br>像今天一样，古代的运动员很受欢迎，对他们那个时代的社会也有很大的影响。训练有素、身材匀称的运动员的目标是成为最好的运动员。冠军运动员会得到荣誉，在古希腊拥有特权。获胜运动员的地位也会增强自己家乡城市的名望。每一个希腊小伙子都羡慕那些运动员，梦想有一天自己成为奥林匹克冠军。古希腊学校里男孩子的课程里很重要的一部分就是在体育馆内上体育课。<br>The ancient Olympic Games, which began in 776 BC, lasted for over 1100 years. In 394 AD, the Christian Roman Emperor Theodosius abolished the games, as pagan festivals. At that time the Roman Empire was in decline. The modern Olympics have been around for only a little over 100 years, sine 1896. The Olympics of 776BC was the first, for which there is a written record, but it is believed that these events existed before this. There is evidence to show that athletic contests took place in Ancient Egypt and in the ancient Minoan civilization on the island of Crete.<br>古代奥运会始于公元前776年，延续了1100多年。公元394年，基督教罗马皇帝狄奥多西将其视为异教徒的节日予以废除。那时的罗马帝国正在衰落。现代奥林匹克运动会从1896年开始，才100多年。公元前776年的奥运会是有文字记录的第一届，但人们相信在此之前这项运动就已经存在了。有证据表明在古埃及和克利特岛上的古弥诺斯文化中就举行过体育比赛。<br>A plain called Olympia, in the small city-state of Elis was the site of the original Greek games. At the beginning of every four years, a period called an Olympiad, a major religious festival with athletic competition, took place at Olympia. In ancient Greece, the early Olympics did not rotate from city to city, but were permanently hosted at Olympia, the place from which the name Olympics originated. If wars were taking place at the time, as there usually were, a truce would be made during the military conflicts, soldiers would drop their swords and shields and accompany their opponents on a safe passage to Olympia, to enthusiastically participate in the games. After the games, the athletes would return to the battlefields with their companions, pick up their weapons and resume military engagements with their enemies, often fighting to the death, the athletic competitors whom they confronted only a few days or weeks before.<br>在小城邦艾丽斯的奥林匹亚平原，就是古代希腊运动会的场地。每4年的年初，这个期间叫做“四年周期”，伴随体育比赛，要在奥林匹亚举行盛大的宗教节日。在古希腊，早期奥运会不是一个个城市轮流，而总是在奥林匹亚举行，“奥运会”因此得名。到时如果发生战争(这是常有的事)，对抗的军队之间就会休战，战士们丢下他们的剑和盾牌，与他们的对手一起，安全地来到奥林匹亚，参加狂热的运动会。运动会后，运动员们将与他们的同伴一起重返战场，拿起武器，与他们的敌人，也就是仅仅几天或几个星期前相遇的体育竞赛对手，继续交战，常常会战斗到死。<br>In the beginning, only free Greek-speaking male athletes could participate in the games, women, slaves, and foreigners were banned from competition. Women were even barred as spectators, not for sexual reasons, but for from 720 BC the male athletes were usually naked down to their bare feet when they participated. Olympia was a sacred place for men only, a place to worship Zeus, the principal Greek god. However, women were not completely excluded from competitive sports, as they had their own games, every four years as well, called the Heraea, after Hera, the wife of Zeus.<br>起初，只有讲希腊语的自由男运动员可以参加运动会，妇女、奴隶和外国人是不允许参加竞赛的，甚至不准妇女观看。这并非性别的原因，而是因为从公元前720年开始，男运动员在参加比赛时常常从头到脚都是赤裸的。奥林匹亚是只让男人参加的宗教圣地，是崇拜希腊主神宙斯的地方。然而妇女并没有完全被排斥在体育比赛之外，她们有自己的运动会，也是每四年举行一次，叫做赫拉亚，以宙斯的妻子赫拉命名。<br>The first number of Olympic Games had only one event, called the stade. By the late 8th century BC, events included running, wrestling, boxing, pancratium (a mixture of boxing and wrestling), chariot racing, a footrace with heavy armor, and the pentathlon. The only official prize earned by the champion, was a crown of wild olive branches. Unofficially, some athletes received valuable prizes, including large sums of money from their home city-states. As in modern times, ancient athletes, even though they made pledges of fairness in competition, sought our every advantage, legal or illegal, in order to win. Even then, the concept of amateurism, for which there were no rules in ancient times, and the zeal for the competitive spirit were often sacrificed for the more selfish materialistic considerations.<br>最初的奥运会只有一个项目，叫做“斯泰底”。在公元前8世纪末，比赛项目包括赛跑、摔跤、拳击、角斗(摔跤和拳击并用)、赛车、负重跑和五项全能运动。冠军赢得的唯一正式奖品是一个野橄榄树枝编的桂冠。非正式地，有些运动员得到有价值的奖品，包括他们家乡城邦给的大笔奖金。像现代一样，古代的运动员，尽管他们发誓要公平竞赛，但是为了取胜，他们会设法获取各种优势，不管是合法的还是非法的。即使在那时，业余的概念——对此古代没有规定——和对体育精神的追求常常为了自私自利的物质报酬而受到亵渎。<br>By the 6th century BC, athletes began to specialize in particular sports, and even began to hire coaches. Special diets and new innovated kinds of physical conditioning became popular. Protein, from meat and beans in particular, became the popular nutritional need of Olympic athletes. The rules for events became more numerous and more strictly enforced. For example, a false start of a running event might have been followed by a whipping of the violator. Penalties usually included fines for most violations. It was said that the elegant, elaborate bronze statues of Zeus that lined the route to the Olympic Stadium in the fourth century BC, were financed by revenue created by fines imposed on athletes. Some athletes even became free agents, negotiating and hiring themselves out to the highest bidder, to win races and money for their sponsors. One rather peculiar practice that surrounded the chariot race event was that the owners, rather than the drivers of the chariots, received the honors and prizes. Some owners entered numerous chariots in the same event to increase their chances of winning. To the amusement of Olympic historians, Emperor Nero (famous for burning Rome) apparently entered a chariot race in which he fell from his chariot and did not finish, but still received the champion’s crown of olive branches. Who could argue with the Emperor?<br>到了公元前6世纪，运动员开始专攻个别项目，甚至开始雇佣教练。专门的饮食和独特的身体训练方法开始流行起来。蛋白质，特别是肉类和豆类，成了流行的奥林匹克运动会需要的营养品。体育项目的规则变得复杂起来，也更加严格了。例如，赛跑比赛的偷跑者可能会受到鞭笞的惩罚。惩罚通常包括对多数违规者的罚款。据说，公元前4世纪，摆放在奥林匹克运动场的入口处的、精心制作的庄严的宙斯青铜像，就是对运动员的罚款得来的收入提供的经费。一些运动员甚至成为自由代理人，与出价最高者谈判并被其雇佣，为他们的赞助人赢得比赛和金钱。与赛车比赛有关的一个相当特别的惯例是，赛车的主人而不是赛车手得到荣誉和奖品。为了增加获胜的机会，一些人在一次比赛中投入许多辆赛车。令奥林匹克历史学家感到好笑的是，显而易见尼实禄皇帝(有名的罗马暴君)还参加了一次赛车，比赛中从车中摔了出来，没有赛完，但还是得到了冠军的橄榄枝桂冠。谁敢和皇帝竞争呢?<br>By the 4th century BC, the Greek-only restriction on participation was eased as the Olympic organizers accepted athletes from overseas, from such territories as Egypt and Libya on the African continent. Many city-states even provided financial support and facilities for athletes so that they could concentrate full time on training, sometimes for more that a year before the games.<br>到公元前4世纪，只准讲希腊语的人参加比赛的限制被放宽了，奥林匹克的组织者接受了来自海外的运动员，如从非洲大陆的埃及和利比亚这样的领地来的人。许多城邦甚至为运动员提供财政支持和设施，使他们能够把全部时间都用在训练上;有时，训练在运动会前一年多就开始了。<br>The ancient Olympics were a strange mix of a religious pilgrimage and a forum for intense athletic competition. As mentioned above,, Emperor Theodosius tried to permanently put an end to the games as pagan exercises, but they emerged again in 1896 after an interval of more than 1600 years. The Olympics maintained a religious theme from the beginning, varying in degree over time. The events were originally dedicated to the worship of gods and heroes, especially deceased heroes. They were, at times, called funeral games (as mentioned in Homer’s Iliad), and sometimes fertility festivals. The games gradually in the worship of the prominent cult of Zeus, the chief god. Today, the Olympics Games are secular events.<br>古代奥运会是宗教朝圣和激烈的体育比赛的奇特组合。如上所述，狄奥多西皇帝试图终止这种被当作异教徒活动的运动会，但它们在中断了1600多年后的1896年又出现了。奥运会保留了最初的宗教主题，但随着时间的推移，发生了不同程度的变化。比赛项目的设立最初是为了崇拜众神和英雄，特别是死去的英雄。有时，它们被叫做“葬礼”活动(如荷马的《伊利亚特》所提到的)，有时叫做丰收庆典。运动会在祭拜主神宙斯的活动中逐渐达到高潮。而今天奥运会的运动都是与宗教无关的比赛项目。<br>The most prominent symbols of the Olympic Games today did not originate in classical times. The Olympic torch was an innovation in 1916. The five rings were originally introduced to represent the first five Olympics of the modern era from 1896 to 1912. In 1920 the rings were revived to represent the five continents with North and South America being represented by one ring. The 1936 Olympics in Nazi Germany, was the site of the first lighting of the Olympic flame.<br>现代奥运会最突出的象征并不是来源于古典时代。奥林匹克火炬是1916年的创新，而引进五环最初是表示从1896年到1912年的头五届现代奥运会。1920年，这些环重新被用来代表包括五个大陆，南北美洲用其中一个环表示。在纳粹德国举行的1936年奥运会，是第一次点燃奥林匹克圣火的地方。<br>The spirit of intense competition in association with heroism and national pride, remain major themes of the Olympics today, much as they were over 2000 years ago. Today, countries send their best, amateur and professional alike, to compete for the highest honors. Athletes also still try to find an advantage to give a better performance than all other competitors, sometimes, unfortunately, not always following the rules.<br>几乎与2000多年前一样，与英雄主义、民族自豪感相联系的努力拼搏的精神仍然是现代奥运会的主题。今天，每个国家派出他们最好的选手，不管是业余的还是职业的，来争夺最高的荣誉。运动员们仍然要想方设法取得优势，以胜过其他选手。不幸的是，有时候也会不遵守规则。<br>Every four years, or every two years when one includes the winter Olympics, which began in 1924, the world focuses on a human event that represents the good of humanity. Motivated for a couple of weeks, in those years, people and nations try to forget their troubles, put aside their differences and conflicts, and become part of a vast promotion of good global relations and cooperation. One sometimes wonders if the Olympics serve as a safety valve in international human relations, attributing to a collective sanity in a world that, not unlike that of ancient times, is perpetually the scene of conflict, strife, and human misery. Certainly one would like to think that that is the case. If not, one can always hope.<br>从1924年开始，每隔四年(如果你把冬季奥运会算进来的话则为每隔两年)，全世界的注意力都集中到这一表现人性好的一面的人类活动上。在这些年中的两个星期里，各国各民族设法忘掉他们的烦恼，撇开他们的分歧和冲突，参与到这个促进世界关系发展向前和合作的运动中。有人也许会想，在这个与古代没有什么两样，永远是冲突、斗争、悲剧的世界上，奥运会是否可以成为国际关系的安全阀，来唤醒人们共同的良知。人们当然愿意相信事实就是这样。如果不是，人们总是可以希望如此。</p>]]></content>
      
      
      <categories>
          
          <category> English </category>
          
      </categories>
      
      
        <tags>
            
            <tag> English </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CKA考试</title>
      <link href="/2024/08/12/CKA/"/>
      <url>/2024/08/12/CKA/</url>
      
        <content type="html"><![CDATA[<h3 id="1、权限控制-RBAC"><a href="#1、权限控制-RBAC" class="headerlink" title="1、权限控制 RBAC"></a>1、权限控制 RBAC</h3><p>设置配置环境：<br>[candidate@node-1] $ kubectl config use-context k8s<br><strong>Context</strong><br>为部署流水线创建一个新的 <strong>ClusterRole</strong> 并将其绑定到范围为特定的 namespace 的特定 <strong>ServiceAccount</strong>。<br><strong>Task</strong><br>创建一个名为<strong>deployment-clusterrole</strong> 且仅允许创建以下资源类型的新 <strong>ClusterRole</strong>：<br><strong>Deployment</strong><br><strong>StatefulSet</strong><br><strong>DaemonSet</strong><br>在现有的 namespace <strong>app-team1</strong> 中创建一个名为 <strong>cicd-token</strong> 的新 ServiceAccount。<br>限于 namespace <strong>app-team1</strong> 中，将新的 ClusterRole <strong>deployment-clusterrole</strong> 绑定到新的 ServiceAccount <strong>cicd-token</strong>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl create clusterrole -h</span><br><span class="line">kubectl create rolebinding -h</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubectl create clusterrole deployment-clusterrole --verb=create --resource=deployments,statefulsets,daemonsets</span><br><span class="line"></span><br><span class="line">kubectl -n app-team1 create serviceaccount cicd-token</span><br><span class="line"></span><br><span class="line"># 题目中写了“限于 namespace app-team1 中”，则创建 rolebinding。没有写的话，则创建 clusterrolebinding。</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl -n app-team1 create rolebinding cicd-token-rolebinding --clusterrole=deployment-clusterrole --serviceaccount=app-team1:cicd-token</span><br><span class="line"></span><br><span class="line"># rolebinding 后面的名字 cicd-token-rolebinding 随便起的，因为题目中没有要求，如果题目中有要求，就不能随便起了。</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 检查（考试时，可以不检查的）</span><br><span class="line">kubectl -n app-team1 describe rolebinding cicd-token-rolebinding</span><br></pre></td></tr></table></figure><h3 id="2、查看-pod-的-CPU"><a href="#2、查看-pod-的-CPU" class="headerlink" title="2、查看 pod 的 CPU"></a>2、查看 pod 的 CPU</h3><p>设置配置环境：<br>[candidate@node-1] $ kubectl config use-context k8s<br><strong>Task</strong><br>通过 pod label <strong>name&#x3D;cpu-loader</strong>，找到运行时占用大量 CPU 的 pod，<br>并将占用 CPU 最高的 pod 名称写入文件 <strong>&#x2F;opt&#x2F;KUTR000401&#x2F;KUTR00401.txt</strong>（已存在）。<br>kubectl top pod -h</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 查看 pod 名称 -A 是所有 namespace</span><br><span class="line">kubectl top pod -l name=cpu-loader --sort-by=cpu -A</span><br><span class="line"></span><br><span class="line"># 将 cpu 占用最多的 pod 的 name 写入/opt/test1.txt 文件</span><br><span class="line">echo &quot;查出来的 Pod Name&quot; &gt; /opt/KUTR000401/KUTR00401.txt</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">检查</span><br><span class="line">cat /opt/KUTR000401/KUTR00401.txt</span><br></pre></td></tr></table></figure><h3 id="3、配置网络策略-NetworkPolicy"><a href="#3、配置网络策略-NetworkPolicy" class="headerlink" title="3、配置网络策略 NetworkPolicy"></a>3、配置网络策略 NetworkPolicy</h3><p>设置配置环境：<br>[candidate@node-1] $ kubectl config use-context hk8s<br><strong>Task</strong><br>在现有的 namespace my-app 中创建一个名为 allow-port-from-namespace 的新 NetworkPolicy。<br>确保新的 NetworkPolicy 允许 namespace echo 中的 Pods 连接到 namespace my-app 中的 Pods 的 9000 端口。<br>进一步确保新的 NetworkPolicy：<br>不允许对没有在监听 端口 9000 的 Pods 的访问<br>不允许非来自 namespace echo 中的 Pods 的访问<br>双重否定就是肯定，所以最后两句话的意思就是： 仅允许端口为 9000 的 pod 方法。 仅允许 echo 命名空间中的 pod 访问。<br>Concepts → Services, Load Balancing, and Networking → Network Policies</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">查看所有 ns 的标签 label</span><br><span class="line">kubectl get ns --show-labels</span><br><span class="line">如果访问者的 namespace 没有标签 label，则需要手动打一个。如果有一个独特的标签 label，则也可以直接使用。</span><br><span class="line">kubectl label ns echo project=echo</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">vim networkpolicy.yaml</span><br><span class="line">apiVersion: networking.k8s.io/v1</span><br><span class="line">kind: NetworkPolicy</span><br><span class="line">metadata:</span><br><span class="line">  name: allow-port-from-namespace</span><br><span class="line">  namespace: my-app </span><br><span class="line">spec:</span><br><span class="line">  podSelector: #这两行必须要写，或者也可以写成一行为 podSelector: &#123;&#125;</span><br><span class="line">    matchLabels: &#123;&#125; # 注意 matchLabels:与&#123;&#125;之间有一个空格</span><br><span class="line">  policyTypes:</span><br><span class="line">  - Ingress #策略影响入栈流量</span><br><span class="line">  ingress:</span><br><span class="line">  - from: #允许流量的来源</span><br><span class="line">    - namespaceSelector:</span><br><span class="line">        matchLabels:</span><br><span class="line">          project: echo #访问者的命名空间的标签 label</span><br><span class="line"> #- podSelector: &#123;&#125; #注意，这个不写。如果 ingress 里也写了- podSelector: &#123;&#125;，则会导致 my-app 中的 pod 可以访问 my-app 中 pod 的 9000 了，这样不</span><br><span class="line">满足题目要求不允许非来自 namespace echo 中的 Pods 的访问。</span><br><span class="line">   ports:</span><br><span class="line">   - protocol: TCP</span><br><span class="line">   port: 9000 #被访问者公开的端口</span><br><span class="line"></span><br><span class="line">创建</span><br><span class="line">kubectl apply -f networkpolicy.yaml</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">检查</span><br><span class="line">kubectl describe networkpolicy -n my-app</span><br></pre></td></tr></table></figure><h3 id="4、暴露服务-service"><a href="#4、暴露服务-service" class="headerlink" title="4、暴露服务 service"></a>4、暴露服务 service</h3><p>设置配置环境：<br>[candidate@node-1] $ kubectl config use-context k8s<br><strong>Task</strong><br>请重新配置现有的 deployment <strong>front-end</strong> 以及添加名为 <strong>http</strong> 的端口规范来公开现有容器 <strong>nginx</strong> 的端口 <strong>80&#x2F;tcp</strong>。<br>创建一个名为 <strong>front-end-svc</strong> 的新 service，以公开容器端口 <strong>http</strong>。<br>配置此 service，以通过各个 Pod 所在的节点上的 <strong>NodePort</strong> 来公开他们。<br>考点：将现有的 deploy 暴露成 nodeport 的 service。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">参考链接 </span><br><span class="line">https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/deployment/</span><br></pre></td></tr></table></figure><p><strong>解答</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">检查 deployment 信息，并记录 SELECTOR 的 Lable 标签，这里是 app=front-end</span><br><span class="line">kubectl get deployment front-end -o wide</span><br><span class="line">参考官方文档，按照需要 edit deployment，添加端口信息</span><br><span class="line">kubectl edit deployment front-end</span><br><span class="line">#注意 :set paste，防止 yaml 文件空格错序。</span><br><span class="line"> spec:</span><br><span class="line">   containers:</span><br><span class="line">   - image: vicuu/nginx:hello</span><br><span class="line">     imagePullPolicy: IfNotPresent</span><br><span class="line">     name: nginx #找到此位置。下文会简单说明一下 yaml 文件的格式，不懂 yaml 格式的，往下看。</span><br><span class="line">     ports: #添加这 4 行</span><br><span class="line">     - name: http</span><br><span class="line">       containerPort: 80</span><br><span class="line">       protocol: TCP</span><br></pre></td></tr></table></figure><p>暴露对应端口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl expose deployment front-end --type=NodePort --port=80 --target-port=80 --name=front-end-svc</span><br><span class="line">#注意考试中需要创建的是 NodePort，还是 ClusterIP。如果是 ClusterIP，则应为--type=ClusterIP</span><br><span class="line">#--port 是 service 的端口号，--target-port 是 deployment 里 pod 的容器的端口号。</span><br></pre></td></tr></table></figure><p>暴露服务后，检查一下 service 的 selector 标签是否正确，这个要与 deployment 的 selector 标签一致的。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl get svc front-end-svc -o wide</span><br><span class="line">kubectl get deployment front-end -o wide</span><br></pre></td></tr></table></figure><p>如果你 kubectl expose 暴露服务后，发现 service 的 selector 标签是空的<none>，或者不是 deployment 的。<br>则需要编辑此 service，手动添加标签。（模拟环境里暴露服务后，selector 标签是正确的。但是考试时，有时 service 的 selector 标签是 none）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl edit svc front-end-svc</span><br><span class="line">在 ports 这一小段下面添加 selector 标签</span><br><span class="line"> selector:</span><br><span class="line"> app: front-end #注意 yaml 里是写冒号，而不是等号，不是 app=front-end。</span><br></pre></td></tr></table></figure><p>确保 service 的 selector 标签与 deployment 的 selector 标签一致。<br>最后 curl 检查 kubectl get pod,svc -o wide<br>curl 所在的 node 的 ip 或主机名:30938<br>curl svc 的 ip 地址:80<br>（注意，只能 curl 通 svc 的 80 端口，但是无法 ping 通的。）<br>考试时，如果 curl 不通，简单排错后也不通，就不要过于纠结，继续往下做题即可。因为部分同学反馈 curl 不通，不清楚是否为考试集群环境的问题。 只要确保都做对了，即使 curl 不通，也最多扣几分而已，是有其他步骤分的。</p><h3 id="5、创建-Ingress"><a href="#5、创建-Ingress" class="headerlink" title="5、创建 Ingress"></a>5、创建 Ingress</h3><p>设置配置环境： [candidate@node-1] $ kubectl config use-context k8s<br><strong>Task</strong><br>如下创建一个新的 nginx Ingress 资源：<br>名称: <strong>ping</strong><br>Namespace: <strong>ing-internal</strong><br>使用服务端口 <strong>5678</strong> 在路径 <strong>&#x2F;hello</strong> 上公开服务 <strong>hello</strong><br>可以使用以下命令检查服务 <strong>hello</strong> 的可用性，该命令应返回 <strong>hello</strong>：<br>curl -kL <INTERNAL_IP>&#x2F;hello<br>考点：Ingress 的创建<br>依次点击 Concepts → Services, Load Balancing, and Networking → Ingress </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">vim ingress.yaml</span><br><span class="line">apiVersion: networking.k8s.io/v1</span><br><span class="line">kind: IngressClass</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    app.kubernetes.io/component: controller</span><br><span class="line">  name: nginx-example</span><br><span class="line">  annotations:</span><br><span class="line">    ingressclass.kubernetes.io/is-default-class: &quot;true&quot;</span><br><span class="line">spec:</span><br><span class="line">  controller: k8s.io/ingress-nginx</span><br><span class="line">---</span><br><span class="line">apiVersion: networking.k8s.io/v1</span><br><span class="line">kind: Ingress</span><br><span class="line">metadata:</span><br><span class="line">  name: ping</span><br><span class="line">  namespace: ing-internal</span><br><span class="line">  annotations:</span><br><span class="line">    nginx.ingress.kubernetes.io/rewrite-target: /</span><br><span class="line">spec:</span><br><span class="line">  ingressClassName: nginx-example</span><br><span class="line">  rules:</span><br><span class="line">  - http:</span><br><span class="line">      paths:</span><br><span class="line">      - path: /hello</span><br><span class="line">        pathType: Prefix</span><br><span class="line">        backend:</span><br><span class="line">          service:</span><br><span class="line">            name: hello</span><br><span class="line">            port:</span><br><span class="line">              number: 5678</span><br><span class="line">创建</span><br><span class="line">kubectl apply -f ingress.yaml</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">最后 curl 检查</span><br><span class="line"># 通过 get ingress 查看 ingress 的内外 IP，然后通过提供的 curl 测试 ingress 是否正确。</span><br><span class="line"># 做完题后，略等 3 分钟，再检查，否则可能还没获取 IP 地址。或者可以先去做别的题，等都做完了，再回来检查这道题，一下，记得回来检查时，先使用 kubectl </span><br><span class="line">config use-context k8s 切换到此集群。</span><br><span class="line">kubectl get ingress -n ing-internal</span><br><span class="line">curl ingress 的 ip 地址/hello</span><br></pre></td></tr></table></figure><h3 id="6、扩容-deployment-副本数量"><a href="#6、扩容-deployment-副本数量" class="headerlink" title="6、扩容 deployment 副本数量"></a>6、扩容 deployment 副本数量</h3><p>设置配置环境： [candidate@node-1] $ kubectl config use-context k8s<br><strong>Task</strong><br>将 deployment <strong>presentation</strong> 扩展至 <strong>4</strong> 个 pods<br>kubectl scale deployment -h</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">扩展成 4 个</span><br><span class="line">kubectl scale deployment presentation --replicas=4</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ kubectl get deployments presentation -o wide</span><br><span class="line">NAME           READY   UP-TO-DATE   AVAILABLE   AGE    CONTAINERS   IMAGES              SELECTOR</span><br><span class="line">presentation   4/4     4            4           251d   nginx        vicuu/nginx:hello   app=presentation</span><br><span class="line">candidate@node01:~$ kubectl get pod -l app=presentation</span><br><span class="line">NAME                           READY   STATUS    RESTARTS      AGE</span><br><span class="line">presentation-78777866b-8v7p5   1/1     Running   0             39s</span><br><span class="line">presentation-78777866b-dvpm9   1/1     Running   0             39s</span><br><span class="line">presentation-78777866b-lbvk2   1/1     Running   0             39s</span><br><span class="line">presentation-78777866b-n855j   1/1     Running   4 (63m ago)   251d</span><br></pre></td></tr></table></figure><h3 id="7、调度-pod-到指定节点"><a href="#7、调度-pod-到指定节点" class="headerlink" title="7、调度 pod 到指定节点"></a>7、调度 pod 到指定节点</h3><p>设置配置环境： [candidate@node-1] $ kubectl config use-context k8s<br><strong>Task</strong><br>按如下要求调度一个 pod：<br>名称：<strong>nginx-kusc00401</strong><br>Image：<strong>nginx</strong><br>Node selector：<strong>disk&#x3D;ssd</strong><br>依次点击 Tasks → Configure Pods and Containers → Assign Pods to Nodes</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl get nodes --show-labels|grep &#x27;disk=ssd&#x27;</span><br><span class="line">kubectl label nodes node01 disk=ssd</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vim pod-disk-ssd.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-kusc00401</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - name: nginx</span><br><span class="line">    image: nginx</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br><span class="line">  nodeSelector:</span><br><span class="line">    disk: ssd</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f pod-disk-ssd.yaml</span><br><span class="line">candidate@node01:~$ kubectl get pod nginx-kusc00401 -o wide</span><br><span class="line">NAME              READY   STATUS    RESTARTS   AGE   IP               NODE     NOMINATED NODE   READINESS GATES</span><br><span class="line">nginx-kusc00401   1/1     Running   0          6s    10.244.196.182   node01   &lt;none&gt;           &lt;none&gt;</span><br></pre></td></tr></table></figure><h3 id="8、查看可用节点数量"><a href="#8、查看可用节点数量" class="headerlink" title="8、查看可用节点数量"></a>8、查看可用节点数量</h3><p>设置配置环境： [candidate@node-1] $ kubectl config use-context k8s<br><strong>Task</strong><br>检查有多少 nodes 已准备就绪（不包括被打上 Taint：<strong>NoSchedule</strong> 的节点），<br>并将数量写入 <strong>&#x2F;opt&#x2F;KUSC00402&#x2F;kusc00402.txt</strong><br>kubectl -h</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ kubectl describe nodes |grep -i Taint |grep -vc NoSchedule</span><br><span class="line">2</span><br><span class="line">candidate@node01:~$ echo &quot;2&quot; &gt; /opt/KUSC00402/kusc00402.txt</span><br></pre></td></tr></table></figure><h3 id="9、创建多容器的-pod"><a href="#9、创建多容器的-pod" class="headerlink" title="9、创建多容器的 pod"></a>9、创建多容器的 pod</h3><p>设置配置环境： [candidate@node-1] $ kubectl config use-context k8s<br><strong>Task</strong><br>按如下要求调度一个 Pod：<br>名称：<strong>kucc8</strong><br>app containers: <strong>2</strong><br>container 名称&#x2F;images： </p><ul><li><strong>nginx</strong></li><li><strong>consul</strong></li></ul><p>依次点击 Concepts → Workloads → Pods</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: kucc8</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - name: nginx</span><br><span class="line">    image: nginx</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br><span class="line">  - name: consul</span><br><span class="line">    image: consul</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f pod-kucc.yaml</span><br><span class="line">kubectl get pod kucc8</span><br></pre></td></tr></table></figure><h3 id="10、创建-PV"><a href="#10、创建-PV" class="headerlink" title="10、创建 PV"></a>10、创建 PV</h3><p>设置配置环境： [candidate@node-1] $ kubectl config use-context hk8s<br><strong>Task</strong><br>创建名为 <strong>app-config</strong> 的 <strong>persistent volume</strong>，容量为 <strong>1Gi</strong>，<br>访问模式为 <strong>ReadWriteMany</strong>。 volume 类型为 <strong>hostPath</strong>，位于 <strong>&#x2F;srv&#x2F;app-config</strong><br>依次点击 Tasks → Configure Pods and Containers → Configure a Pod to Use a PersistentVolume for Storage</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vim pv.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolume</span><br><span class="line">metadata:</span><br><span class="line">  name: app-config</span><br><span class="line">spec:</span><br><span class="line">  capacity:</span><br><span class="line">    storage: 1Gi</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteMany</span><br><span class="line">  hostPath:</span><br><span class="line">    path: &quot;/srv/app-config&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ kubectl apply -f pv.yaml </span><br><span class="line">persistentvolume/app-config created</span><br><span class="line">candidate@node01:~$ kubectl get pv</span><br><span class="line">app-config</span><br></pre></td></tr></table></figure><h3 id="11、创建-PVC"><a href="#11、创建-PVC" class="headerlink" title="11、创建 PVC"></a>11、创建 PVC</h3><p>设置配置环境： [candidate@node-1] $ kubectl config use-context ok8s<br><strong>Task</strong><br>创建一个新的 <strong>PersistentVolumeClaim</strong>：<br>名称: <strong>pv-volume</strong><br>Class: <strong>csi-hostpath-sc</strong><br>容量: <strong>10Mi</strong><br>创建一个新的 Pod，来将 <strong>PersistentVolumeClaim</strong> 作为 volume 进行挂载：<br>名称：<strong>web-server</strong><br>Image：<strong>nginx:1.16</strong><br>挂载路径：**&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html**<br>配置新的 Pod，以对 volume 具有 <strong>ReadWriteOnce</strong> 权限。<br>最后，使用 <strong>kubectl edit</strong> 或 <strong>kubectl patch</strong> 将 <strong>PersistentVolumeClaim</strong> 的容量扩展为 <strong>70Mi，并记录此更改。</strong><br>依次点击 Tasks → Configure Pods and Containers → Configure a Pod to Use a PersistentVolume for Storage</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vim pvc.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">metadata:</span><br><span class="line">  name: pv-volume</span><br><span class="line">spec:</span><br><span class="line">  storageClassName: csi-hostpath-sc</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce</span><br><span class="line">  resources:</span><br><span class="line">    requests:</span><br><span class="line">      storage: 10Mi</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f pvc.yaml</span><br><span class="line">kubectl get pvc</span><br><span class="line">pv-volume   Bound</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vim pvc-pod.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: web-server</span><br><span class="line">spec:</span><br><span class="line">  volumes:</span><br><span class="line">    - name: task-pv-storage</span><br><span class="line">      persistentVolumeClaim:</span><br><span class="line">        claimName: pv-volume</span><br><span class="line">  containers:</span><br><span class="line">    - name: nginx</span><br><span class="line">      image: nginx:1.16</span><br><span class="line">      volumeMounts:</span><br><span class="line">        - mountPath: &quot;/usr/share/nginx/html&quot;</span><br><span class="line">          name: task-pv-storage</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f pvc-pod.yaml </span><br><span class="line">kubectl get pod web-server</span><br><span class="line">web-server   1/1     Running</span><br></pre></td></tr></table></figure><p>将 storage: 10Mi 改为 storage: 70Mi<br>kubectl edit pvc pv-volume –record</p><h3 id="12、查看-pod-日志"><a href="#12、查看-pod-日志" class="headerlink" title="12、查看 pod 日志"></a>12、查看 pod 日志</h3><p>设置配置环境： [candidate@node-1] $ kubectl config use-context k8s<br><strong>Task</strong><br>监控 pod <strong>foo</strong> 的日志并：<br>提取与错误 <strong>RLIMIT_NOFILE</strong> 相对应的日志行<br>将这些日志行写入 <strong>&#x2F;opt&#x2F;KUTR00101&#x2F;foo</strong><br>kubectl logs foo |grep “RLIMIT_NOFILE” &gt; &#x2F;opt&#x2F;KUTR00101&#x2F;foocat &#x2F;opt&#x2F;KUTR00101&#x2F;foo</p><h3 id="13、使用-sidecar-代理容器日志"><a href="#13、使用-sidecar-代理容器日志" class="headerlink" title="13、使用 sidecar 代理容器日志"></a>13、使用 sidecar 代理容器日志</h3><p>设置配置环境： [candidate@node-1] $ kubectl config use-context k8s<br><strong>Context</strong><br>将一个现有的 Pod 集成到 Kubernetes 的内置日志记录体系结构中（例如 kubectl logs）。<br>添加 streaming sidecar 容器是实现此要求的一种好方法。<br><strong>Task</strong><br>使用 <strong>busybox</strong> Image 来将名为 <strong>sidecar</strong> 的 sidecar 容器添加到现有的 Pod <strong>11-factor-app</strong> 中。<br>新的 sidecar 容器必须运行以下命令：<br><strong>&#x2F;bin&#x2F;sh -c tail -n+1 -f &#x2F;var&#x2F;log&#x2F;11-factor-app.log</strong><br>使用挂载在**&#x2F;var&#x2F;log** 的 Volume，使日志文件 <strong>11-factor-app.log</strong> 可用于 sidecar 容器。<br>除了添加所需要的 volume mount 以外，请勿更改现有容器的规格。<br>依次点击 Concepts → Cluster Administration → Logging Architecture</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pod 11-factor-app -o yaml &gt; varlog.yaml</span><br><span class="line">cp varlog.yaml varlog-bak.yaml </span><br><span class="line">vim varlog.yaml</span><br><span class="line">    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount</span><br><span class="line">      name: kube-api-access-xhzsg</span><br><span class="line">      readOnly: true</span><br><span class="line">    - name: varlog</span><br><span class="line">      mountPath: /var/log</span><br><span class="line">  - name: sidecar</span><br><span class="line">    image: busybox</span><br><span class="line">    args: [/bin/sh, -c, &#x27;tail -n+1 -F /var/log/11-factor-app.log&#x27;]</span><br><span class="line">    volumeMounts:</span><br><span class="line">    - name: varlog</span><br><span class="line">      mountPath: /var/log</span><br><span class="line">  dnsPolicy: ClusterFirst</span><br><span class="line">...</span><br><span class="line">  - name: varlog</span><br><span class="line">    emptyDir: &#123;&#125;         </span><br><span class="line">status:</span><br><span class="line">  conditions:</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 删除原先的 pod</span><br><span class="line">kubectl delete pod 11-factor-app</span><br><span class="line">kubectl get pod 11-factor-app</span><br><span class="line"># 新建这个 pod</span><br><span class="line">kubectl apply -f varlog.yaml</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f varlog.yaml </span><br><span class="line">kubectl get pod 11-factor-app</span><br><span class="line">kubectl logs 11-factor-app sidecar</span><br></pre></td></tr></table></figure><h3 id="14、升级集群"><a href="#14、升级集群" class="headerlink" title="14、升级集群"></a>14、升级集群</h3><p>设置配置环境： [candidate@node-1] $ kubectl config use-context mk8s<br><strong>Task</strong><br>现有的 Kubernetes 集群正在运行版本 <strong>1.29.1</strong>。<strong>仅将 master 节点</strong>上的所有 Kubernetes 控制平面和节点组件升级到版本 <strong>1.29.2</strong>。<br>确保在升级之前 drain master 节点，并在升级后 uncordon master 节点。<br>可以使用以下命令，通过 ssh 连接到 master 节点： ssh master01 可<br>以使用以下命令，在该 master 节点上获取更高权限： sudo -i<br>另外，在主节点上升级 <strong>kubelet</strong> 和 <strong>kubectl</strong>。 请不要升级工作节点，etcd，container 管理器，CNI 插件， DNS 服务或任何其他插件。<br>（注意，考试敲命令时，注意要升级的版本，根据题目要求输入具体的升级版本！！！）<br>依次点击 Tasks → Administer a Cluster → Administration with kubeadm → Upgrading kubeadm clusters </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl get nodes</span><br><span class="line">kubectl cordon master01     ##cordon 停止调度</span><br><span class="line">kubectl drain master01 --ignore-daemonsets  ##drain 驱逐节点</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ssh 到 master 节点，并切换到 root 下</span><br><span class="line">ssh master01</span><br><span class="line">sudo -i</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-cache show kubeadm|grep 1.29.2</span><br><span class="line">apt-get install kubeadm=1.29.2-00</span><br><span class="line">kubeadm version</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 验证升级计划，会显示很多可升级的版本，我们关注题目要求升级到的那个版本。</span><br><span class="line">kubeadm upgrade plan</span><br><span class="line"># 排除 etcd，升级其他的，提示时，输入 y。</span><br><span class="line">kubeadm upgrade apply v1.29.2 --etcd-upgrade=false</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">升级 kubelet</span><br><span class="line">apt-get install kubelet=1.29.2-00</span><br><span class="line">kubelet --version</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">升级 kubectl</span><br><span class="line">apt-get install kubectl=1.29.2-00</span><br><span class="line">kubectl version</span><br></pre></td></tr></table></figure><p>exit exit</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl uncordon master01 ##恢复 master01 调度</span><br><span class="line">kubectl get node</span><br></pre></td></tr></table></figure><h3 id="15、备份还原-etcd"><a href="#15、备份还原-etcd" class="headerlink" title="15、备份还原 etcd"></a>15、备份还原 etcd</h3><p>设置配置环境 此项目无需更改配置环境。<br>但是，在执行此项目之前，请确保您已返回初始节点。<br>[candidate@master01] $ exit #注意，这个之前是在 master01 上，所以要 exit 退到 node01，如果已经是 node01 了，就不要再 exit 了。<br><strong>Task</strong><br>首先，为运行在 <a href="https://11.0.1.111:2379/">https://11.0.1.111:2379</a> 上的现有 <strong>etcd</strong> 实例创建快照并将快照保存到 <strong>&#x2F;var&#x2F;lib&#x2F;backup&#x2F;etcd-snapshot.db</strong> （注意，真实考试中，这里写的是 <a href="https://127.0.0.1:2379/">https://127.0.0.1:2379</a>）<br>为给定实例创建快照预计能在几秒钟内完成。 如果该操作似乎挂起，则命令可能有问题。用 CTRL + C 来取消操作，然后重试。 然后还原位于**&#x2F;data&#x2F;backup&#x2F;etcd-snapshot-previous.db** 的现有先前快照。<br>提供了以下 TLS 证书和密钥，以通过 etcdctl 连接到服务器。<br>CA 证书: &#x2F;opt&#x2F;KUIN00601&#x2F;ca.crt<br>客户端证书: &#x2F;opt&#x2F;KUIN00601&#x2F;etcd-client.crt<br>客户端密钥: &#x2F;opt&#x2F;KUIN00601&#x2F;etcd-client.key<br>export ETCDCTL_API&#x3D;3etcdctl -h</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">etcdctl --endpoints=https://11.0.1.111:2379 --cacert=&quot;/opt/KUIN00601/ca.crt&quot; --cert=&quot;/opt/KUIN00601/etcd-client.crt&quot; --key=&quot;/opt/KUIN00601/etcd-client.key&quot; snapshot save /var/lib/backup/etcd-snapshot.db</span><br><span class="line"></span><br><span class="line">Snapshot saved at /var/lib/backup/etcd-snapshot.db</span><br></pre></td></tr></table></figure><p>etcdctl snapshot status &#x2F;var&#x2F;lib&#x2F;backup&#x2F;etcd-snapshot.db -wtable #检查</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo ETCDCTL_API=3 etcdctl --endpoints=https://11.0.1.111:2379 --cacert=&quot;/opt/KUIN00601/ca.crt&quot; --cert=&quot;/opt/KUIN00601/etcd-client.crt&quot; --key=&quot;/opt/KUIN00601/etcd-client.key&quot; snapshot restore /data/backup/etcd-snapshot-previous.db</span><br><span class="line"></span><br><span class="line">restored snapshot        &#123;&quot;path&quot;: &quot;/data/backup/etcd-snapshot-previous.db&quot;,</span><br></pre></td></tr></table></figure><h3 id="16、排查集群中故障节点"><a href="#16、排查集群中故障节点" class="headerlink" title="16、排查集群中故障节点"></a>16、排查集群中故障节点</h3><p>设置配置环境： [candidate@node-1] $ kubectl config use-context wk8s<br><strong>Task</strong><br>名为 <strong>node02</strong> 的 Kubernetes worker node 处于 <strong>NotReady</strong> 状态。<br>调查发生这种情况的原因，并采取相应的措施将 node 恢复为 <strong>Ready</strong> 状态，确保所做的任何更改<strong>永久生效</strong>。<br>可以使用以下命令，通过 ssh 连接到 node02 节点： ssh node02<br>可以使用以下命令，在该节点上获取更高权限： sudo -i<br>记住先 restart 再 enable 就行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在 candidate@node01 上执行模拟环境</span><br><span class="line">sudo sh /opt/sh/a.sh</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl get nodes</span><br><span class="line">node02     NotReady</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh node02</span><br><span class="line">sudo -i</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl status kubelet</span><br><span class="line">systemctl start kubelet</span><br><span class="line">systemctl enable kubelet</span><br><span class="line">systemctl status kubelet</span><br></pre></td></tr></table></figure><p>exit exit</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl get nodes</span><br><span class="line">node02     Ready</span><br></pre></td></tr></table></figure><h3 id="17、节点维护"><a href="#17、节点维护" class="headerlink" title="17、节点维护"></a>17、节点维护</h3><p>设置配置环境： [candidate@node-1] $ kubectl config use-context ek8s<br><strong>Task</strong><br>将名为 node02 的 node 设置为不可用，并重新调度该 node 上所有运行的 pods。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl -h</span><br><span class="line">kubectl drain -h</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl get node</span><br><span class="line">kubectl cordon node02</span><br><span class="line">kubectl get node</span><br></pre></td></tr></table></figure><p>kubectl drain node02 –ignore-daemonsets –delete-emptydir-data –force</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl get node</span><br><span class="line">kubectl get pod -A -o wide|grep node02</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kubernetes考试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ClickHouse快速上手</title>
      <link href="/2024/08/12/ClickHouse_start/"/>
      <url>/2024/08/12/ClickHouse_start/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><h2 id="项目目标"><a href="#项目目标" class="headerlink" title="项目目标"></a>项目目标</h2><p>（1）了解ClickHouse特性与优势<br>（2）熟练掌握ClickHouse安装部署<br>（3）熟练掌握ClickHouse基本用法</p><h2 id="项目准备"><a href="#项目准备" class="headerlink" title="项目准备"></a>项目准备</h2><h3 id="规划节点"><a href="#规划节点" class="headerlink" title="规划节点"></a>规划节点</h3><table><thead><tr><th>主机名</th><th>主机IP</th><th>节点规划</th></tr></thead><tbody><tr><td>clickhouse</td><td>10.0.1.10</td><td>clickhouse</td></tr></tbody></table><h3 id="基础准备"><a href="#基础准备" class="headerlink" title="基础准备"></a>基础准备</h3><p><strong>系统镜像：CentOS 7.9</strong><br><strong>官方网址：</strong><a href="https://clickhouse.com/docs/zh"><strong>ClickHouse Docs</strong></a></p><h2 id="项目实施"><a href="#项目实施" class="headerlink" title="项目实施"></a>项目实施</h2><h3 id="ClickHouse入门"><a href="#ClickHouse入门" class="headerlink" title="ClickHouse入门"></a>ClickHouse入门</h3><p>ClickHouse官方简介：<a href="https://clickhouse.com/docs/category/%E7%AE%80%E4%BB%8B">简介 | ClickHouse Docs</a></p><h4 id="1）什么是ClickHouse"><a href="#1）什么是ClickHouse" class="headerlink" title="1）什么是ClickHouse"></a>1）什么是ClickHouse</h4><p>ClickHouse是一个用于联机分析(OLAP)的列式数据库管理系统(DBMS)。<br>在传统的行式数据库系统中，数据按<strong>列式</strong>顺序存储：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1715241891931-6f592e6f-e23a-4305-9ed1-8d734d1e9e6f.png#averageHue=%23fefefd&clientId=ueffc7582-c9db-4&from=paste&height=303&id=uf1d72dbe&originHeight=455&originWidth=992&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=28364&status=done&style=none&taskId=ub9a53fc3-1d4e-44ae-a308-308e52af228&title=&width=661.3333333333334" alt="image.png"><br>处于同一行中的数据总是被物理的存储在一起。<br>常见的行式数据库系统有：<strong>MySQL</strong>、<strong>Postgres</strong>和<strong>MS SQL Server</strong>。<br>在列式数据库系统中，数据按如下的顺序存储：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1715241979901-31aa5ab2-43fe-4eab-974e-3c27773385a4.png#averageHue=%23fefdfd&clientId=ueffc7582-c9db-4&from=paste&height=268&id=ufdf1e782&originHeight=424&originWidth=956&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=21179&status=done&style=none&taskId=ucc18796b-839c-472c-b5f0-9b2333702d2&title=&width=603.3333740234375" alt="image.png"><br>列式数据库更适合于OLAP场景(对于大多数查询而言，处理速度至少提高了100倍)，下面详细解释了原因(通过图片更有利于直观理解)：<br><img src="https://cdn.nlark.com/yuque/0/2024/gif/43111799/1715242082003-da5de4d6-3697-420a-b8a4-c17bec61a527.gif#averageHue=%23fef2ca&clientId=ueffc7582-c9db-4&from=paste&height=449&id=u00ee6d2c&originHeight=673&originWidth=945&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=188414&status=done&style=none&taskId=uda1623d0-f81e-4fe7-82fc-9e933369095&title=&width=630" alt="recording.gif"><br>详细内容参考：<a href="https://clickhouse.com/docs/zh">什么是ClickHouse？</a></p><h4 id="2）ClickHouse优势"><a href="#2）ClickHouse优势" class="headerlink" title="2）ClickHouse优势"></a>2）ClickHouse优势</h4><p>ClickHouse凭借极致的列存和向量化计算会有更加出色的并发表现，并且查询支持完备度也更好。ClickHouse的并发处理能力立足于磁盘吞吐，ClickHouse更加适合低成本、大数据量的分析场景，比如说数据报表。它能够充分利用磁盘的带宽能力。数据导入和存储成本上，ClickHouse具有绝对的优势。</p><h3 id="安装部署"><a href="#安装部署" class="headerlink" title="安装部署"></a>安装部署</h3><h4 id="1）添加官方存储库"><a href="#1）添加官方存储库" class="headerlink" title="1）添加官方存储库"></a>1）添加官方存储库</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> yum install -y yum-utils</span><br><span class="line"><span class="built_in">sudo</span> yum-config-manager --add-repo https://packages.clickhouse.com/rpm/clickhouse.repo</span><br></pre></td></tr></table></figure><h4 id="2）运行命令安装"><a href="#2）运行命令安装" class="headerlink" title="2）运行命令安装"></a>2）运行命令安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> yum install -y clickhouse-server clickhouse-client</span><br></pre></td></tr></table></figure><h4 id="3）启动服务"><a href="#3）启动服务" class="headerlink" title="3）启动服务"></a>3）启动服务</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> /etc/init.d/clickhouse-server start</span><br></pre></td></tr></table></figure><h4 id="4）客户端连接"><a href="#4）客户端连接" class="headerlink" title="4）客户端连接"></a>4）客户端连接</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clickhouse-client</span><br></pre></td></tr></table></figure><h4 id="5）验证"><a href="#5）验证" class="headerlink" title="5）验证"></a>5）验证</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">:) <span class="keyword">SELECT</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">┌─<span class="number">1</span>─┐</span><br><span class="line">│ <span class="number">1</span> │</span><br><span class="line">└───┘</span><br><span class="line"></span><br><span class="line"><span class="number">1</span> <span class="keyword">rows</span> <span class="keyword">in</span> set. Elapsed: <span class="number">0.003</span> sec.</span><br><span class="line"></span><br><span class="line">:)</span><br></pre></td></tr></table></figure><p>部署成功了！</p><h3 id="基础使用教程"><a href="#基础使用教程" class="headerlink" title="基础使用教程"></a>基础使用教程</h3><p>官方示例数据集：<a href="https://clickhouse.com/docs/zh/getting-started/example-datasets">https://clickhouse.com/docs/zh/getting-started/example-datasets</a><br>阿里云SQL语句教程：<a href="https://help.aliyun.com/zh/clickhouse/developer-reference/sql-syntax-1/?spm=a2c4g.11186623.0.0.2ef17506yJSZ8e">SQL语句</a></p><h4 id="1）创建数据库"><a href="#1）创建数据库" class="headerlink" title="1）创建数据库"></a>1）创建数据库</h4><p><strong>语法：</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] db_name [<span class="keyword">ON</span> CLUSTER cluster] [ENGINE <span class="operator">=</span> engine(...)]</span><br><span class="line">ENGINE <span class="operator">=</span> MySQL(<span class="string">&#x27;host:port&#x27;</span>, [<span class="string">&#x27;database&#x27;</span> <span class="operator">|</span> database], <span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;password&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>示例：</strong>创建一个名为sqltest的库</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> sqltest;</span><br></pre></td></tr></table></figure><p><strong>查看库：</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> databases;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1715238673684-4b5ac640-7147-45c8-89c8-b4777e44ddbf.png#averageHue=%23242322&clientId=ueffc7582-c9db-4&from=paste&height=252&id=uea33b345&originHeight=421&originWidth=766&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=24504&status=done&style=none&taskId=ud4e86def-3878-49db-a181-cdfbeaca25c&title=&width=457.66668701171875" alt="image.png"><br><strong>进入数据库：</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use sqltest;</span><br></pre></td></tr></table></figure><p>一般都使用自带<strong>引擎</strong>，也可以使用别的引擎，例如使用MySQL：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE mysql_db ENGINE <span class="operator">=</span> MySQL(<span class="string">&#x27;10.0.1.10:3306&#x27;</span>, <span class="string">&#x27;clickhouse&#x27;</span>, <span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;000000&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="2）创建表"><a href="#2）创建表" class="headerlink" title="2）创建表"></a>2）创建表</h4><p>与创建数据库相比，创建表的语法要复杂得多，一般<strong>CREATE TABLE</strong>声明必须指定三个关键的事情:</p><ol><li>要创建的表的名称。</li><li>表结构，例如：列名和对应的<a href="https://clickhouse.com/docs/zh/sql-reference/data-types">数据类型</a>。</li><li><a href="https://clickhouse.com/docs/zh/engines/table-engines">表引擎</a>及其设置，这决定了对此表的查询操作是如何在物理层面执行的所有细节。</li></ol><p><strong>语法：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE [IF NOT EXISTS] [db.]table_name [ON CLUSTER cluster]</span><br><span class="line">(</span><br><span class="line">    name1 [type1] [DEFAULT|MATERIALIZED|ALIAS expr1] [compression_codec] [TTL expr1],</span><br><span class="line">    name2 [type2] [DEFAULT|MATERIALIZED|ALIAS expr2] [compression_codec] [TTL expr2],</span><br><span class="line">    ...</span><br><span class="line">) ENGINE = engine</span><br></pre></td></tr></table></figure><p><strong>示例：</strong>创建一个表tabletest<br>第一个是name，第二个是type数据类型（<a href="https://help.aliyun.com/zh/clickhouse/developer-reference/data-types?spm=a2c4g.11186623.0.0.198342bcqglBeO">ClickHouse数据类型</a>）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tabletest(</span><br><span class="line">  yyyymmdd Int32,</span><br><span class="line">  name String，</span><br><span class="line">  shows Int64,</span><br><span class="line">  loads Int64,</span><br><span class="line">  click Int64,</span><br><span class="line">  request Int64</span><br><span class="line">) engine<span class="operator">=</span>Memory;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1715238514972-7e3369c7-94e5-4c72-a481-8046232036bb.png#averageHue=%231e1d1d&clientId=ueffc7582-c9db-4&from=paste&height=335&id=ua6e7e3c8&originHeight=658&originWidth=1124&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=46709&status=done&style=none&taskId=u9a0099e4-b74f-49ce-883f-4ec3d1f0c10&title=&width=572" alt="image.png"><br><strong>查看表：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc table tabletest;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1715238580735-dee3d041-a831-4cbd-b1e0-9b6bc7806755.png#averageHue=%23222121&clientId=ueffc7582-c9db-4&from=paste&height=279&id=u8d4ec110&originHeight=419&originWidth=1524&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=33532&status=done&style=none&taskId=u130e6771-64e6-4118-a43d-6493867d380&title=&width=1016" alt="image.png"></p><h4 id="3）插入数据"><a href="#3）插入数据" class="headerlink" title="3）插入数据"></a>3）插入数据</h4><p><strong>语法：</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> [db.]<span class="keyword">table</span> [(c1, c2, c3)] <span class="keyword">VALUES</span> (v11, v12, v13), (v21, v22, v23)</span><br></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tabletest <span class="keyword">VALUES</span>(<span class="number">20240510</span>,<span class="string">&#x27;tom&#x27;</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>),(<span class="number">20240510</span>,<span class="string">&#x27;jack&#x27;</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1715239584782-79f98117-d01a-46ee-995a-d4fa78f9eec9.png#averageHue=%23212020&clientId=ueffc7582-c9db-4&from=paste&height=160&id=u2363ba0c&originHeight=240&originWidth=1305&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=21148&status=done&style=none&taskId=u89a69e66-bda5-4bbe-a969-9e17cc8a43c&title=&width=870" alt="image.png"><br><strong>查看：</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tabletest</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1715239599502-7869828f-86ca-4eeb-8a80-41858a56b9e6.png#averageHue=%23242322&clientId=ueffc7582-c9db-4&from=paste&height=229&id=ud1dc52c5&originHeight=344&originWidth=838&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=23447&status=done&style=none&taskId=uca5bc972-7f25-468e-b9f1-13cc9097b35&title=&width=558.6666666666666" alt="image.png"></p><h4 id="4）查询数据"><a href="#4）查询数据" class="headerlink" title="4）查询数据"></a>4）查询数据</h4><p><strong>语法：</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">DISTINCT</span>] expr_list</span><br><span class="line">    [<span class="keyword">FROM</span> [db.]<span class="keyword">table</span> <span class="operator">|</span> (subquery) <span class="operator">|</span> table_function] [<span class="keyword">FINAL</span>]</span><br><span class="line">    [SAMPLE sample_coeff]</span><br><span class="line">    [<span class="keyword">ARRAY</span> <span class="keyword">JOIN</span> ...]</span><br><span class="line">    [<span class="keyword">GLOBAL</span>] <span class="keyword">ANY</span><span class="operator">|</span><span class="keyword">ALL</span> <span class="keyword">INNER</span><span class="operator">|</span><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> (subquery)<span class="operator">|</span><span class="keyword">table</span> <span class="keyword">USING</span> columns_list</span><br><span class="line">    [PREWHERE expr]</span><br><span class="line">    [<span class="keyword">WHERE</span> expr]</span><br><span class="line">    [<span class="keyword">GROUP</span> <span class="keyword">BY</span> expr_list] [<span class="keyword">WITH</span> TOTALS]</span><br><span class="line">    [<span class="keyword">HAVING</span> expr]</span><br><span class="line">    [<span class="keyword">ORDER</span> <span class="keyword">BY</span> expr_list]</span><br><span class="line">    [LIMIT [n, ]m]</span><br><span class="line">    [<span class="keyword">UNION</span> <span class="keyword">ALL</span> ...]</span><br><span class="line">    [<span class="keyword">INTO</span> OUTFILE filename]</span><br><span class="line">    [FORMAT format]</span><br><span class="line">    [LIMIT n <span class="keyword">BY</span> columns]</span><br></pre></td></tr></table></figure><p><strong>示例：</strong>查询tabletest里 筛选shows展示大于1的</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> tabletest</span><br><span class="line"><span class="keyword">WHERE</span> shows<span class="operator">&gt;</span><span class="number">1</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/43111799/1715240938830-21e2cc3f-4a98-4965-84d7-7ae1da6490c1.png#averageHue=%23222121&clientId=ueffc7582-c9db-4&from=paste&height=273&id=u24f8fdac&originHeight=409&originWidth=900&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=26409&status=done&style=none&taskId=u6c3a6f3f-fee1-43f2-b429-249493fc064&title=&width=600" alt="image.png"><br>更详细教程：<a href="https://help.aliyun.com/zh/clickhouse/developer-reference/select?spm=a2c4g.11186623.0.0.501d245cTygk8I">使用SELECT语句查询数据</a></p><h2 id="项目总结"><a href="#项目总结" class="headerlink" title="项目总结"></a>项目总结</h2><p>本博客简要介绍了ClickHouse的特性，部署，使用。适合初学者快速入门上手使用ClickHouse。</p>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
          <category> ClickHouse </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ClickHouse </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CKS考试</title>
      <link href="/2024/08/12/CKS/"/>
      <url>/2024/08/12/CKS/</url>
      
        <content type="html"><![CDATA[<h3 id="1、kube-bench-修复不安全项"><a href="#1、kube-bench-修复不安全项" class="headerlink" title="1、kube-bench 修复不安全项"></a>1、kube-bench 修复不安全项</h3><p><strong>Context</strong><br>针对 kubeadm 创建的 cluster 运行 CIS 基准测试工具时，发现了多个必须立即解决的问题。<br><strong>Task</strong><br>通过配置修复所有问题并重新启动受影响的组件以确保新的设置生效。<br>修复针对 API 服务器发现的所有以下违规行为：<br>1.2.7 Ensure that the <strong>–authorization-mode</strong> argument is not set to <strong>AlwaysAllow</strong> FAIL<br>1.2.8 Ensure that the <strong>–authorization-mode</strong> argument includes <strong>Node</strong> FAIL<br>1.2.9 Ensure that the <strong>–authorization-mode</strong> argument includes <strong>RBAC</strong> FAIL<br>1.2.18 Ensure that the <strong>–insecure-bind-address</strong> argument is <strong>not set</strong> FAIL （v1.28 考题中这项没给出，但最好也检查一下，模拟环境是里需要改的）<br>修复针对 kubelet 发现的所有以下违规行为：<br>Fix all of the following violations that were found against the <strong>kubelet</strong>:<br>4.2.1 Ensure that the <strong>anonymous-auth</strong> argument is set to <strong>false</strong> FAIL<br>4.2.2 Ensure that the <strong>–authorization-mode</strong> argument is not set to <strong>AlwaysAllow</strong> FAIL<br>注意：尽可能使用 Webhook 身份验证&#x2F;授权。<br>修复针对 etcd 发现的所有以下违规行为：<br>Fix all of the following violations that were found against <strong>etcd</strong>:<br>2.2 Ensure that the <strong>–client-cert-auth</strong> argument is set to <strong>true</strong> FAIL<br>模拟环境里，初始化这道题的脚本为 kube-bench.sh</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ ssh master01</span><br><span class="line">candidate@master01:~$ sudo -i</span><br><span class="line">root@master01:~$ sh kube-bench.sh //模拟这道题的初始环境</span><br><span class="line">root@master01:~$ mkdir bak1</span><br><span class="line">root@master01:~$ cp /etc/kubernetes/manifests/kube-apiserver.yaml bak1/</span><br><span class="line">root@master01:~$ cp /etc/kubernetes/manifests/etcd.yaml bak1/</span><br><span class="line">root@master01:~$ cp /var/lib/kubelet/config.yaml bak1/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">root@master01:~$ vim /etc/kubernetes/manifests/kube-apiserver.yaml</span><br><span class="line"> - --authorization-mode=Node,RBAC</span><br><span class="line">#删除 insecure-bind-address。实际考试中，有可能本来就没写这行。</span><br><span class="line"> - --insecure-bind-address=0.0.0.0</span><br><span class="line"></span><br><span class="line">root@master01:~$ vim /var/lib/kubelet/config.yaml</span><br><span class="line"># anonymous 应该为 false，webhook 应该为 true。</span><br><span class="line"> anonymous: </span><br><span class="line"> enabled: false #将 true 改为 false</span><br><span class="line"> webhook:</span><br><span class="line"> enabled: true #修改为 true。</span><br><span class="line"></span><br><span class="line">authorization: #修改 authorization 下的</span><br><span class="line"> mode: Webhook #改为 Webhook</span><br><span class="line"></span><br><span class="line">root@master01:~$ vim /etc/kubernetes/manifests/etcd.yaml</span><br><span class="line"> - --client-cert-auth=true #修改为 true</span><br><span class="line"></span><br><span class="line">root@master01:~$ systemctl daemon-reload</span><br><span class="line">root@master01:~$ systemctl restart kubelet</span><br><span class="line">root@master01:~$ kubectl get pod -A # 确保所有的 pod 都是 Running</span><br><span class="line">exit,exit</span><br></pre></td></tr></table></figure><h3 id="2、Pod-指定-ServiceAccount"><a href="#2、Pod-指定-ServiceAccount" class="headerlink" title="2、Pod 指定 ServiceAccount"></a>2、Pod 指定 ServiceAccount</h3><p><strong>Context</strong><br>您组织的安全策略包括：<br>ServiceAccount 不得自动挂载 API 凭据<br>ServiceAccount 名称必须以“-sa”结尾<br>清单文件 <strong>&#x2F;cks&#x2F;sa&#x2F;pod1.yaml</strong> 中指定的 Pod 由于 ServiceAccount 指定错误而无法调度。<br>请完成一下项目：<br><strong>Task</strong><br>在现有 namespace <strong>qa</strong> 中创建一个名为 <strong>backend-sa</strong> 的新 ServiceAccount，确保此 ServiceAccount 不自动挂载 API 凭据。<br>使用 <strong>&#x2F;cks&#x2F;sa&#x2F;pod1.yaml</strong> 中的清单文件来创建一个 Pod。<br>最后，清理 namespace <strong>qa</strong> 中任何未使用的 ServiceAccount。</p><h5 id="1-创建-ServiceAccount"><a href="#1-创建-ServiceAccount" class="headerlink" title="1 创建 ServiceAccount"></a>1 创建 ServiceAccount</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">## 搜sa 全称configure-service-account</span><br><span class="line">candidate@node01:~$ vim qa-ns.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: ServiceAccount</span><br><span class="line">metadata:</span><br><span class="line"> name: backend-sa #修改 name</span><br><span class="line"> namespace: qa #注意添加 namespace</span><br><span class="line">automountServiceAccountToken: false #修改为 false，表示不自动挂载 secret</span><br><span class="line">candidate@node01:~$ kubectl apply -f qa-ns.yaml</span><br><span class="line">candidate@node01:~$ kubectl get sa -n qa</span><br><span class="line">NAME         SECRETS   AGE</span><br><span class="line">backend-sa   0         58s</span><br></pre></td></tr></table></figure><h5 id="2-创建-Pod-使用该-ServiceAccount"><a href="#2-创建-Pod-使用该-ServiceAccount" class="headerlink" title="2 创建 Pod 使用该 ServiceAccount"></a>2 创建 Pod 使用该 ServiceAccount</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ vi /cks/sa/pod1.yaml</span><br><span class="line">……</span><br><span class="line">metadata:</span><br><span class="line"> name: backend</span><br><span class="line"> namespace: qa #注意命名空间是否对</span><br><span class="line">spec:</span><br><span class="line"> serviceAccountName: backend-sa # 没有则添加一行，有则修改这一行</span><br><span class="line"> containers:</span><br><span class="line">……</span><br><span class="line">candidate@node01:~$ kubectl apply -f /cks/sa/pod1.yaml</span><br><span class="line">candidate@node01:~$ kubectl get pod -n qa</span><br><span class="line">NAME      READY   STATUS    RESTARTS      AGE</span><br><span class="line">backend   1/1     Running   0             8s</span><br></pre></td></tr></table></figure><h5 id="3-删除没有使用的-ServiceAccount"><a href="#3-删除没有使用的-ServiceAccount" class="headerlink" title="3 删除没有使用的 ServiceAccount"></a>3 删除没有使用的 ServiceAccount</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 查看所有 sa，下图可以看到一共有 3 个 sa。</span><br><span class="line">candidate@node01:~$ kubectl get sa -n qa</span><br><span class="line"># 查看已经在用的 sa，可以看到 default 和 backend-sa 都已经使用了。</span><br><span class="line">candidate@node01:~$ kubectl get pod -n qa -o yaml | grep -i serviceAccountName</span><br><span class="line"># 删除不用的 sa</span><br><span class="line">candidate@node01:~$ kubectl delete sa test01 -n qa</span><br></pre></td></tr></table></figure><h3 id="3、默认网络策略"><a href="#3、默认网络策略" class="headerlink" title="3、默认网络策略"></a>3、默认网络策略</h3><p><strong>Context</strong><br>一个默认拒绝（default-deny）的 NetworkPolicy 可避免在未定义任何其他 NetworkPolicy 的 namespace 中意外公开 Pod。<br><strong>Task</strong><br>为所有类型为 <strong>Ingress+Egress</strong> 的流量在 namespace <strong>testing</strong> 中创建一个名为 <strong>denypolicy</strong> 的新默认拒绝 NetworkPolicy。 此新的 NetworkPolicy 必须拒绝 namespace <strong>testing</strong> 中的所有的 <strong>Ingress + Egress</strong> 流量。 将新创建的默认拒绝 NetworkPolicy 应用与在 namespace <strong>testing</strong> 中运行的所有 Pod。<br>你可以在 <strong>&#x2F;cks&#x2F;net&#x2F;p1.yaml</strong> 找到一个模板清单文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">## 搜networkpolicy</span><br><span class="line">candidate@node01:~$ vi /cks/net/p1.yaml</span><br><span class="line">apiVersion: networking.k8s.io/v1</span><br><span class="line">kind: NetworkPolicy</span><br><span class="line">metadata:</span><br><span class="line"> name: denypolicy #修改 name</span><br><span class="line"> namespace: testing #注意添加 namespace</span><br><span class="line">spec:</span><br><span class="line"> podSelector: &#123;&#125;</span><br><span class="line"> policyTypes:</span><br><span class="line"> - Ingress</span><br><span class="line"> - Egress #根据题目要求保留</span><br><span class="line">candidate@node01:~$ kubectl apply -f /cks/net/p1.yaml</span><br><span class="line">candidate@node01:~$ kubectl describe networkpolicy denypolicy -n testing</span><br></pre></td></tr></table></figure><h3 id="4、RBAC-RoleBinding"><a href="#4、RBAC-RoleBinding" class="headerlink" title="4、RBAC - RoleBinding"></a>4、RBAC - RoleBinding</h3><p><strong>Context</strong><br>绑定到 Pod 的 ServiceAccount 的 Role 授予过度宽松的权限。完成以下项目以减少权限集。<br><strong>Task</strong><br>一个名为 <strong>web-pod</strong> 的现有 Pod 已在 namespace <strong>db</strong> 中运行。<br>编辑绑定到 Pod 的 ServiceAccount <strong>service-account-web</strong> 的现有 Role，仅允许只对 <strong>services</strong> 类型的资源执行 <strong>get</strong> 操作。 在 namespace <strong>db</strong> 中创建一个名为 <strong>role-2</strong> ，并仅允许只对 <strong>namespaces</strong> 类型的资源执行 <strong>delete</strong> 操作的新 Role。 创建一个名为 <strong>role-2-binding</strong> 的新 RoleBinding，将新创建的 Role 绑定到 Pod 的 ServiceAccount。<br>注意：请勿删除现有的 RoleBinding。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">## 搜RBAC</span><br><span class="line">candidate@node01:~$ kubectl describe rolebindings -n db</span><br><span class="line">candidate@node01:~$ kubectl edit role role-1 -n db</span><br><span class="line">……</span><br><span class="line">rules: #模拟环境里要删除掉 null，然后添加以下内容。考试时，要根据实际情况修改。</span><br><span class="line">- apiGroups: [&quot;&quot;] </span><br><span class="line"> resources: [&quot;services&quot;] </span><br><span class="line">#对 services 资源 get 操作权限。还可能会考对 endpoints 资源 list 的操作权限，或对 namespace 的 update 权限。</span><br><span class="line"> verbs: [&quot;get&quot;] </span><br><span class="line">#这里也是要根据题目实际的要求写，比如题目要求 watch 权限，则这里就将 get 改成 watch。</span><br><span class="line">candidate@node01:~$ kubectl create role -h</span><br><span class="line">candidate@node01:~$ kubectl create role role-2 --verb=delete --resource=namespaces -n db</span><br><span class="line">## 记住 --verb 是权限，可能考 delete 或者 update 等 --resource 是对象，可能考 namespaces 或者 persistentvolumeclaims 等。</span><br><span class="line">candidate@node01:~$ kubectl create rolebinding -h</span><br><span class="line">candidate@node01:~$ kubectl create rolebinding role-2-binding --role=role-2 --serviceaccount=db:service-account-web -n db</span><br><span class="line">candidate@node01:~$ kubectl describe rolebindings -n db</span><br><span class="line">candidate@node01:~$ kubectl describe role -n db</span><br></pre></td></tr></table></figure><h3 id="5、日志审计-log-audit"><a href="#5、日志审计-log-audit" class="headerlink" title="5、日志审计 log audit"></a>5、日志审计 log audit</h3><p><strong>Task</strong><br>在 cluster 中启用审计日志。为此，请启用日志后端，并确保： </p><ul><li>日志存储在 <strong>&#x2F;var&#x2F;log&#x2F;kubernetes&#x2F;audit-logs.txt</strong></li><li>日志文件能保留 <strong>10</strong> 天 </li><li>最多保留 <strong>2</strong> 个旧审计日志文件</li></ul><p><strong>&#x2F;etc&#x2F;kubernetes&#x2F;logpolicy&#x2F;sample-policy.yaml</strong> 提供了基本策略。它仅指定不记录的内容。<br>注意：基本策略位于 cluster 的 master 节点上。<br>编辑和扩展基本策略以记录： </p><ul><li>RequestResponse 级别的 <strong>persistentvolumes</strong> 更改 </li><li>namespace <strong>front-apps</strong> 中 <strong>configmaps</strong> 更改的请求体 </li><li><strong>Metadata</strong> 级别的所有 namespace 中的 ConfigMap 和 Secret 的更改</li></ul><p>此外，添加一个全方位的规则以在 <strong>Metadata</strong> 级别记录所有其他请求。<br>注意：不要忘记应用修改后的策略。<br>模拟环境里，初始化这道题的脚本为 log-audit.sh</p><h5 id="配置审计策略"><a href="#配置审计策略" class="headerlink" title="配置审计策略"></a>配置审计策略</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ ssh master01</span><br><span class="line">candidate@master01:~$ sudo -i</span><br><span class="line">root@master01:~$ sh log-audit.sh</span><br><span class="line">root@master01:~$ cp /etc/kubernetes/logpolicy/sample-policy.yaml bak1/</span><br><span class="line">root@master01:~$ vim /etc/kubernetes/logpolicy/sample-policy.yaml</span><br><span class="line"># 搜audit</span><br><span class="line">rules:</span><br><span class="line"> # namespaces changes at RequestResponse level</span><br><span class="line"> - level: RequestResponse</span><br><span class="line"> resources:</span><br><span class="line"> - group: &quot;&quot;</span><br><span class="line"> resources: [&quot;persistentvolumes&quot;] #根据题目要求修改，比如题目要求的是 namespaces。</span><br><span class="line"> #the request body of persistentvolumes/pods changes in the namespace front-apps</span><br><span class="line"> - level: Request</span><br><span class="line"> resources:</span><br><span class="line"> - group: &quot;&quot;</span><br><span class="line"> resources: [&quot;configmaps&quot;] #根据题目要求修改，比如题目要求的是 persistentvolumes 或者 pods。</span><br><span class="line"> namespaces: [&quot;front-apps&quot;]</span><br><span class="line"> - level: Metadata</span><br><span class="line"> resources:</span><br><span class="line"> - group: &quot;&quot;</span><br><span class="line"> resources: [&quot;secrets&quot;, &quot;configmaps&quot;]</span><br><span class="line"> # Also, add a catch-all rule to log all other requests at the Metadata level.</span><br><span class="line"> - level: Metadata</span><br><span class="line"> omitStages:</span><br><span class="line"> - &quot;RequestReceived&quot;</span><br></pre></td></tr></table></figure><h5 id="配置-master-节点的-kube-apiserver-yaml"><a href="#配置-master-节点的-kube-apiserver-yaml" class="headerlink" title="配置 master 节点的 kube-apiserver.yaml"></a>配置 master 节点的 kube-apiserver.yaml</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@master01:~$ cp /etc/kubernetes/manifests/kube-apiserver.yaml /bak1</span><br><span class="line">root@master01:~$ vi /etc/kubernetes/manifests/kube-apiserver.yaml</span><br><span class="line">#定义审计策略 yaml 文件位置，通过 hostpath 挂载</span><br><span class="line"> - --audit-policy-file=/etc/kubernetes/logpolicy/sample-policy.yaml</span><br><span class="line">#定义审计日志位置，通过 hostpath 挂载</span><br><span class="line"> - --audit-log-path=/var/log/kubernetes/audit-logs.txt </span><br><span class="line">#定义保留旧审计日志文件的最大天数为 10 天</span><br><span class="line"> - --audit-log-maxage=10</span><br><span class="line">#定义要保留的审计日志文件的最大数量为 2 个</span><br><span class="line"> - --audit-log-maxbackup=2</span><br><span class="line">root@master01:~$ systemctl daemon-reload</span><br><span class="line">root@master01:~$ systemctl restart kubelet</span><br><span class="line">root@master01:~$ kubectl get pod -A</span><br><span class="line">root@master01:~$ tail /var/log/kubernetes/audit-logs.txt</span><br><span class="line">exit,exit</span><br></pre></td></tr></table></figure><h3 id="6、创建-Secret"><a href="#6、创建-Secret" class="headerlink" title="6、创建 Secret"></a>6、创建 Secret</h3><p><strong>Task</strong><br>在 namespace <strong>istio-system</strong> 中获取名为 <strong>db1-test</strong> 的现有 secret 的内容<br>将 <strong>username</strong> 字段存储在名为 <strong>&#x2F;cks&#x2F;sec&#x2F;user.txt</strong> 的文件中，并将 <strong>password</strong> 字段存储在名为 <strong>&#x2F;cks&#x2F;sec&#x2F;pass.txt</strong> 的文件中。<br>注意：你必须创建以上两个文件，他们还不存在。<br>注意：不要在以下步骤中使用&#x2F;修改先前创建的文件，如果需要，可以创建新的临时文件。<br>在 <strong>istio-system</strong> namespace 中创建一个名为 <strong>db2-test</strong> 的新 secret，内容如下：<br><strong>username : production-instance</strong><br><strong>password : KvLftKgs4aVH</strong><br>最后，创建一个新的 Pod，它可以通过卷访问 <strong>secret db2-test</strong> ：<br>Pod 名称 <strong>secret-pod</strong><br>Namespace <strong>istio-system</strong><br>容器名 <strong>dev-container</strong><br>镜像 <strong>nginx</strong><br>卷名 <strong>secret-volume</strong><br>挂载路径 <strong>&#x2F;etc&#x2F;secret</strong></p><h5 id="1-将-db1-test-的-username-和-password，通过-base64-解码保存到题目指定文件："><a href="#1-将-db1-test-的-username-和-password，通过-base64-解码保存到题目指定文件：" class="headerlink" title="1 将 db1-test 的 username 和 password，通过 base64 解码保存到题目指定文件："></a>1 将 db1-test 的 username 和 password，通过 base64 解码保存到题目指定文件：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ kubectl get secrets db1-test -n istio-system -o yaml</span><br><span class="line">candidate@node01:~$ echo &#x27;ZGIx&#x27;|base64 -d &gt; /cks/sec/user.txt</span><br><span class="line">candidate@node01:~$ echo &#x27;aGVsbG8=&#x27;|base64 -d &gt; /cks/sec/pass.txt</span><br><span class="line">candidate@node01:~$ cat /cks/sec/user.txt</span><br><span class="line">candidate@node01:~$ cat /cks/sec/pass.txt</span><br></pre></td></tr></table></figure><h5 id="2-创建名为-db2-test-的-secret-使用题目要求的用户名和密码作为键值。注意要加命名空间。"><a href="#2-创建名为-db2-test-的-secret-使用题目要求的用户名和密码作为键值。注意要加命名空间。" class="headerlink" title="2 创建名为 db2-test 的 secret 使用题目要求的用户名和密码作为键值。注意要加命名空间。"></a>2 创建名为 db2-test 的 secret 使用题目要求的用户名和密码作为键值。注意要加命名空间。</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ kubectl create secret -h</span><br><span class="line">candidate@node01:~$ kubectl create secret generic -h</span><br><span class="line">candidate@node01:~$ kubectl create secret generic db2-test -n istio-system --from-literal=username=production-instance --from-literal=password=KvLftKgs4aVH</span><br><span class="line">candidate@node01:~$ kubectl get secret -n istio-system</span><br></pre></td></tr></table></figure><h5 id="3-创建-Pod-使用该-secret"><a href="#3-创建-Pod-使用该-secret" class="headerlink" title="3 创建 Pod 使用该 secret"></a>3 创建 Pod 使用该 secret</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 搜secret</span><br><span class="line">candidate@node01:~$ vim k8s-secret.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line"> name: secret-pod #pod 名字</span><br><span class="line"> namespace: istio-system #命名空间</span><br><span class="line">spec:</span><br><span class="line"> containers:</span><br><span class="line"> - name: dev-container #容器名字</span><br><span class="line"> image: nginx #镜像名字</span><br><span class="line"> imagePullPolicy: IfNotPresent</span><br><span class="line"> volumeMounts: #挂载路径</span><br><span class="line"> - name: secret-volume #卷名</span><br><span class="line"> mountPath: /etc/secret</span><br><span class="line"> volumes:</span><br><span class="line"> - name: secret-volume #卷名</span><br><span class="line"> secret:</span><br><span class="line"> secretName: db2-test #名为 db2-test 的 secret</span><br><span class="line">candidate@node01:~$ kubectl apply -f k8s-secret.yaml</span><br><span class="line">candidate@node01:~$ kubectl get pod -n istio-system</span><br></pre></td></tr></table></figure><h3 id="7、Dockerfile-检测"><a href="#7、Dockerfile-检测" class="headerlink" title="7、Dockerfile 检测"></a>7、Dockerfile 检测</h3><p><strong>Task</strong><br>分析和编辑给定的 Dockerfile <strong>&#x2F;cks&#x2F;docker&#x2F;Dockerfile</strong>（基于 <strong>ubuntu:16.04</strong> 镜像），<br>并修复在文件中拥有的突出的安全&#x2F;最佳实践问题的两个指令。<br>分析和编辑给定的清单文件 <strong>&#x2F;cks&#x2F;docker&#x2F;deployment.yaml</strong> ，<br>并修复在文件中拥有突出的安全&#x2F;最佳实践问题的两个字段。<br>注意：请勿添加或删除配置设置；只需修改现有的配置设置让以上两个配置设置都不再有安全&#x2F;最佳实践问题。<br>注意：如果您需要非特权用户来执行任何项目，请使用用户 ID <strong>65535</strong> 的用户 <strong>nobody</strong> 。<br>只修改即可，不需要创建。</p><h5 id="1-修改-Dockerfile"><a href="#1-修改-Dockerfile" class="headerlink" title="1 修改 Dockerfile"></a>1 修改 Dockerfile</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ vi /cks/docker/Dockerfile</span><br><span class="line">1、修改基础镜像为题目要求的 ubuntu:16.04</span><br><span class="line">FROM ubuntu:16.04</span><br><span class="line">2、仅将 CMD 上面的 USER root 修改为 USER nobody，不需要改其他的 USER root。</span><br><span class="line">USER nobody</span><br></pre></td></tr></table></figure><h5 id="2-修改-deployment-yaml"><a href="#2-修改-deployment-yaml" class="headerlink" title="2 修改 deployment.yaml"></a>2 修改 deployment.yaml</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ vi /cks/docker/deployment.yaml</span><br><span class="line">1、需要将原先的 run: couchdb 修改为 app: couchdb</span><br><span class="line"> app: couchdb</span><br><span class="line">2、确保 &#x27;privileged&#x27;: 为 False ，确保&#x27;readonlyRootFilesystem&#x27;: 为 True，确保&#x27;runAsUser&#x27;: 为 65535</span><br><span class="line">securityContext:</span><br><span class="line"> &#123;&#x27;capabilities&#x27;: &#123;&#x27;add&#x27;: [&#x27;NET_BIND_SERVICE&#x27;], &#x27;drop&#x27;: [&#x27;all&#x27;]&#125;, &#x27;privileged&#x27;: False, &#x27;readOnlyRootFilesystem&#x27;: True, &#x27;runAsUser&#x27;: 65535&#125;</span><br></pre></td></tr></table></figure><h3 id="8、沙箱运行容器-gVisor"><a href="#8、沙箱运行容器-gVisor" class="headerlink" title="8、沙箱运行容器 gVisor"></a>8、沙箱运行容器 gVisor</h3><p><strong>Context</strong><br>该 cluster 使用 <strong>containerd</strong> 作为 CRI 运行时。<strong>containerd</strong> 的默认运行时处理程序是 <strong>runc</strong>。<br><strong>containerd</strong> 已准备好支持额外的运行时处理程序 <strong>runsc</strong> (gVisor)。<br><strong>Task</strong><br>使用名为 <strong>runsc</strong> 的现有运行时处理程序，创建一个名为 <strong>untrusted</strong> 的 RuntimeClass。<br>更新 namespace <strong>server</strong> 中的所有 Pod 以在 gVisor 上运行。<br>您可以在 <strong>&#x2F;cks&#x2F;gVisor&#x2F;rc.yaml</strong> 中找到一个模版清单。</p><h5 id="1-创建-RuntimeClass"><a href="#1-创建-RuntimeClass" class="headerlink" title="1 创建 RuntimeClass"></a>1 创建 RuntimeClass</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 搜 runtimeclass</span><br><span class="line">candidate@node01:~$ vi /cks/gVisor/rc.yaml</span><br><span class="line">apiVersion: node.k8s.io/v1</span><br><span class="line">kind: RuntimeClass</span><br><span class="line">metadata:</span><br><span class="line"> name: untrusted # 用来引用 RuntimeClass 的名字</span><br><span class="line">handler: runsc # 对应的 CRI 配置的名称</span><br><span class="line">candidate@node01:~$ kubectl create -f /cks/gVisor/rc.yaml</span><br><span class="line">candidate@node01:~$ kubectl get RuntimeClass</span><br></pre></td></tr></table></figure><h5 id="2-将命名空间为-server-下的-Pod-引用-RuntimeClass"><a href="#2-将命名空间为-server-下的-Pod-引用-RuntimeClass" class="headerlink" title="2 将命名空间为 server 下的 Pod 引用 RuntimeClass"></a>2 将命名空间为 server 下的 Pod 引用 RuntimeClass</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ kubectl -n server get deployment</span><br><span class="line">candidate@node01:~$ kubectl -n server edit deployments busybox-run</span><br><span class="line">candidate@node01:~$ kubectl -n server edit deployments nginx-host</span><br><span class="line">candidate@node01:~$ kubectl -n server edit deployments run-test</span><br><span class="line">spec: #找到这个 spec，注意在 deployment 里是有两个单独行的 spec 的，要找第二个，也就是下面有 containers 这个字段的 spec。</span><br><span class="line"> runtimeClassName: untrusted #添加这一行，注意空格对齐</span><br><span class="line"> containers:</span><br><span class="line">candidate@node01:~$ kubectl -n server get pod</span><br></pre></td></tr></table></figure><h3 id="9、网络策略-NetworkPolicy"><a href="#9、网络策略-NetworkPolicy" class="headerlink" title="9、网络策略 NetworkPolicy"></a>9、网络策略 NetworkPolicy</h3><p><strong>Task</strong><br>创建一个名为 <strong>pod-restriction</strong> 的 NetworkPolicy 来限制对在 namespace <strong>dev-team</strong> 中运行的 Pod <strong>products-service</strong> 的访问。<br>只允许以下 Pod 连接到 Pod <strong>products-service</strong></p><ul><li>namespace <strong>qaqa</strong> 中的 Pod </li><li>位于任何 namespace，带有标签 <strong>environment: testing</strong> 的 Pod</li></ul><p>注意：确保应用 NetworkPolicy。<br>你可以在**&#x2F;cks&#x2F;net&#x2F;po.yaml** 找到一个模板清单文件。</p><h5 id="1-检查-namespace-标签"><a href="#1-检查-namespace-标签" class="headerlink" title="1 检查 namespace 标签"></a>1 检查 namespace 标签</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 查看 qaqa 命名空间标签（name: qaqa）</span><br><span class="line">candidate@node01:~$ kubectl get ns --show-labels</span><br><span class="line"># 查看 pod 标签（environment: testing）</span><br><span class="line">candidate@node01:~$ kubectl get pod -n dev-team --show-labels</span><br><span class="line"># 如果 Pod 或者 Namespace 没有标签，则需要打上标签。</span><br><span class="line">candidate@node01:~$ kubectl label ns qaqa name=qaqa</span><br><span class="line">candidate@node01:~$ kubectl label pod products-service environment=testing -n dev-team</span><br></pre></td></tr></table></figure><h5 id="2-创建-NetworkPolicy"><a href="#2-创建-NetworkPolicy" class="headerlink" title="2 创建 NetworkPolicy"></a>2 创建 NetworkPolicy</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ vi /cks/net/po.yaml</span><br><span class="line"># 查networkpolicy，根据官网，修改为如下内容：</span><br><span class="line">……</span><br><span class="line">metadata:</span><br><span class="line">  name: pod-restriction #修改</span><br><span class="line">  namespace: dev-team #修改</span><br><span class="line">spec:</span><br><span class="line">  podSelector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      environment: testing</span><br><span class="line">  policyTypes:</span><br><span class="line">    - Ingress #注意，这里只写 - Ingress，不要将 - Egress 也复制进来！</span><br><span class="line">  ingress:</span><br><span class="line">    - from: #第一个 from</span><br><span class="line">        - namespaceSelector:</span><br><span class="line">            matchLabels:</span><br><span class="line">              name: qaqa #命名空间有 name: qaqa 标签的</span><br><span class="line">    - from: #第二个 from</span><br><span class="line">        - namespaceSelector: &#123;&#125; #修改为这样，所有命名空间</span><br><span class="line">          podSelector:  #注意，这个 podSelector 前面的“-” 要删除。</span><br><span class="line">            matchLabels:</span><br><span class="line">              environment: testing #有 environment: testing 标签的 Pod，这个地方是根据题目要求“Pods with label environment: testing , in any namespace”，这句话里的 pod 标签写的。不要和上面 spec 里的混淆。</span><br><span class="line">#创建</span><br><span class="line">candidate@node01:~$ kubectl apply -f /cks/net/po.yaml</span><br><span class="line">#检查</span><br><span class="line">candidate@node01:~$ kubectl describe networkpolicy -n dev-team</span><br></pre></td></tr></table></figure><h3 id="10、Trivy-扫描镜像安全漏洞"><a href="#10、Trivy-扫描镜像安全漏洞" class="headerlink" title="10、Trivy 扫描镜像安全漏洞"></a>10、Trivy 扫描镜像安全漏洞</h3><p><strong>Task</strong><br>使用 Trivy 开源容器扫描器检测 namespace <strong>kamino</strong> 中 Pod 使用的具有严重漏洞的镜像。<br>查找具有 <strong>High</strong> 或 <strong>Critical</strong> 严重性漏洞的镜像，并删除使用这些镜像的 Pod。<br>注意：Trivy 仅安装在 cluster 的 master 节点上，<br>在工作节点上不可使用。<br>你必须切换到 cluster 的 master 节点才能使用 Trivy。</p><h5 id="1-切换到-Master-的-candidate-下"><a href="#1-切换到-Master-的-candidate-下" class="headerlink" title="1 切换到 Master 的 candidate 下"></a>1 切换到 Master 的 candidate 下</h5><p>candidate@node01:~$ ssh master01</p><h5 id="2-获取命名空间-kamino-下的所有-pod-和其-image-的对应关系"><a href="#2-获取命名空间-kamino-下的所有-pod-和其-image-的对应关系" class="headerlink" title="2 获取命名空间 kamino 下的所有 pod 和其 image 的对应关系"></a>2 获取命名空间 kamino 下的所有 pod 和其 image 的对应关系</h5><p>kubectl get pods –namespace kamino –output&#x3D;custom-columns&#x3D;”NAME:.metadata.name,IMAGE:.spec.containers[*].image”</p><h5 id="3-检查镜像是否有高危和严重的漏洞"><a href="#3-检查镜像是否有高危和严重的漏洞" class="headerlink" title="3 检查镜像是否有高危和严重的漏洞"></a>3 检查镜像是否有高危和严重的漏洞</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">candidate@master01:~$ trivy image -h</span><br><span class="line">for i in &#123;amazonlinux:1,amazonlinux:2,nginx:1.19,vicuu/nginx:host&#125;; do trivy image -s &quot;HIGH,CRITICAL&quot; $i &gt;&gt; 10.txt;done</span><br></pre></td></tr></table></figure><h5 id="4-删除有问题的-pod"><a href="#4-删除有问题的-pod" class="headerlink" title="4 删除有问题的 pod"></a>4 删除有问题的 pod</h5><p>candidate@master01:~$ kubectl -n kamino delete pod XXXX –force<br>exit</p><h3 id="11、AppArmor"><a href="#11、AppArmor" class="headerlink" title="11、AppArmor"></a>11、AppArmor</h3><p><strong>Context</strong><br>APPArmor 已在 cluster 的工作节点 node02 上被启用。一个 APPArmor 配置文件已存在，但尚未被实施。<br><strong>Task</strong><br>在 cluster 的工作节点 node02 上，实施位于 <strong>&#x2F;etc&#x2F;apparmor.d&#x2F;nginx_apparmor</strong> 的现有 APPArmor 配置文件。 编辑位于 <strong>&#x2F;cks&#x2F;KSSH00401&#x2F;nginx-deploy.yaml</strong> 的现有清单文件以应用 AppArmor 配置文件。<br>最后，应用清单文件并创建其中指定的 Pod 。<br>请注意，考试时，考题里已表明 APPArmor 在工作节点上，所以你需要 ssh 到开头写的工作节点上。<br>在模拟环境，你需要 ssh 到 node02 这个工作节点。</p><h5 id="1-切换到-node02-的-root-下"><a href="#1-切换到-node02-的-root-下" class="headerlink" title="1 切换到 node02 的 root 下"></a>1 切换到 node02 的 root 下</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ ssh node02</span><br><span class="line">candidate@node02:~$ sudo -i</span><br></pre></td></tr></table></figure><h5 id="2-切换到-apparmor-的目录"><a href="#2-切换到-apparmor-的目录" class="headerlink" title="2 切换到 apparmor 的目录"></a>2 切换到 apparmor 的目录</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@node02:~$ cd /etc/apparmor.d/</span><br><span class="line">root@node02:~$ cat nginx_apparmor</span><br></pre></td></tr></table></figure><h5 id="3-执行-apparmor-策略模块"><a href="#3-执行-apparmor-策略模块" class="headerlink" title="3 执行 apparmor 策略模块"></a>3 执行 apparmor 策略模块</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@node02:~$ apparmor_status #查不到，没启动</span><br><span class="line">root@node02:~$ apparmor_parser /etc/apparmor.d/nginx_apparmor #启用</span><br><span class="line">root@node02:~$ apparmor_status# 再次检查有结果了</span><br></pre></td></tr></table></figure><h5 id="4-修改-pod-文件"><a href="#4-修改-pod-文件" class="headerlink" title="4 修改 pod 文件"></a>4 修改 pod 文件</h5><p>注意！注意！考试时，这个文件是在默认登录的终端那个初始节点上的，而不是在这个 work 节点的。<br>exit exit</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">搜apparmor</span><br><span class="line">candidate@node01:~$ vi /cks/KSSH00401/nginx-deploy.yaml</span><br><span class="line">name: podx</span><br><span class="line">annotations:</span><br><span class="line"> container.apparmor.security.beta.kubernetes.io/podx: localhost/nginx-profile-3</span><br><span class="line">candidate@node01:~$ kubectl apply -f /cks/KSSH00401/nginx-deploy.yaml</span><br><span class="line">candidate@node01:~$ kubectl get pod</span><br></pre></td></tr></table></figure><h3 id="12、Sysdig-falco"><a href="#12、Sysdig-falco" class="headerlink" title="12、Sysdig &amp; falco"></a>12、Sysdig &amp; falco</h3><p>Task：<br>使用运行时检测工具来检测 Pod <strong>redis123</strong> 单个容器中频发生成和执行的异常进程。<br>有两种工具可供使用： </p><ul><li><strong>sysdig</strong></li><li><strong>falco</strong></li></ul><p>注： 这些工具只预装在 cluster 的工作节点 <strong>node02</strong> 上，不在 master 节点。<br>使用工具至少分析 30 秒 ，使用过滤器检查生成和执行的进程，将事件写到 <strong>&#x2F;opt&#x2F;KSR00101&#x2F;incidents&#x2F;summary</strong> 文件中，<br>其中包含检测的事件， 格式如下： <strong>timestamp,uid&#x2F;username,processName</strong><br>保持工具的原始时间戳格式不变。<br>注： 确保事件文件存储在集群的工作节点上。<br>请注意，考试时，考题里已表明 sysdig 和 falco 在工作节点上，所以你需要 ssh 到开头写的工作节点上。但在模拟环境，你需要 ssh 到 node02 这个工作节点。</p><h5 id="1、切换到-node02-的-root-下"><a href="#1、切换到-node02-的-root-下" class="headerlink" title="1、切换到 node02 的 root 下"></a>1、切换到 node02 的 root 下</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ ssh node02</span><br><span class="line">candidate@node02:~$ sudo -i</span><br></pre></td></tr></table></figure><h5 id="2、确认题目里所要求-Pod-的唯一标识，比如-ContainerID。"><a href="#2、确认题目里所要求-Pod-的唯一标识，比如-ContainerID。" class="headerlink" title="2、确认题目里所要求 Pod 的唯一标识，比如 ContainerID。"></a>2、确认题目里所要求 Pod 的唯一标识，比如 ContainerID。</h5><p>root@node02:~$ crictl ps | grep redis123</p><h5 id="3、编辑-falco-规则-手动输入以下内容，强行背过"><a href="#3、编辑-falco-规则-手动输入以下内容，强行背过" class="headerlink" title="3、编辑 falco 规则 手动输入以下内容，强行背过"></a>3、编辑 falco 规则 手动输入以下内容，强行背过</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@node02:~$ vim /etc/falco/falco_rules.local.yaml</span><br><span class="line">- rule: rule1</span><br><span class="line"> desc: rule1</span><br><span class="line"> condition: container.name = &quot;redis123&quot;</span><br><span class="line"> output: &quot;%evt.time,%user.uid,%proc.name&quot;</span><br><span class="line"> priority: WARNING</span><br><span class="line">root@node02:~$ sudo falco -M 30 -r /etc/falco/falco_rules.local.yaml &gt;&gt; /opt/KSR00101/incidents/summary</span><br><span class="line">root@node02:~$ vim /etc/falco/falco_rules.local.yaml</span><br><span class="line"> output: &quot;%evt.time,%user.name,%proc.name&quot;</span><br><span class="line">root@node02:~$ sudo falco -M 30 -r /etc/falco/falco_rules.local.yaml &gt;&gt; /opt/KSR00101/incidents/summary</span><br></pre></td></tr></table></figure><h5 id="4、查看保存的文件"><a href="#4、查看保存的文件" class="headerlink" title="4、查看保存的文件"></a>4、查看保存的文件</h5><p>root@node02:~$ cat &#x2F;opt&#x2F;KSR00101&#x2F;incidents&#x2F;summary<br>exit exit</p><h3 id="13、Container-安全上下文"><a href="#13、Container-安全上下文" class="headerlink" title="13、Container 安全上下文"></a>13、Container 安全上下文</h3><p><strong>Context</strong><br>Container Security Context 应在特定 namespace 中修改 Deployment。<br><strong>Task</strong><br>按照如下要求修改 <strong>sec-ns</strong> 命名空间里的 Deployment <strong>secdep</strong><br>一、用 ID 为 <strong>30000</strong> 的用户启动容器（设置用户 ID 为: 30000）<br>二、不允许进程获得超出其父进程的特权（禁止 allowPrivilegeEscalation）<br>三、以只读方式加载容器的根文件系统（对根文件的只读权限）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">搜context 安全上下文</span><br><span class="line">candidate@node01:~$ kubectl -n sec-ns edit deployment secdep</span><br><span class="line">name: sec-ctx-demo-1 / 2</span><br><span class="line">securityContext: #新增或修改 containers 里面第一个 image 的此字段。</span><br><span class="line">  allowPrivilegeEscalation: false</span><br><span class="line">  readOnlyRootFilesystem: true</span><br><span class="line"> </span><br><span class="line">securityContext: #修改模拟环境里的这一行，注意要删除&#123;&#125;。如果考试时没有搜到，则新增这一行。</span><br><span class="line">  runAsUser: 30000</span><br><span class="line">candidate@node01:~$ kubectl -n sec-ns get all</span><br></pre></td></tr></table></figure><h3 id="14、TLS-安全配置"><a href="#14、TLS-安全配置" class="headerlink" title="14、TLS 安全配置"></a>14、TLS 安全配置</h3><p><strong>Task</strong><br>通过 TLS 加强 kube-apiserver 安全配置，要求<br>1、kube-apiserver 除了 <strong>TLS 1.3</strong> 及以上的版本可以使用，其他版本都不允许使用。<br>2、密码套件（Cipher suite）为 <strong>TLS_AES_128_GCM_SHA256</strong><br>通过 TLS 加强 ETCD 安全配置，要求 1、密码套件（Cipher suite）为 <strong>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</strong></p><h5 id="1-切换到-Master-的-root-下"><a href="#1-切换到-Master-的-root-下" class="headerlink" title="1 切换到 Master 的 root 下"></a>1 切换到 Master 的 root 下</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ ssh master01</span><br><span class="line">candidate@master01:~$ sudo -i</span><br><span class="line">candidate@master01:~$ cp /etc/kubernetes/manifests/kube-apiserver.yaml /tmp</span><br></pre></td></tr></table></figure><h5 id="2-修改-kube-apiserver"><a href="#2-修改-kube-apiserver" class="headerlink" title="2 修改 kube-apiserver"></a>2 修改 kube-apiserver</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#搜kube-api server</span><br><span class="line">candidate@master01:~$ vim /etc/kubernetes/manifests/kube-apiserver.yaml</span><br><span class="line"> - --tls-cipher-suites=TLS_AES_128_GCM_SHA256</span><br><span class="line"> - --tls-min-version=VersionTLS13 #如果题目要求 TLS 1.2，则就写 VersionTLS12</span><br></pre></td></tr></table></figure><h5 id="3-等待-apiserver-自动重启，且恢复正常。"><a href="#3-等待-apiserver-自动重启，且恢复正常。" class="headerlink" title="3 等待 apiserver 自动重启，且恢复正常。"></a>3 等待 apiserver 自动重启，且恢复正常。</h5><p>candidate@master01:~$ kubectl -n kube-system get pod</p><h5 id="4-修改-etcd"><a href="#4-修改-etcd" class="headerlink" title="4 修改 etcd"></a>4 修改 etcd</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">candidate@master01:~$ cp /etc/kubernetes/manifests/etcd.yaml /tmp</span><br><span class="line">candidate@master01:~$ vim /etc/kubernetes/manifests/etcd.yaml</span><br><span class="line"> - --cipher-suites=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</span><br></pre></td></tr></table></figure><h5 id="5-等待-etcd-自动重启，且恢复正常。"><a href="#5-等待-etcd-自动重启，且恢复正常。" class="headerlink" title="5 等待 etcd 自动重启，且恢复正常。"></a>5 等待 etcd 自动重启，且恢复正常。</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@master01:~$ systemctl daemon-reload</span><br><span class="line">root@master01:~$ systemctl restart kubelet.service</span><br><span class="line">root@master01:~$ kubectl -n kube-system get pod</span><br></pre></td></tr></table></figure><p>exit exit</p><h3 id="15、启用-API-server-认证"><a href="#15、启用-API-server-认证" class="headerlink" title="15、启用 API server 认证"></a>15、启用 API server 认证</h3><p><strong>Context</strong><br>由 <strong>kubeadm</strong> 创建的 cluster 的 Kubernetes API 服务器，出于测试目的，<br>临时配置允许未经身份验证和未经授权的访问，授予匿名用户 cluster-admin 的访问权限.<br><strong>Task</strong><br>重新配置 cluster 的 Kubernetes APl 服务器，以确保只允许经过身份验证和授权的 REST 请求。<br>使用授权模式 <strong>Node,RBAC</strong> 和准入控制器 <strong>NodeRestriction</strong>。<br>删除用户 <strong>system:anonymous</strong> 的 ClusterRoleBinding 来进行清理。<br>注意：所有 kubectl 配置环境&#x2F;文件也被配置使用未经身份验证和未经授权的访问。<br>你不必更改它，但请注意，一旦完成 cluster 的安全加固， kubectl 的配置将无法工作。<br>您可以使用位于 cluster 的 master 节点上，cluster 原本的 kubectl 配置文件<br>&#x2F;etc&#x2F;kubernetes&#x2F;admin.conf ，以确保经过身份验证的授权的请求仍然被允许。<br>模拟环境里，初始化这道题的脚本为 api.sh</p><h5 id="1、切换集群"><a href="#1、切换集群" class="headerlink" title="1、切换集群"></a>1、切换集群</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ ssh master01</span><br><span class="line">candidate@master01:~$ sudo -i</span><br><span class="line">root@master01:~$ sh api.sh</span><br></pre></td></tr></table></figure><h5 id="2-确保只有认证并且授权过的-REST-请求才被允许"><a href="#2-确保只有认证并且授权过的-REST-请求才被允许" class="headerlink" title="2 确保只有认证并且授权过的 REST 请求才被允许"></a>2 确保只有认证并且授权过的 REST 请求才被允许</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@master01:~$ mkdir bak15</span><br><span class="line">root@master01:~$ cd bak15</span><br><span class="line">root@master01:~$ cp /etc/kubernetes/manifests/kube-apiserver.yaml .</span><br><span class="line">root@master01:~$ vi /etc/kubernetes/manifests/kube-apiserver.yaml</span><br><span class="line">修改为</span><br><span class="line"> - --authorization-mode=Node,RBAC </span><br><span class="line"> - --enable-admission-plugins=NodeRestriction </span><br><span class="line"> - --anonymous-auth=false</span><br></pre></td></tr></table></figure><h5 id="3-等待-apiserver-自动重启，且恢复正常。-1"><a href="#3-等待-apiserver-自动重启，且恢复正常。-1" class="headerlink" title="3 等待 apiserver 自动重启，且恢复正常。"></a>3 等待 apiserver 自动重启，且恢复正常。</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@master01:~$ systemctl daemon-reload</span><br><span class="line">root@master01:~$ systemctl restart kubelet.service</span><br><span class="line">root@master01:~$ kubectl get pod -A</span><br></pre></td></tr></table></figure><h5 id="4-删除题目要求的角色绑定"><a href="#4-删除题目要求的角色绑定" class="headerlink" title="4 删除题目要求的角色绑定"></a>4 删除题目要求的角色绑定</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 查</span><br><span class="line">root@master01:~$ kubectl get clusterrolebinding system:anonymous</span><br><span class="line"># 删</span><br><span class="line">root@master01:~$ kubectl delete clusterrolebinding system:anonymous</span><br><span class="line"># 再检查</span><br><span class="line">root@master01:~$ kubectl get clusterrolebinding system:anonymous</span><br></pre></td></tr></table></figure><p>exit exit</p><h3 id="16、ImagePolicyWebhook-容器镜像扫描"><a href="#16、ImagePolicyWebhook-容器镜像扫描" class="headerlink" title="16、ImagePolicyWebhook 容器镜像扫描"></a>16、ImagePolicyWebhook 容器镜像扫描</h3><p><strong>Context</strong><br>cluster 上设置了容器镜像扫描器，但尚未完全集成到 cluster 的配置中。<br>完成后，容器镜像扫描器应扫描并拒绝易受攻击的镜像的使用。<br><strong>Task</strong><br>注意：你必须在 cluster 的 <strong>master</strong> 节点上完成整个考题，所有服务和文件都已被准备好并放置在该节点上。<br>给定一个目录 <strong>&#x2F;etc&#x2F;kubernetes&#x2F;epconfig</strong> 中不完整的配置，<br>以及具有 HTTPS 端点 <a href="https://image-bouncer-webhook.default.svc:1323/image_policy">https://image-bouncer-webhook.default.svc:1323/image_policy</a> 的功能性容器镜像扫描器： </p><ol><li>启用必要的插件来创建镜像策略 </li><li>校验控制配置并将其更改为隐式拒绝（implicit deny） </li><li>编辑配置以正确指向提供的 HTTPS 端点</li></ol><p>最后，通过尝试部署易受攻击的资源 <strong>&#x2F;cks&#x2F;img&#x2F;web1.yaml</strong> 来测试配置是否有效。<br>模拟环境里，初始化这道题的脚本为 imagePolicy.sh</p><h5 id="1、切换到-Master-的-root-下"><a href="#1、切换到-Master-的-root-下" class="headerlink" title="1、切换到 Master 的 root 下"></a>1、切换到 Master 的 root 下</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">candidate@node01:~$ ssh master01</span><br><span class="line">candidate@master01:~$ sudo -i</span><br><span class="line">root@master01:~$ sh imagePolicy.sh</span><br></pre></td></tr></table></figure><h5 id="2、编辑-admission-configuration-json-修改-defaultAllow-为-false"><a href="#2、编辑-admission-configuration-json-修改-defaultAllow-为-false" class="headerlink" title="2、编辑 admission_configuration.json 修改 defaultAllow 为 false"></a>2、编辑 admission_configuration.json 修改 defaultAllow 为 false</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@master01:~$ vim /etc/kubernetes/epconfig/admission_configuration.json</span><br><span class="line"> &quot;defaultAllow&quot;: false #将 true 改为 false</span><br></pre></td></tr></table></figure><h5 id="3、编辑kubeconfig-yml，添加-webhook-server-地址："><a href="#3、编辑kubeconfig-yml，添加-webhook-server-地址：" class="headerlink" title="3、编辑kubeconfig.yml，添加 webhook server 地址："></a>3、编辑kubeconfig.yml，添加 webhook server 地址：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@master01:~$ vi /etc/kubernetes/epconfig/kubeconfig.yml</span><br><span class="line">- cluster: #下面添加</span><br><span class="line">server: https://image-bouncer-webhook.default.svc:1323/image_policy #添加 webhook server 地址</span><br></pre></td></tr></table></figure><h5 id="4、编辑-kube-apiserver-yaml，从官网中引用-ImagePolicyWebhook-的配置信息"><a href="#4、编辑-kube-apiserver-yaml，从官网中引用-ImagePolicyWebhook-的配置信息" class="headerlink" title="4、编辑 kube-apiserver.yaml，从官网中引用 ImagePolicyWebhook 的配置信息"></a>4、编辑 kube-apiserver.yaml，从官网中引用 ImagePolicyWebhook 的配置信息</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@master01:~$ cp /etc/kubernetes/manifests/kube-apiserver.yaml /tmp</span><br><span class="line">root@master01:~$ vi /etc/kubernetes/manifests/kube-apiserver.yaml</span><br><span class="line">#搜imagepolicywebhook</span><br><span class="line"> - --enable-admission-plugins=NodeRestriction,ImagePolicyWebhook</span><br><span class="line"> - --admission-control-config-file=/etc/kubernetes/epconfig/admission_configuration.json</span><br></pre></td></tr></table></figure><h5 id="5、等待-apiserver-自动重启，且恢复正常。"><a href="#5、等待-apiserver-自动重启，且恢复正常。" class="headerlink" title="5、等待 apiserver 自动重启，且恢复正常。"></a>5、等待 apiserver 自动重启，且恢复正常。</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@master01:~$ systemctl daemon-reload</span><br><span class="line">root@master01:~$ systemctl restart kubelet.service</span><br><span class="line">root@master01:~$ kubectl -n kube-system get pod</span><br><span class="line">root@master01:~$ kubectl apply -f /cks/img/web1.yaml</span><br><span class="line">不允许创建</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kubernetes考试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>岳阳楼记</title>
      <link href="/2012/12/21/yueyanglouji/"/>
      <url>/2012/12/21/yueyanglouji/</url>
      
        <content type="html"><![CDATA[<p>范仲淹（989-1052年），字希文，汉族，北宋著名的政治家、思想家、军事家、文学家、教育家，世称“范文正公”。</p><span id="more"></span><hr><p>庆历四年春，滕子京谪守巴陵郡。越明年，政通人和，百废具兴，乃重修岳阳楼，增其旧制，刻唐贤今人诗赋于其上，属予作文以记之。</p><p>予观夫巴陵胜状，在洞庭一湖。衔远山，吞长江，浩浩汤汤，横无际涯，朝晖夕阴，气象万千，此则岳阳楼之大观也，前人之述备矣。然则北通巫峡，南极潇湘，迁客骚人，多会于此，览物之情，得无异乎？</p><p>若夫淫雨霏霏，连月不开，阴风怒号，浊浪排空，日星隐曜，山岳潜形，商旅不行，樯倾楫摧，薄暮冥冥，虎啸猿啼。登斯楼也，则有去国怀乡，忧谗畏讥，满目萧然，感极而悲者矣。</p><p>至若春和景明，波澜不惊，上下天光，一碧万顷，沙鸥翔集，锦鳞游泳，岸芷汀兰，郁郁青青。而或长烟一空，皓月千里，浮光跃金，静影沉璧，渔歌互答，此乐何极！登斯楼也，则有心旷神怡，宠辱偕忘，把酒临风，其喜洋洋者矣。</p><p>嗟夫！予尝求古仁人之心，或异二者之为，何哉？不以物喜，不以己悲，居庙堂之高则忧其民，处江湖之远则忧其君。是进亦忧，退亦忧。然则何时而乐耶？其必曰“先天下之忧而忧，后天下之乐而乐”乎！噫！微斯人，吾谁与归？</p><p>时六年九月十五日。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 岳阳楼记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>逍遥游</title>
      <link href="/2012/12/21/xiaoyaoyou/"/>
      <url>/2012/12/21/xiaoyaoyou/</url>
      
        <content type="html"><![CDATA[<p>庄子（公元前369年－公元前286年），名周，字子休。最早有确切记载的就是司马迁的《史记》：庄子者，蒙人也，名周。</p><span id="more"></span><hr><p>北冥有鱼，其名为鲲。鲲之大，不知其几千里也；化而为鸟，其名为鹏。鹏之背，不知其几千里也；怒而飞，其翼若垂天之云。是鸟也，海运则将徙于南冥。南冥者，天池也。《齐谐》者，志怪者也。《谐》之言曰：“鹏之徙于南冥也，水击三千里，抟扶摇而上者九万里，去以六月息者也。”野马也，尘埃也，生物之以息相吹也。天之苍苍，其正色邪？其远而无所至极邪？其视下也，亦若是则已矣。且夫水之积也不厚，则其负大舟也无力。覆杯水于坳堂之上，则芥为之舟，置杯焉则胶，水浅而舟大也。风之积也不厚，则其负大翼也无力。故九万里，则风斯在下矣，而后乃今培风；背负青天，而莫之夭阏者，而后乃今将图南。蜩与学鸠笑之曰：“我决起而飞，抢榆枋而止，时则不至，而控于地而已矣，奚以之九万里而南为？”适莽苍者，三餐而反，腹犹果然；适百里者，宿舂粮；适千里者，三月聚粮。之二虫又何知！</p><p>小知不及大知，小年不及大年。奚以知其然也？朝菌不知晦朔，蟪蛄不知春秋，此小年也。楚之南有冥灵者，以五百岁为春，五百岁为秋；上古有大椿者，以八千岁为春，八千岁为秋，此大年也。而彭祖乃今以久特闻，众人匹之，不亦悲乎！汤之问棘也是已。穷发之北，有冥海者，天池也。有鱼焉，其广数千里，未有知其修者，其名为鲲。有鸟焉，其名为鹏，背若泰山，翼若垂天之云，抟扶摇羊角而上者九万里，绝云气，负青天，然后图南，且适南冥也。斥鴳笑之曰：“彼且奚适也？我腾跃而上，不过数仞而下，翱翔蓬蒿之间，此亦飞之至也。而彼且奚适也？”此小大之辩也。</p><p>故夫知效一官，行比一乡，德合一君，而征一国者，其自视也，亦若此矣。而宋荣子犹然笑之。且举世誉之而不加劝，举世非之而不加沮，定乎内外之分，辩乎荣辱之境，斯已矣。彼其于世，未数数然也。虽然，犹有未树也。夫列子御风而行，泠然善也，旬有五日而后反。彼于致福者，未数数然也。此虽免乎行，犹有所待者也。若夫乘天地之正，而御六气之辩，以游无穷者，彼且恶乎待哉？故曰：至人无己，神人无功，圣人无名。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 逍遥游 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>滕王阁序</title>
      <link href="/2012/12/21/tengwanggexu/"/>
      <url>/2012/12/21/tengwanggexu/</url>
      
        <content type="html"><![CDATA[<p>王勃（约650-676年），唐代诗人。汉族，字子安。绛州龙门(今山西河津)人。王勃与杨炯、卢照邻、骆宾王齐名，世称“初唐四杰”，其中王勃是“初唐四杰”之首。</p><span id="more"></span><hr><p>豫章故郡，洪都新府。星分翼轸，地接衡庐。襟三江而带五湖，控蛮荆而引瓯越。物华天宝，龙光射牛斗之墟；人杰地灵，徐孺下陈蕃之榻。雄州雾列，俊采星驰。台隍枕夷夏之交，宾主尽东南之美。都督阎公之雅望，棨戟遥临；宇文新州之懿范，襜帷暂驻。十旬休假，胜友如云；千里逢迎，高朋满座。腾蛟起凤，孟学士之词宗；紫电青霜，王将军之武库。家君作宰，路出名区；童子何知，躬逢胜饯。</p><p>时维九月，序属三秋。潦水尽而寒潭清，烟光凝而暮山紫。俨骖騑于上路，访风景于崇阿；临帝子之长洲，得天人之旧馆。层峦耸翠，上出重霄；飞阁流丹，下临无地。鹤汀凫渚，穷岛屿之萦回；桂殿兰宫，即冈峦之体势。</p><p>披绣闼，俯雕甍，山原旷其盈视，川泽纡其骇瞩。闾阎扑地，钟鸣鼎食之家；舸舰弥津，青雀黄龙之舳。云销雨霁，彩彻区明。落霞与孤鹜齐飞，秋水共长天一色。渔舟唱晚，响穷彭蠡之滨；雁阵惊寒，声断衡阳之浦。</p><p>遥襟甫畅，逸兴遄飞。爽籁发而清风生，纤歌凝而白云遏。睢园绿竹，气凌彭泽之樽；邺水朱华，光照临川之笔。四美具，二难并。穷睇眄于中天，极娱游于暇日。天高地迥，觉宇宙之无穷；兴尽悲来，识盈虚之有数。望长安于日下，目吴会于云间。地势极而南溟深，天柱高而北辰远。关山难越，谁悲失路之人？萍水相逢，尽是他乡之客。怀帝阍而不见，奉宣室以何年？</p><p>嗟乎！时运不齐，命途多舛。冯唐易老，李广难封。屈贾谊于长沙，非无圣主；窜梁鸿于海曲，岂乏明时？所赖君子见机，达人知命。老当益壮，宁移白首之心？穷且益坚，不坠青云之志。酌贪泉而觉爽，处涸辙以犹欢。北海虽赊，扶摇可接；东隅已逝，桑榆非晚。孟尝高洁，空余报国之情；阮籍猖狂，岂效穷途之哭！</p><p>勃，三尺微命，一介书生。无路请缨，等终军之弱冠；有怀投笔，慕宗悫之长风。舍簪笏于百龄，奉晨昏于万里。非谢家之宝树，接孟氏之芳邻。他日趋庭，叨陪鲤对；今兹捧袂，喜托龙门。杨意不逢，抚凌云而自惜；钟期既遇，奏流水以何惭？</p><p>呜乎！胜地不常，盛筵难再；兰亭已矣，梓泽丘墟。临别赠言，幸承恩于伟饯；登高作赋，是所望于群公。敢竭鄙怀，恭疏短引；一言均赋，四韵俱成。请洒潘江，各倾陆海云尔：</p><p>滕王高阁临江渚，佩玉鸣鸾罢歌舞。<br>画栋朝飞南浦云，珠帘暮卷西山雨。<br>闲云潭影日悠悠，物换星移几度秋。<br>阁中帝子今何在？槛外长江空自流。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 滕王阁序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>兰亭集序</title>
      <link href="/2012/12/21/lantingjixu/"/>
      <url>/2012/12/21/lantingjixu/</url>
      
        <content type="html"><![CDATA[<p>王羲之（303年-361年），字逸少，琅琊临沂（今山东省临沂市）人。东晋大臣、书法家，丹阳尹王旷的儿子，太尉郗鉴的女婿，有“书圣”之称。</p><span id="more"></span><hr><p>永和九年，岁在癸丑，暮春之初，会于会稽山阴之兰亭，修禊事也。群贤毕至，少长咸集。此地有崇山峻岭，茂林修竹，又有清流激湍，映带左右，引以为流觞曲水，列坐其次。虽无丝竹管弦之盛，一觞一咏，亦足以畅叙幽情。</p><p>是日也，天朗气清，惠风和畅。仰观宇宙之大，俯察品类之盛，所以游目骋怀，足以极视听之娱，信可乐也。</p><p>夫人之相与，俯仰一世。或取诸怀抱，悟言一室之内；或因寄所托，放浪形骸之外。虽趣舍万殊，静躁不同，当其欣于所遇，暂得于己，快然自足，不知老之将至；及其所之既倦，情随事迁，感慨系之矣。向之所欣，俯仰之间，已为陈迹，犹不能不以之兴怀，况修短随化，终期于尽！古人云：“死生亦大矣。”岂不痛哉！</p><p>每览昔人兴感之由，若合一契，未尝不临文嗟悼，不能喻之于怀。固知一死生为虚诞，齐彭殇为妄作。后之视今，亦犹今之视昔，悲夫！故列叙时人，录其所述，虽世殊事异，所以兴怀，其致一也。后之览者，亦将有感于斯文。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 兰亭集序 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
